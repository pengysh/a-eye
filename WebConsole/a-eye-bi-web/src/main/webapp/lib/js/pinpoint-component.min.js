/*! pinpoint - v1.5.2 */
!function(a,b){"use strict";var c=function(a,c){this.$snap=b("#"+a),this.snap=Snap("#"+a),this._init(c),this._initControlClass(),this._addInnerEventListener()};c.prototype._init=function(a){this.groups={},this._aListener={inEvent:[],outEvent:[],clickEvent:[],selectTime:[],changeSliderTimeSeries:[],changeSelectionZone:[]},this.opt={duration:300,xAxisTicks:5,eventZoneHeight:30,headerZoneHeight:20,stateLineThickness:4,minSliderTimeSeries:6e3,maxSelectionTimeSeries:1728e5,headerTextTopPadding:10,selectionPointRadius:5},this.opt.minSliderTimeSeries=1e3*(this.opt.xAxisTicks+1);var b;for(b in a)this.opt[b]=a[b];this.oEventData=new c.EventData(this.opt.eventData||[]),this._checkOffset()},c.prototype._initControlClass=function(a){this.oPositionManager=new c.PositionManager({width:this.opt.width,selectTime:this.opt.selectTime,xAxisTicks:this.opt.xAxisTicks,handleTimeSeries:this.opt.handleTimeSeries,sliderTimeSeries:this.opt.timeSeries,minSliderTimeSeries:this.opt.minSliderTimeSeries,maxSelectionTimeSeries:this.opt.maxSelectionTimeSeries});var b=this.opt.height-this.opt.headerZoneHeight-this.opt.eventZoneHeight;this.oLoading=new c.LoadingIndicator(this,this.getGroup("loading",c.GROUP_TYPE.TOP_BASE,c.oDrawOrder.loading),{width:this.opt.width,height:this.opt.height,duration:2e3}),this.oBackground=new c.Background(this,this.getGroup("background",c.GROUP_TYPE.CONTENT_BASE,c.oDrawOrder.background),{top:0,left:0,width:this.opt.width,height:b,duration:this.opt.duration}),this.oSelectionManager=new c.SelectionManager(this,{margin:this.opt.left,height:this.opt.height,duration:this.opt.duration,handleSrc:this.opt.handleSrc,eventZoneHeight:this.opt.eventZoneHeight,headerZoneHeight:this.opt.headerZoneHeight,contentZoneHeight:b,selectionPointRadius:this.opt.selectionPointRadius}),this.oXAxis=new c.XAxis(this,this.getGroup("x-axis",c.GROUP_TYPE.TOP_BASE,c.oDrawOrder["x-axis"]),{endY:this.opt.height-this.opt.eventZoneHeight,width:this.opt.width,textY:this.opt.headerTextTopPadding,startY:this.opt.headerZoneHeight,duration:this.opt.duration}),this.oStateLine=new c.StateLine(this,this.getGroup("state-line",c.GROUP_TYPE.TOP_BASE,c.oDrawOrder["state-line"]),{width:this.opt.width,duration:this.opt.duration,topLineY:this.opt.headerZoneHeight,thickness:this.opt.stateLineThickness,timeSeries:this.opt.timeSeries,bottomLineY:this.opt.height-this.opt.eventZoneHeight}),this.oEvents=new c.Events(this,this.getGroup("events",c.GROUP_TYPE.BOTTOM_BASE,c.oDrawOrder.events),{duration:this.opt.duration}),this.oLoading.hide()},c.prototype.getGroup=function(a,b,c){if(this.groups[a])return this.groups[a];var d=this.groups[a]=this.snap.g().attr({"class":a,"data-order":c});return this._setTransform(d,b),this._sortGroup(d,c),this.groups[a]},c.prototype._setTransform=function(a,b){switch(b){case c.GROUP_TYPE.TOP_BASE:break;case c.GROUP_TYPE.CONTENT_BASE:a.attr({transform:"translate(0, "+this.opt.headerZoneHeight+")"});break;case c.GROUP_TYPE.BOTTOM_BASE:a.attr({transform:"translate(0, "+(this.opt.height-this.opt.eventZoneHeight)+")"})}},c.prototype._sortGroup=function(a,b){for(var c=this.snap.selectAll("g"),d=null,e=c.length-1;e>=0;e--)c[e]!=a&&b<parseInt(c[e].attr("data-order"))&&(d=c[e]);null!==d&&d.before(a)},c.prototype._checkOffset=function(){var a=this.$snap.offset();this.opt.top=a.top,this.opt.left=a.left},c.prototype._addInnerEventListener=function(){var a=this,c=-1;b(window).on("resize",function(){a._checkOffset(),a._resize()}),this.snap.mousemove(function(a,b,c){}),this.snap.mouseout(function(a,b,c){}),this.snap.mousedown(function(a,b,d){c=b}),this.snap.click(function(b,d,e){c===d&&a.oSelectionManager.onMouseClick(b,d-a.opt.left,e-a.opt.top)})},c.prototype.fireEvent=function(a,b){this._aListener[a].forEach(function(a){a(b)})},c.prototype.addEvent=function(a,b){return this._aListener[a].push(b),this},c.prototype.addEventData=function(a){this.oLoading.show(),this.oEventData.addData(a),this.oEvents.changeData(),this.oStateLine.changeData(),this.oLoading.hide()},c.prototype.reset=function(){this.oXAxis.reset(),this.oSelectionManager.reset(),this.oStateLine.reset(),this.oEvents.reset()},c.prototype._resize=function(){this.oPositionManager.setWidth(this.$snap.get(0).getBoundingClientRect().width),this.oBackground.reset(),this.reset()},c.prototype.zoomIn=function(a){this.oPositionManager.zoomIn(),this.reset()},c.prototype.zoomOut=function(a){this.oPositionManager.zoomOut(),this.reset()},c.prototype.getSliderTimeSeries=function(){return this.oPositionManager.getSliderTimeSeries()},c.prototype.getSelectionTimeSeries=function(){return this.oPositionManager.getSelectionTimeSeries()},c.prototype.setDefaultStateLineColor=function(a){this.oStateLine.setDefaultStateLineColor(a)},c.prototype.emptyData=function(){this.oLoading.show(),this.oEventData.emptyData(),this.oEvents.emptyData(),this.oStateLine.emptyData(),this.oLoading.hide()},c.prototype.setSelectTime=function(a){this.oSelectionManager.setSelectTime(a)},c.GROUP_TYPE={TOP_BASE:"top-base",CONTENT_BASE:"content-base",BOTTOM_BASE:"bottom-base"},c.oDrawOrder={background:0,"selection-zone":5,"time-series-signboard":7,"x-axis":10,events:10,"time-signboard":15,"selection-point":15,"state-line":20,"left-handler":25,"right-handler":25,guide:30,loading:100},c.EventColor={base:"rgba(187, 187, 187, .3)",10100:"#009E00",10199:"#FAEBD7",10200:"#D15260",10201:"#E95C63",10300:"#FF9D7B",10301:"#F2F089",20100:"#00F"},a.TimeSlider=c}(window,jQuery),function(a,b){var c=a.TimeSlider;c.Background=function(a,b,c){this.timeSlider=a,this.opt=c,this.group=b,this._addElements()},c.Background.prototype._addElements=function(){this.rect=this.timeSlider.snap.rect(this.opt.left,this.opt.top,this.opt.width,this.opt.height),this.group.add(this.rect)},c.Background.prototype.reset=function(){this.rect.animate({width:this.timeSlider.oPositionManager.getSliderEndPosition()},this.opt.duration,mina.easein)}}(window,jQuery),function(a,b){var c=a.TimeSlider;c.Configuration=function(a){this._init(a)},c.Configuration.prototype._init=function(a){console.log(a);var b={duration:300,xAxisTicks:5,eventZoneHeight:30,headerZoneHeight:20,stateLineThickness:4,minSliderTimeSeries:6e3,maxSliderTimeSeries:1728e5,headerTextTopPadding:10,selectionPointRadius:5},c={backgroundTop:0,backgroundLeft:0},d={loadingDuration:2e3};this._setOptions(b),this._setOptions(c),this._setOptions(d),this._setOptions(a),this._checkMinSliderTimeSeries(),this._contentZoneHeight=this.height-this.headerZoneHeight-this.eventZoneHeight},c.Configuration.prototype._checkMinSliderTimeSeries=function(a){var b=1e3*(this.xAxisTicks+1);this.minSliderTimeSeries=this.minSliderTimeSeries<b?b:this.minSliderTimeSeries},c.Configuration.prototype.setOffset=function(a){this.offsetLeft=a.left,this.offsetTop=a.top},c.Configuration.prototype._setOptions=function(a){for(var b in a)this[b]=a[b]},c.Configuration.prototype.getContentZoneHeight=function(){return this._contentZoneHeight}}(window,jQuery),function(a,b){var c=a.TimeSlider;c.EventData=function(a){this._init(a)},c.EventData.prototype._init=function(a){var b=this;this._aRawData=a,this._oHash={},this._aRawData.forEach(function(a){b._oHash[b.makeID(a)]=a})},c.EventData.prototype.makeID=function(a){return a.eventTypeCode+"-"+a.eventTimestamp},c.EventData.prototype.count=function(){return this._aRawData.length},c.EventData.prototype.getDataByIndex=function(a){return this._aRawData[a]},c.EventData.prototype.getDataByKey=function(a){return this._oHash[a]},c.EventData.prototype.emptyData=function(){this._aRawData=[],this._oHash={}},c.EventData.prototype.addData=function(a){if(0!==a.length){var b,c,d=this._getBeforeDataBoundary(a);for(b=d;b>=0;b--)this._aRawData.unshift(a[b]),this._oHash[this.makeID(a[b])]=a[b];var e=this._getAfterDataBoundary(a,d);for(b=e;b<a.length;b++)this._aRawData.push(a[b]),this._oHash[this.makeID(a[b])]=a[b];d=-1===d?0:d+1,e=e===Number.MAX_SAFE_INTEGER?a.length-1:e-1;var f=d;if(e>d)for(b=d;b<this._aRawData.length;b++){var g=this._aRawData[b].eventTimestamp;for(c=f;c<a.length;c++){var h=a[c];if(h.eventTimestamp<g)this._aRawData.splice(b,0,h),this._oHash[this.makeID(h)]=h,b++,f=c+1;else if(h.eventTimestamp===g){f=c+1;break}}if(f===a.length)break}}},c.EventData.prototype._getBeforeDataBoundary=function(a){var b=-1;if(0===this._aRawData.length)b=a.length-1;else for(var c=this._aRawData[0].eventTimestamp,d=a.length,e=0;d>e;e++){var f=a[e].eventTimestamp;if(!(c>f))break;b=e}return b},c.EventData.prototype._getAfterDataBoundary=function(a,b){var c=Number.MAX_SAFE_INTEGER,d=b+1,e=a.length;if(e>d)for(var f=this._aRawData[this._aRawData.length-1].eventTimestamp,g=d;e>g;g++){var h=a[g].eventTimestamp;if(h>f){c=g;break}}return c}}(window,jQuery),function(a,b){var c={ID_POSTFIX:"+event-circle",ID_SPLITER:"+"},d=a.TimeSlider;d.Events=function(a,b,c){this.timeSlider=a,this.group=b,this._oEventData=a.oEventData,this._init(c),this._addEventElements(),this._addEvents()},d.Events.prototype._init=function(a){this._oEventGroupElementHash={},this.opt={y:4,barLength:4,gapBarNCircle:2,circleRadius:8};for(var b in a)this.opt[b]=a[b];this._filterShadow=this.timeSlider.snap.filter(Snap.filter.shadow(1,1,1,"#000",.3))},d.Events.prototype._addEventElements=function(){for(var a=this._oEventData.count(),b=0;a>b;b++)this._addEventElement(this._oEventData.getDataByIndex(b),!0)},d.Events.prototype._addEventElement=function(a,b){var c=this._makeElement(a);return this.group[b?"append":"prepend"](c),this.timeSlider.oPositionManager.isInSliderTimeSeries(a.eventTimestamp)===!1&&this.hide(c),c},d.Events.prototype._makeID=function(a){return this._oEventData.makeID(a)+c.ID_POSTFIX},d.Events.prototype._makeElement=function(a){var b=this.opt,c=a.eventTimestamp,d=this._makeID(a),e=this.group.g().attr({"data-id":d,"data-time":c,transform:"translate("+this.timeSlider.oPositionManager.getPositionFromTime(c)+",0)"}).add(this.timeSlider.snap.line(0,b.y,0,b.y+b.barLength),this.timeSlider.snap.circle(0,b.y+b.circleRadius+b.gapBarNCircle+b.barLength,b.circleRadius).attr({fill:TimeSlider.EventColor[a.eventTypeCode],"class":"event",filter:this._filterShadow,"data-time":c}));return this._oEventGroupElementHash[d]=e,e},d.Events.prototype._addEvents=function(){var a=this;this.group.mouseover(function(b,c,d){a._fireEvent("inEvent",b,c,d)}),this.group.mouseout(function(b,c,d){a._fireEvent("outEvent",b,c,d)}),this.group.click(function(b,c,d){a._fireEvent("clickEvent",b,c,d)})},d.Events.prototype._fireEvent=function(a,b,d,e){this.timeSlider.fireEvent(a,[d,e,this._oEventData.getDataByKey(b.srcElement.parentNode.getAttribute("data-id").split(c.ID_SPLITER)[0])])},d.Events.prototype.reset=function(){var a=this;for(var b in this._oEventGroupElementHash){var d=this._oEventGroupElementHash[b],e=this._oEventData.getDataByKey(b.split(c.ID_SPLITER)[0]).eventTimestamp;a.timeSlider.oPositionManager.isInSliderTimeSeries(e)?(a.show(d),function(b,c){b.animate({transform:"translate("+c+",0)"},a.opt.duration)}(d,this.timeSlider.oPositionManager.getPositionFromTime(e))):!function(b,c){b.animate({transform:"translate("+c+",0)"},a.opt.duration,function(){a.hide(b)})}(d,a.timeSlider.oPositionManager.isBeforeSliderStartTime(e)?0:a.timeSlider.oPositionManager.getSliderEndPosition())}},d.Events.prototype.changeData=function(){var a=this.group.selectAll("g");if(0===a.length)return void this._addEventElements();var b,c,d,e=0,f=this._oEventData.count(),g=a.length,h=a[g-1];for(b=0;g>b;b++){var i=a[b],j=parseInt(i.attr("data-time"));for(c=e;f>c;c++){if(d=this._oEventData.getDataByIndex(c),!(d.eventTimestamp<j)){if(d.eventTimestamp===j){e=c+1,h=i;break}e=c,h=i;break}i.before(this._makeElement(d)),e=c}}for(e;f>e;e++){d=this._oEventData.getDataByIndex(e);var k=this._makeElement(d);h.after(k),h=k}this.reset()},d.Events.prototype.emptyData=function(){for(var a in this._oEventGroupElementHash)this._oEventGroupElementHash[a].remove();this._oEventGroupElementHash={}},d.Events.prototype.show=function(a){a.attr("display","block")},d.Events.prototype.hide=function(a){a.attr("display","none")}}(window,jQuery),function(a,b){var c={HANDLER_IMAGE_WIDTH:30,HANDLER_IMAGE_HEIGHT:18},d=a.TimeSlider;d.Handler=function(a,b,d,e,f,g){this.timeSlider=a,this.group=b,this.opt=d,this._previousX=d.x,this._handleSrc=d.handleSrc||c.NORMAL_IMG,this._handleDownSrc=this._getHandleDownSrc(),this.callbackStart=e,this.callbackDrag=f,this.callbackEnd=g,this._addElements(),this.setX(d.x),this.addEvent()},d.Handler.prototype._getHandleDownSrc=function(){var a=this._handleSrc.lastIndexOf(".");return this._handleSrc.substring(0,a)+"_down"+this._handleSrc.substring(a)},d.Handler.prototype._addElements=function(){this.handlerGrip=this.timeSlider.snap.image(this._handleSrc,-(c.HANDLER_IMAGE_WIDTH/2),-(c.HANDLER_IMAGE_HEIGHT/2),c.HANDLER_IMAGE_WIDTH,c.HANDLER_IMAGE_HEIGHT),this.handlerGroup=this.group.g(),this.handlerGroup.add(this.timeSlider.snap.line(0,0,0,this.opt.height),this.handlerGrip)},d.Handler.prototype.addEvent=function(a){var b=this,c=-1;this.handlerGrip.mousedown(function(a,b,c){a.stopPropagation()}),this.handlerGrip.click(function(a,b,c){a.stopPropagation()}),this.handlerGrip.drag(function(a,d,e,f,g){var h=e-b.opt.margin;b._isInRestirctionZone(h)!==!1&&(b.handlerGroup.attr({transform:"translate("+h+", 0)"}),c=h,b.callbackDrag(h))},function(a,c,d){d.stopPropagation(),b.handlerGrip.attr("href",b._handleDownSrc),b.callbackStart(a-b.opt.margin)},function(a){a.stopPropagation(),b.handlerGrip.attr("href",b._handleSrc),b._previousX!==c&&-1!==c?(b.callbackEnd(!0,c),b._previousX=c):b.callbackEnd(!1)})},d.Handler.prototype.setX=function(a){this.handlerGroup.animate({transform:"translate("+a+", 0)"},this.opt.duration,mina.easeout)},d.Handler.prototype._isInRestirctionZone=function(a){return!(a<=this.opt.zone[0]||a>=this.opt.zone[1])},d.Handler.prototype.setZone=function(a,b){this.opt.zone=[a,b]},d.Handler.prototype.setPositionAndZone=function(a,b){this.setX(a),this.callbackDrag(a),this.setZone(b[0],b[1])}}(window,jQuery),function(a,b){var c={SIZE:30},d=a.TimeSlider;d.LoadingIndicator=function(a,b,c){this.timeSlider=a,this.opt=c,this.group=b,this._bRunn=!1,this._addElements(),this.show()},d.LoadingIndicator.prototype._addElements=function(){var a=c.SIZE/2,b=this.opt.width/2-a,d=this.opt.height/2-a;this.group.add(this.timeSlider.snap.rect(0,0,this.opt.width,this.opt.height)),this.elClockwiseBox=this.timeSlider.snap.rect(b,d,c.SIZE,c.SIZE).attr({stroke:"rgba(197, 197, 197, .9)"}),this.elAnitclockwiseBox=this.timeSlider.snap.rect(b,d,c.SIZE,c.SIZE).attr({stroke:"rgba(239, 246, 105, .9)"}),this.group.add(this.elClockwiseBox,this.elAnitclockwiseBox)},d.LoadingIndicator.prototype.show=function(){this.group.attr("display","block"),this._bRunn=!0,this._animate(this.elClockwiseBox,0,360,mina.easeout),this._animate(this.elAnitclockwiseBox,45,-315,mina.easein)},d.LoadingIndicator.prototype._animate=function(a,b,c,d){var e=this;Snap.animate(b,c,function(b){a.attr("transform","rotate("+b+"deg)")},e.opt.duration,d,function(){e._bRunn===!0&&e._animate(a,c,b,d)})},d.LoadingIndicator.prototype.hide=function(){this.group.attr("display","none"),this._bRunn=!1}}(window,jQuery),function(a,b){var c={xAxisTicks:5},d=a.TimeSlider;d.PositionManager=function(a){this._width=a.width,this._minSliderTimeSeries=a.minSliderTimeSeries,this._maxSelectionTimeSeries=a.maxSelectionTimeSeries,this._initInnerVar(),this._setSliderTimeSeries(a.sliderTimeSeries[0],a.sliderTimeSeries[1]),this._initSelectionTimeSeries(a.handleTimeSeries||[]),this._resetSelectionByTime(),this._xAxisTicks=a.xAxisTicks||c.xAxisTicks,this.setSelectTime(a.selectTime)},d.PositionManager.prototype._initInnerVar=function(){this._aSelectionTimeSeries=[],this._aSelectionPosition=[]},d.PositionManager.prototype._setSliderTimeSeries=function(a,b){this._startTime=a,this._endTime=b,this._calcuTimePerPoint()},d.PositionManager.prototype._initSelectionTimeSeries=function(a){2!=a.length&&(a=[this._startTime,this._endTime]),a[1]-a[0]>this._maxSelectionTimeSeries&&(a[0]=a[1]-this._maxSelectionTimeSeries),this._setSelectionTimeSeries(a[0],a[1])},d.PositionManager.prototype._resetSelectionByPosition=function(){this._setSelectionTimeSeries(this.getTimeFromPosition(this._aSelectionPosition[0]),this.getTimeFromPosition(this._aSelectionPosition[1]))},d.PositionManager.prototype._setSelectionTimeSeries=function(a,b){this._aSelectionTimeSeries[0]=null===a?this._aSelectionTimeSeries[0]:a,this._aSelectionTimeSeries[1]=null===b?this._aSelectionTimeSeries[1]:b},d.PositionManager.prototype._resetSelectionByTime=function(){this._setSelectionPosition(this.getPositionFromTime(this._aSelectionTimeSeries[0]),this.getPositionFromTime(this._aSelectionTimeSeries[1]))},d.PositionManager.prototype._setSelectionPosition=function(a,b){this._aSelectionPosition[0]=null===a?this._aSelectionPosition[0]:a,this._aSelectionPosition[1]=null===b?this._aSelectionPosition[1]:b},d.PositionManager.prototype.isInMaxSelectionTimeSeries=function(a,b){return b-a<=this._maxSelectionTimeSeries},d.PositionManager.prototype.getNewSelectionTimeSeriesFromStart=function(a){return[a,a+this._maxSelectionTimeSeries]},d.PositionManager.prototype.getNewSelectionTimeSeriesFromEnd=function(a){return[a-this._maxSelectionTimeSeries,a]},d.PositionManager.prototype.isBeforeSliderStartTime=function(a){return a<this._startTime},d.PositionManager.prototype.isAfterSliderEndTime=function(a){return a>this._endTime},d.PositionManager.prototype.getSliderEndTime=function(){return this._endTime},d.PositionManager.prototype.setWidth=function(a){this._width=a,this._calcuTimePerPoint(),this._reset()},d.PositionManager.prototype.getSliderEndPosition=function(){return this._width},d.PositionManager.prototype.getSliderStartTimeStr=function(){return this._formatDate(new Date(this._startTime))},d.PositionManager.prototype.getSliderEndTimeStr=function(){return this._formatDate(new Date(this._endTime))},d.PositionManager.prototype.getFullTimeStr=function(a){return this._formatDate(new Date(this.getTimeFromPosition(a)))},d.PositionManager.prototype._formatDate=function(a){return a.getFullYear()+"."+this._twoChipers(a.getMonth()+1)+"."+this._twoChipers(a.getDate())+" "+this._twoChipers(a.getHours())+":"+this._twoChipers(a.getMinutes())+":"+this._twoChipers(a.getSeconds())},d.PositionManager.prototype._twoChipers=function(a){return 10>a?"0"+a:a},d.PositionManager.prototype.isInSelectionZone=function(a){return a>=this._aSelectionPosition[0]&&a<=this._aSelectionPosition[1]},d.PositionManager.prototype.isInSliderTimeSeries=function(a){return a>=this._startTime&&a<=this._endTime},d.PositionManager.prototype.getSliderTimeSeries=function(){return[this._startTime,this._endTime]},d.PositionManager.prototype.getSelectionTimeSeries=function(){return[this._aSelectionTimeSeries[0],this._aSelectionTimeSeries[1]]},d.PositionManager.prototype.getSelectionPosition=function(){return[this._aSelectionPosition[0],this._aSelectionPosition[1]]},d.PositionManager.prototype.isInSelectionZoneSelectPoint=function(){return this._selectPosition>=this._aSelectionPosition[0]&&this._selectPosition<=this._aSelectionPosition[1]},d.PositionManager.prototype.getSelectPosition=function(){return this._selectPosition},d.PositionManager.prototype.setSelectTime=function(a){this._selectTime=a,this._selectPosition=this.getPositionFromTime(a)},d.PositionManager.prototype.setSelectPosition=function(a){this._selectPosition=a,this._selectTime=this.getTimeFromPosition(a)},d.PositionManager.prototype.getTimeFromPosition=function(a){return this._startTime+this._timePerPoint*a},d.PositionManager.prototype.getPositionFromTime=function(a){return parseInt((a-this._startTime)/this._timePerPoint)},d.PositionManager.prototype.calcuSelectionZone=function(){var a=parseInt((this._aSelectionPosition[1]-this._aSelectionPosition[0])/2),b=this._selectPosition-a,c=this._selectPosition+a;0>b?(c+=Math.abs(b),b=0):c>this._width&&(b-=c-this._width,c=this._width),this._setSelectionTimeSeries(this.getTimeFromPosition(b),this.getTimeFromPosition(c)),this._setSelectionPosition(b,c)},d.PositionManager.prototype.getXBarPosition=function(){for(var a=this,b=this._xAxisTicks+1,c=parseInt(this._width/b),d=[],e=0;b>e;e++)if(0!==e){var f=e*c;d.push({x:f,time:a.getTimeStr(f)})}return d},d.PositionManager.prototype.getTimeStr=function(a){var b=a*this._timePerPoint+this._startTime,c=new Date(b);return this._twoChipers(c.getMonth()+1)+"."+this._twoChipers(c.getDate())+" "+this._twoChipers(c.getHours())+":"+this._twoChipers(c.getMinutes())},d.PositionManager.prototype.setSelectionStartPosition=function(a){this._setSelectionTimeSeries(this.getTimeFromPosition(a),null),this._setSelectionPosition(a,null)},d.PositionManager.prototype.setSelectionEndPosition=function(a){this._setSelectionTimeSeries(null,this.getTimeFromPosition(a)),this._setSelectionPosition(null,a)},d.PositionManager.prototype.zoomIn=function(){if(this._startTime!==this._aSelectionTimeSeries[0]||this._endTime!==this._aSelectionTimeSeries[1]){var a=parseInt((this._endTime-this._startTime)/4),b=this._selectTime-a,c=this._selectTime+a;if(c-b<this._minSliderTimeSeries){var d=parseInt(this.minSliderTimeSeris/2);b=this._selectTime-d,c=this._selectTime+d}var e;if(this._aSelectionTimeSeries[0]<b){e=b-this._aSelectionTimeSeries[0];var f=this._aSelectionTimeSeries[1]+e>c?c:this._aSelectionTimeSeries[1]+e;this._setSelectionTimeSeries(b,f)}if(this._aSelectionTimeSeries[1]>c){e=this._aSelectionTimeSeries[1]-c;var g=this._aSelectionTimeSeries[0]-e<b?b:this._aSelectionTimeSeries[0]-e;this._setSelectionTimeSeries(g,c)}this._setSliderTimeSeries(b,c),this._reset()}},d.PositionManager.prototype.zoomOut=function(){var a=this._endTime-this._startTime,b=this._aSelectionTimeSeries[0]+parseInt((this._aSelectionTimeSeries[1]-this._aSelectionTimeSeries[0])/2);this._setSliderTimeSeries(b-a,b+a),this._reset()},d.PositionManager.prototype.resetBySelectTime=function(a){a=parseInt(a);var b=parseInt((this._endTime-this._startTime)/2),c=parseInt((this._aSelectionTimeSeries[1]-this._aSelectionTimeSeries[0])/2);this._setSliderTimeSeries(a-b,a+b),this._setSelectionTimeSeries(a-c,a+c),this._resetSelectionByTime(),this.setSelectTime(a)},d.PositionManager.prototype._reset=function(){this.setSelectTime(this._selectTime),this._resetSelectionByTime()},d.PositionManager.prototype._calcuTimePerPoint=function(){this._timePerPoint=parseInt((this._endTime-this._startTime)/this._width)}}(window,jQuery),function(a,b){var c=a.TimeSlider;c.SelectionManager=function(a,b){this.timeSlider=a,this.opt=b,this.initClass()},c.SelectionManager.prototype.initClass=function(){var a=this,b=this.timeSlider.oPositionManager.getSelectionPosition();this.oSelectionZone=new TimeSlider.SelectionZone(this.timeSlider,this.timeSlider.getGroup("selection-zone",TimeSlider.GROUP_TYPE.CONTENT_BASE,TimeSlider.oDrawOrder["selection-zone"]),{top:0,left:b[0],width:b[1]-b[0],height:this.opt.contentZoneHeight,duration:50}),this.oSelectionPoint=new TimeSlider.SelectionPoint(this.timeSlider,this.timeSlider.getGroup("selection-point",TimeSlider.GROUP_TYPE.CONTENT_BASE,TimeSlider.oDrawOrder["selection-point"]),{y:this.opt.headerZoneHeight,x:this.timeSlider.oPositionManager.getSelectPosition(),radius:this.opt.selectionPointRadius,height:this.opt.contentZoneHeight,duration:this.opt.duration,eventStartY:this.opt.headerZoneHeight,eventEndY:this.opt.height-this.opt.eventZoneHeight}),this.oLeftHandler=new TimeSlider.Handler(this.timeSlider,this.timeSlider.getGroup("left-handler",TimeSlider.GROUP_TYPE.CONTENT_BASE,TimeSlider.oDrawOrder["left-handler"]),{x:b[0],zone:[0,b[1]],height:this.opt.contentZoneHeight,margin:this.opt.margin,duration:50,handleSrc:this.opt.handleSrc},function(b){a.oLeftTimeSignboard.onDragStart(b)},function(b){a.oLeftTimeSignboard.onDrag(b)},function(b,c){a.oLeftTimeSignboard.onDragEnd(),b&&a.moveLeftHandler(c)}),this.oRightHandler=new TimeSlider.Handler(this.timeSlider,this.timeSlider.getGroup("right-handler",TimeSlider.GROUP_TYPE.CONTENT_BASE,TimeSlider.oDrawOrder["right-handler"]),{x:b[1],zone:[b[0],this.timeSlider.oPositionManager.getSliderEndPosition()],height:this.opt.contentZoneHeight,margin:this.opt.margin,duration:0,handleSrc:this.opt.handleSrc},function(b){a.oRightTimeSignboard.onDragStart(b)},function(b){a.oRightTimeSignboard.onDrag(b)},function(b,c){a.oRightTimeSignboard.onDragEnd(),b&&a.moveRightHandler(c)}),this.oLeftTimeSignboard=new TimeSlider.TimeSignboard(this.timeSlider,this.timeSlider.getGroup("time-left-signboard",TimeSlider.GROUP_TYPE.CONTENT_BASE,TimeSlider.oDrawOrder["time-signboard"]),{x:b[0],direction:"left"}),this.oRightTimeSignboard=new TimeSlider.TimeSignboard(this.timeSlider,this.timeSlider.getGroup("time-right-signboard",TimeSlider.GROUP_TYPE.CONTENT_BASE,TimeSlider.oDrawOrder["time-signboard"]),{x:b[1],direction:"right"})},c.SelectionManager.prototype.moveLeftHandler=function(a){var b=this.timeSlider.oPositionManager.getSelectionTimeSeries(),c=this.timeSlider.oPositionManager.getTimeFromPosition(a);if(this.timeSlider.oPositionManager.isInMaxSelectionTimeSeries(c,b[1]))this.oRightHandler.setZone(a,this.timeSlider.oPositionManager.getSliderEndPosition()),this.timeSlider.oPositionManager.setSelectionStartPosition(a);else{var d=this.timeSlider.oPositionManager.getNewSelectionTimeSeriesFromStart(c),e=this.timeSlider.oPositionManager.getPositionFromTime(d[1]);this.oRightHandler.setZone(a,this.timeSlider.oPositionManager.getSliderEndPosition()),this.timeSlider.oPositionManager.setSelectionStartPosition(a),this.oRightHandler.setX(e),this.oRightTimeSignboard.onDrag(e),this.oLeftHandler.setZone(0,e),this.timeSlider.oPositionManager.setSelectionEndPosition(e),this.timeSlider.oPositionManager.isInSelectionZoneSelectPoint()===!1&&(this.oSelectionPoint.onMouseClick(e),this.timeSlider.fireEvent("selectTime",d[1]))}this.oSelectionZone.redraw(),this._fireChangeZoneEvent()},c.SelectionManager.prototype.moveRightHandler=function(a){var b=this.timeSlider.oPositionManager.getSelectionTimeSeries(),c=this.timeSlider.oPositionManager.getTimeFromPosition(a);if(this.timeSlider.oPositionManager.isInMaxSelectionTimeSeries(b[0],c))this.oLeftHandler.setZone(0,a),this.timeSlider.oPositionManager.setSelectionEndPosition(a);else{var d=this.timeSlider.oPositionManager.getNewSelectionTimeSeriesFromEnd(c),e=this.timeSlider.oPositionManager.getPositionFromTime(d[0]);this.oLeftHandler.setZone(0,a),this.timeSlider.oPositionManager.setSelectionEndPosition(a),this.oLeftHandler.setX(e),this.oLeftTimeSignboard.onDrag(e),this.oRightHandler.setZone(e,this.timeSlider.oPositionManager.getSliderEndPosition()),this.timeSlider.oPositionManager.setSelectionStartPosition(e),this.timeSlider.oPositionManager.isInSelectionZoneSelectPoint()===!1&&(this.oSelectionPoint.onMouseClick(e),this.timeSlider.fireEvent("selectTime",d[0]))}this.oSelectionZone.redraw(),this._fireChangeZoneEvent()},c.SelectionManager.prototype.moveSelectionAndHandler=function(a){var b=this.timeSlider.oPositionManager.getSelectionPosition();this.oLeftHandler.setPositionAndZone(b[0],[0,b[1]]),this.oRightHandler.setPositionAndZone(b[1],[b[0],this.timeSlider.oPositionManager.getSliderEndPosition()]),this.oSelectionZone.redraw(),this._fireChangeZoneEvent()},c.SelectionManager.prototype.onMouseClick=function(a,b,c){c>this.opt.headerZoneHeight&&c<this.opt.headerZoneHeight+this.opt.contentZoneHeight&&this._setSelectTime(this.timeSlider.oPositionManager.getTimeFromPosition(b))},c.SelectionManager.prototype._fireChangeZoneEvent=function(){var a=this.timeSlider.oPositionManager.getSelectionPosition();this.timeSlider.fireEvent("changeSelectionZone",[this.timeSlider.oPositionManager.getTimeFromPosition(a[0]),this.timeSlider.oPositionManager.getTimeFromPosition(a[1])])},c.SelectionManager.prototype.setSelectTime=function(a){this.timeSlider.oPositionManager.getPositionFromTime(a),this.timeSlider.oPositionManager.isInSliderTimeSeries(a)?this._setSelectTime(a):(this.timeSlider.oPositionManager.resetBySelectTime(a),this.timeSlider.reset(),this.timeSlider.fireEvent("selectTime",a))},c.SelectionManager.prototype._setSelectTime=function(a){this.timeSlider.oPositionManager.setSelectTime(a),this.timeSlider.oPositionManager.isInSelectionZone(this.timeSlider.oPositionManager.getSelectPosition())===!1&&(this.timeSlider.oPositionManager.calcuSelectionZone(),this.moveSelectionAndHandler()),this.oSelectionPoint.onMouseClick(this.timeSlider.oPositionManager.getSelectPosition()),this.timeSlider.fireEvent("selectTime",a)},c.SelectionManager.prototype.reset=function(){var a=this.timeSlider.oPositionManager.getSelectionPosition();this.oLeftHandler.setPositionAndZone(a[0],[0,a[1]]),this.oRightHandler.setPositionAndZone(a[1],[a[0],this.timeSlider.oPositionManager.getSliderEndPosition()]),this.oSelectionZone.redraw(),this.oSelectionPoint.onMouseClick(this.timeSlider.oPositionManager.getSelectPosition())}}(window,jQuery),function(a,b){var c=a.TimeSlider;c.SelectionPoint=function(a,b,c){this.timeSlider=a,this.group=b,this.opt=c,this._addElements(),this.onMouseClick(c.x)},c.SelectionPoint.prototype._addElements=function(){this.group.add(this.timeSlider.snap.line(0,0,0,this.opt.height),this.timeSlider.snap.circle(0,this.opt.height/2,this.opt.radius).attr({filter:this.timeSlider.snap.filter(Snap.filter.shadow(0,0,2,"#000",.3))}))},c.SelectionPoint.prototype.onMouseClick=function(a){this.group.animate({transform:"translate("+a+", "+this.opt.y+")"},this.opt.duration,mina.easein)}}(window,jQuery),function(a,b){var c=a.TimeSlider;c.SelectionZone=function(a,b,c){this.timeSlider=a,this.group=b,this.opt=c,this._addElements()},c.SelectionZone.prototype._addElements=function(){var a=this.timeSlider.oPositionManager.getSelectionPosition();this.elZone=this.timeSlider.snap.rect(a[0],this.opt.top,a[1]-a[0],this.opt.height),this.group.add(this.elZone)},c.SelectionZone.prototype.redraw=function(){var a=this.timeSlider.oPositionManager.getSelectionPosition();this.elZone.animate({x:a[0],width:a[1]-a[0]},this.opt.duration)}}(window,jQuery),function(a,b){var c={AGENT_CONNECT:10100,AGENT_SHUTDOWN:10200,ID_POSTFIX:"+state-line",ID_SPLITER:"+"},d=a.TimeSlider;d.StateLine=function(a,b,c){this.timeSlider=a,this.group=b,this.opt=c,this._oEventData=a.oEventData,this._init(),this._addBaseLine(),this._addEventElements(),this._resetBaseLineColor()},d.StateLine.prototype._init=function(){this._hasDurationData=!1,this._filterShadow=this.timeSlider.snap.filter(Snap.filter.shadow(0,1,.5,"#000",.2)),this._oLineElementHash={}},d.StateLine.prototype._addBaseLine=function(){this._baseColor=TimeSlider.EventColor.base,this._aBaseLine=[this._makeLine(0,this.opt.width,this.opt.topLineY,"base","base-"+Date.now()),this._makeLine(0,this.opt.width,this.opt.bottomLineY,"base","base-"+Date.now())],this.group.add(this._aBaseLine[0],this._aBaseLine[1])},d.StateLine.prototype._addEventElements=function(){for(var a=this._oEventData.count(),b=0;a>b;b++)this._addEventElement(this._oEventData.getDataByIndex(b))},d.StateLine.prototype._addEventElement=function(a){if("undefined"!=typeof a.durationStartTimestamp){if(this.timeSlider.oPositionManager.isInSliderTimeSeries(a.durationStartTimestamp)===!1&&this.timeSlider.oPositionManager.isInSliderTimeSeries(a.durationEndTimestamp)===!1)return;this._hasDurationData=!0,this._addLine(this.timeSlider.oPositionManager.getPositionFromTime(a.durationStartTimestamp),this._getX2(a),a)}},d.StateLine.prototype._makeID=function(a){return this._oEventData.makeID(a)+c.ID_POSTFIX},d.StateLine.prototype._addLine=function(a,b,c){var d=this._makeID(c),e=this._makeLine(a,b,this.opt.topLineY,c.eventTypeCode,d),f=this._makeLine(a,b,this.opt.bottomLineY,c.eventTypeCode,d);this._oLineElementHash[d]=[e,f],this.group.add(e,f)},d.StateLine.prototype._makeLine=function(a,b,c,d,e){return this.timeSlider.snap.line(a,c,b,c).attr({stroke:TimeSlider.EventColor[d],"data-id":e,strokeWidth:this.opt.thickness})},d.StateLine.prototype._hasEventData=function(a){return"undefined"!=typeof this._oLineElementHash[a]},d.StateLine.prototype._getX2=function(a){return this.timeSlider.oPositionManager.getPositionFromTime(-1==a.durationEndTimestamp?this.timeSlider.oPositionManager.getSliderEndTime():a.durationEndTimestamp);
},d.StateLine.prototype.changeData=function(){for(var a=this._oEventData.count(),b=0;a>b;b++){var c=this._oEventData.getDataByIndex(b);this._hasEventData(this._makeID(c))===!1&&this._addEventElement(c)}this.reset()},d.StateLine.prototype.emptyData=function(){for(var a in this._oLineElementHash){var b=this._oLineElementHash[a];b[0].remove(),b[1].remove()}this._oLineElementHash={}},d.StateLine.prototype.setDefaultStateLineColor=function(a){this._baseColor=a,this._hasDurationData!==!0&&this._aBaseLine.forEach(function(b){b.attr("stroke",a)})},d.StateLine.prototype._resetBaseLineColor=function(){var a=this;this._aBaseLine.forEach(function(b){b.attr("stroke",a._hasDurationData===!0?TimeSlider.EventColor.base:a._baseColor)})},d.StateLine.prototype.reset=function(){var a=this,b=this.timeSlider.oPositionManager;for(var d in this._oLineElementHash){var e=this._oLineElementHash[d],f=this._oEventData.getDataByKey(d.split(c.ID_SPLITER)[0]);b.isInSliderTimeSeries(f.durationStartTimestamp)||b.isInSliderTimeSeries(f.durationEndTimestamp)?e.forEach(function(c){a.show(c),c.animate({x1:b.getPositionFromTime(f.durationStartTimestamp),x2:a._getX2(f)},a.opt.duration)}):e.forEach(function(b){a.hide(b)})}this._aBaseLine.forEach(function(c){c.animate({x2:b.getSliderEndPosition()},a.opt.duration)}),this._resetBaseLineColor()},d.StateLine.prototype.show=function(a){a.attr("display","block")},d.StateLine.prototype.hide=function(a){a.attr("display","none")}}(window,jQuery),function(a,b){var c=a.TimeSlider;c.TimeSeriesSignboard=function(a,b,c){this.timeSlider=a,this.group=b,this.opt=c,this._init(),this._addElements()},c.TimeSeriesSignboard.prototype._init=function(){this._halfHeight=this.opt.height-12},c.TimeSeriesSignboard.prototype._addElements=function(){this._elStartTime=this.group.text(0,this._halfHeight,this.timeSlider.oPositionManager.getSliderStartTimeStr()).attr({"text-anchor":"start"}),this._elEndTime=this.group.text(this.timeSlider.oPositionManager.getSliderEndPosition(),this._halfHeight,this.timeSlider.oPositionManager.getSliderEndTimeStr()).attr({"text-anchor":"end"}),this.group.add(this._elStartTime,this._elEndTime)},c.TimeSeriesSignboard.prototype.reset=function(){this._elStartTime.attr("text",this.timeSlider.oPositionManager.getSliderStartTimeStr()),this._elEndTime.attr("text",this.timeSlider.oPositionManager.getSliderEndTimeStr())},c.TimeSeriesSignboard.prototype.resize=function(){var a=this;this._elEndTime.animate({x:a.timeSlider.oPositionManager.getSliderEndPosition()},this.opt.duration,function(){a._elEndTime.attr("text",a.timeSlider.oPositionManager.getSliderEndTimeStr())})}}(window,jQuery),function(a,b){var c=a.TimeSlider;c.TimeSignboard=function(a,b,c){this.timeSlider=a,this.group=b,this.opt=c,this._textMaxWidth=100,this._xPadding=2,this._addElements()},c.TimeSignboard.prototype._addElements=function(){var a=this._isIn(this.opt.x),b=this.opt.x+(a?this._xPadding:-this._xPadding);this.timeText=this.group.text(b,26,this.timeSlider.oPositionManager.getFullTimeStr(this.opt.x)).attr({textAnchor:a?"start":"end"}),this.group.add(this.timeText)},c.TimeSignboard.prototype.setX=function(a){var b=this._isIn(a);this.timeText.attr({x:a+(b?this._xPadding:-this._xPadding),text:this.timeSlider.oPositionManager.getFullTimeStr(a),textAnchor:b?"start":"end"})},c.TimeSignboard.prototype._isIn=function(a){return"left"==this.opt.direction?a<this._textMaxWidth:a+this._textMaxWidth<this.timeSlider.oPositionManager.getSliderEndPosition()},c.TimeSignboard.prototype.onDragStart=function(a){this.setX(a)},c.TimeSignboard.prototype.onDragEnd=function(){},c.TimeSignboard.prototype.onDrag=function(a){this.setX(a)}}(window,jQuery),function(a,b){a.TimeSlider.XAxis=function(a,b,c){this.timeSlider=a,this.group=b,this.opt=c,this.aSubGroup=[],this.aText=[],this.init()},a.TimeSlider.XAxis.prototype.init=function(){for(var a=this.timeSlider.oPositionManager.getXBarPosition(),b=this.opt.width/2,c=this,d=0;d<a.length;d++){var e=c.group.g();c.aText.push(c.timeSlider.snap.text(0,c.opt.textY,a[d].time)),e.attr("transform","translate("+b+", 0)"),e.add(c.aText[d],c.timeSlider.snap.line(0,c.opt.startY,0,c.opt.endY)),c.group.add(e),c.aSubGroup.push(e),c.setX(d,a[d].x,b)}},a.TimeSlider.XAxis.prototype.setX=function(a,b,c){var d=this.aSubGroup[a];3===arguments.length?Snap.animate(c,b,function(a){d.attr("transform","translate("+a+", 0)")},this.opt.duration):d.attr("transform","translate("+b+", 0)")},a.TimeSlider.XAxis.prototype.reset=function(){for(var a=this,b=this.timeSlider.oPositionManager.getXBarPosition(),c=(this.opt.width/2,0);c<b.length;c++)a.aSubGroup[c].attr("transform","translate("+b[c].x+",0)"),a.aText[c].attr("text",b[c].time)}}(window,jQuery),!function(a,b){"use strict";function c(a,b,c,d,e){this._oExternal=d,this._AGENT_ALL=this._currentAgent=e,this._aAgentList=b,this._setOption(a),this._initVariables(),this._initManager(),this._initElements(),this._initPlugin(c),this._initInnerPlugin()}c.prototype.option=function(a,b){var c=this,d=arguments.length;if(2===d)this._option[a]=b;else{if(1!==d)return this._option;if("object"==typeof a){this._option=this._option||{};for(var e in a)c._option[e]=a[e]}else if("string"==typeof a)return this._option[a]}},c.prototype._setOption=function(a){this.option({containerId:"",sPrefix:"bigscatterchart",width:600,height:400,minX:0,maxX:100,minY:0,maxY:100,minZ:0,maxZ:1,ticksOfX:5,ticksOfY:5,bubbleSize:10,padding:{top:40,left:50,right:40,bottom:30},lineColor:"#3d3d3d",bubbleRadius:3,guideStyle:{lineWidth:1,lineDash:[1,0],globalAlpha:1,strokeStyle:"#e3e3e3"},axisLabelStyle:{"font-size":"10px","line-height":"12px",height:"20px","padding-top":"5px"},loadingStr:"Loading",noDataStr:"No Data",noDataStyle:{"font-size":"15px",color:"#000","font-weight":"bold"},bUseMouseGuideLine:!0,checkBoxImage:{checked:"data:image/gif;base64,R0lGODlhDgANANU7APf6/QBoAO31+wBEAABZABSmDfj7/kLFLM/k9CpFeCA7bBs1ZiU/cWDZQBgxYvL4/PD2/ABLAKzQ6wBTAPn8/vD3/FLPNgBzAO30/J/J6JKgu1/YPzBLfzVQhQBvAO31/EhknURgmNTn9NPm9Orz+9fc51LQNztWjfX5/e/2++72+9vh7Njp9kBbk9jp9aCvzd3r+QB3AABhAKXM6SGvFTG5IEtnoBUuXuLu+v//zP///wAAAAAAAAAAAAAAAAAAACH5BAEAADsALAAAAAAOAA0AAAaHwJ1tSCS+VrsdSMdsOmOxXUiHq1ohlFguF2vpMAYDBvYxXDaNxuWkA3gCABIgYLGYAruOTraVoWQHgTIlOxw6BDWJiIoUGjsJOg8TNJSUEw8QCTsMOiwVEQWhERUuOAw7CjoSIykDrioiEjgKOws6MzMIArsIuDgLOw4ZVsRWDkk3ycrLN0lBADs=",unchecked:"data:image/gif;base64,R0lGODlhDgANAPcbANnZ2X9/f3Nzc4eHh4ODg5GRkfDw8IqKim1tbXt7e46Ojnd3d3BwcOzs7NPT09jY2O/v7+3t7eHh4eXl5dXV1enp6d3d3Wtra5OTk/Ly8v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjEgNjQuMTQwOTQ5LCAyMDEwLzEyLzA3LTEwOjU3OjAxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjYxQjZBNkRCQUVEQTExRTI5Q0M1REU5NjlFRThGRDZBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjYxQjZBNkRDQUVEQTExRTI5Q0M1REU5NjlFRThGRDZBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjFCNkE2RDlBRURBMTFFMjlDQzVERTk2OUVFOEZENkEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjFCNkE2REFBRURBMTFFMjlDQzVERTk2OUVFOEZENkEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQBAAAbACwAAAAADgANAAAIgwA3YBhIsCCGDRsKaFjIsGGGAhsUaMhAsaJFBRsOaIDAkaMBAxwzHNgwQEOEkygbnMwwYAMBDRViypSZgcCGABom6Ny5M0OADQk0SBhKlGiGBBsWaLDAtGnTDAs2CNDw4AEAq1WvZhCwgYEGCmDDhs3AYAMCBxbTZkCA8ILbt3AvIAwIADs="},fnXAxisFormat:function(a,b,c){var d=moment(a*b+c);return d.format("MM-DD")+"<br>"+d.format("HH:mm:ss")},fnYAxisFormat:function(a,b,d,e){return c.Util.addComma(e+d-(a*b+d))},fOnSelect:function(){}}),this.option(a),this.option("minY",this._oExternal.loadFromStorage("scatter-y-min")||this.option("minY")),this.option("maxY",this._oExternal.loadFromStorage("scatter-y-max")||this.option("maxY"))},c.prototype._initVariables=function(){this._aBubbles=[],this._oSCManager=new c.SizeCoordinateManager(this.option()),this._bPause=!1,this._bDestroied=!1,this._bRequesting=!1,this._getContainer()},c.prototype._getContainer=function(){var a=this.option("containerId");switch(typeof a){case"string":this._$elContainer=b("#"+a);break;case"object":this._$elContainer=a;break;case"function":this._$elContainer=a()}this._$elContainer=b(this._$elContainer),this._$elContainer.css({width:this._oSCManager.getWidth(),height:this._oSCManager.getHeight(),position:"relative"}).addClass(this.option("containerClass"))},c.prototype._initManager=function(){var a=this;this._oBubbleTypeManager=new c.BubbleTypeManager(this.option(),this._oSCManager,this._$elContainer,{onChange:function(b){a._oRendererManager.toggle(b)},onSend:function(b,c){a._oExternal.sendAnalytics(b,c)}}),this._oRendererManager=new c.RendererManager(this.option(),this._oSCManager,this._aAgentList,this._$elContainer),this._oDragManager=new c.DragManager(this.option(),this._oSCManager,this._$elContainer,{onSelect:function(b,c){a.hasDataByXY(c.fromX,c.toX,c.fromY,c.toY)&&a._oExternal.onSelect(b,c)}})},c.prototype._initElements=function(){this._$elPluginArea=b("<div>").css({top:"0px",left:this._oSCManager.getLeftOfPluginArea()+"px",width:this._oSCManager.getPadding().right+"px",height:this._oSCManager.getHeight()+"px","z-index":510,position:"absolute"}).addClass("plugins").appendTo(this._$elContainer)},c.prototype._initPlugin=function(a){var c=this;b.each(a,function(a,b){b.initElement(c._$elContainer,c._$elPluginArea,c.option()).initEvent(c)})},c.prototype._initInnerPlugin=function(){this._oMessage=new c.MessagePlugin,this._oMessage.initElement(this._$elContainer,this._$elPluginArea,this.option()).initEvent(self)},c.prototype.fireDragEvent=function(a){this._oDragManager.triggerDrag(a)},c.prototype.selectArea=function(a,b,c){this._oExternal.onSelect(a,b,c)},c.prototype.selectType=function(a){return this._oBubbleTypeManager.selectType(a),this._oRendererManager.selectType(this._currentAgent,a),this},c.prototype.addBubbles=function(a){this._aBubbles.push(a)},c.prototype._getSumCountByType=function(a){var c=this,d={},e=this._oSCManager.getX();b.each(this.option("typeInfo"),function(a,b){d[b[0]]=0});for(var f=0;f<this._aBubbles.length;f++){var g=this._aBubbles[f];b.each(this._aAgentList,function(f,h){c._currentAgent!==c._AGENT_ALL&&c._currentAgent!==h||b.each(d,function(b){a===!0?d[b]+=g.getCount(h,b,e.min,e.max):d[b]+=g.getCount(h,b)})})}return d},c.prototype.redrawBubbles=function(){this._oBubbleTypeManager.showTypeCount(this._getSumCountByType()),this._aBubbles.length>0&&this._oMessage.hide();for(var a=0,b=this._aBubbles.length;b>a;a++)this._drawBubbles(this._aBubbles[a])},c.prototype.clear=function(){this._oRendererManager.clear(),this._aBubbles=[],this._oBubbleTypeManager.showTypeCount(this._getSumCountByType()),this._oDragManager.hide(),this._oMessage.show(this.option("noDataStr"))},c.prototype._drawBubbles=function(a){var d=this,e=this.option("typeInfo"),f=this.option("propertyIndex"),g=this.option("sPrefix");setTimeout(function(){b.each(d._aAgentList,function(b,h){for(var i=0,j=a.countByAgent(h);j>i&&!d._bDestroied;i++){var k=a.getDataByAgent(h,i),l=k[f.groupCount];if(0!==l){var m=e[k[f.type]];d._oRendererManager.drawBubble(c.Util.makeKey(h,g,m[0]),m[1],k)}}})},0)},c.prototype.addBubbleAndMoveAndDraw=function(a,b,c){if(b===!1){if(a.isEmpty())return;this._oMessage.hide()}this.addBubbles(a),this._bPause!==!0&&(this._oBubbleTypeManager.showTypeCount(this._getSumCountByType(b)),this._drawBubbles(a),this._moveChart(a,c),this._oRendererManager.updateXYAxis(),this._removeBubble())},c.prototype._moveChart=function(a,b){var c=this._oSCManager.getX(),d=a.getX(),e=this.option("chartAnimationTime");if(d.min>=c.max){var f=d.max-c.max,g=f*this._oSCManager.getPixelPerTime();this._oSCManager.setX(c.min+f,c.max+f),this._oRendererManager.moveChart(parseInt(g,10),e>b?0:e)}},c.prototype._removeBubble=function(){for(var a=this._oSCManager.getX().min,b=0;b<this._aBubbles.length;b++){var c=this._aBubbles[b];if(!(c.getX().max<a))break;this._aBubbles.shift(),b--}},c.prototype.createDataBlock=function(a){return new c.DataBlock(a,this.option("propertyIndex"),this.option("typeInfo"))},c.prototype.getDataByXY=function(a,b,d,e){var f=[],g=this.option("typeInfo"),h=this.option("propertyIndex");a=parseInt(a,10),b=parseInt(b,10),d=parseInt(d,10),e=parseInt(e,10);for(var i=this._oSCManager.getY(),j=this._oBubbleTypeManager.getVisibleType(),k=0,l=this._aBubbles.length;l>k;k++)for(var m=this._aBubbles[k],n=0,o=m.count();o>n;n++){var p=m.getData(n),q=m.getAgentName(p);if(this._currentAgent===this._AGENT_ALL||this._currentAgent===q){var r=p[h.x],s=g[p[h.type]][0];if(c.Util.isInRange(a,b,r)&&c.Util.indexOf(j,s)>=0){var t=p[h.y];(c.Util.isInRange(d,e,t)||e===i.max&&t>e)&&f.push([m.getTransactionID(p),p[h.x],p[h.y]])}}}return f},c.prototype.getDataByRange=function(a,b,d){var e=[],f=this.option("typeInfo"),g=this.option("propertyIndex");b=parseInt(b,10),d=parseInt(d,10);for(var h=0,i=this._aBubbles.length;i>h;h++)for(var j=this._aBubbles[h],k=0,l=j.count();l>k;k++){var m=j.getData(k),n=j.getAgentName(m);if(this._currentAgent===this._AGENT_ALL||this._currentAgent===n){var o=f[m[g.type]][0];if(a===o){var p=m[g.y];("Failed"===a||c.Util.isInRange(b,d,p))&&e.push([j.getTransactionID(m),m[g.x],m[g.y]])}}}return e},c.prototype.hasDataByXY=function(a,b,d,e){var f=this.option("typeInfo"),g=this.option("propertyIndex");a=parseInt(a,10),b=parseInt(b,10),d=parseInt(d,10),e=parseInt(e,10);for(var h=this._oSCManager.getY(),i=this._oBubbleTypeManager.getVisibleType(),j=0,k=this._aBubbles.length;k>j;j++)for(var l=this._aBubbles[j],m=0,n=l.count();n>m;m++){var o=l.getData(m),p=l.getAgentName(o);if(this._currentAgent===this._AGENT_ALL||this._currentAgent===p){var q=o[g.x],r=f[o[g.type]][0];if(c.Util.isInRange(a,b,q)&&c.Util.indexOf(i,r)>=0){var s=o[g.y];if(c.Util.isInRange(d,e,s)||e===h.max&&s>e)return!0}}}return!1},c.prototype.getChartAsImage=function(a){return this._oRendererManager.getChartAsImage(a,this._oBubbleTypeManager.getElementLI())},c.prototype.drawWithDataSource=function(a){this._oDataLoadManager=a,this._oDataLoadManager.setTimeManager(this._oSCManager),this._oDataLoadManager.abort(),this._oDataLoadManager.initCallCount(),this._drawWithDataSource(),this.option("realtime")&&this._invokeLoadRealtimeData()},c.prototype._invokeLoadRealtimeData=function(){var a=this;setTimeout(function(){a._drawWithRealtimeDataSource()},this._oDataLoadManager.getRealtimeInterval())},c.prototype._drawWithDataSource=function(){var a=this;this._bPause||this._bRequesting||this._oDataLoadManager.isCompleted()||(this._oDataLoadManager.isFirstRequest()&&this._oMessage.show(this.option("loadingStr")),this._oDataLoadManager.loadData(function(){a._bRequesting=!1},function(b,c,d){var e=a.createDataBlock(b);e.isEmpty()===!1&&a.addBubbleAndMoveAndDraw(e,!1,0),c===!0?setTimeout(function(){a._drawWithDataSource()},d):a._aBubbles&&0!==a._aBubbles.length||a._oMessage.show(a.option("noDataStr"))},function(){a._showServerError(),a._oExternal.onError()},this._oSCManager.getXOfPixel(),this._oSCManager.getYOfPixel()),this._bRequesting=!0)},c.prototype._drawWithRealtimeDataSource=function(){var a=this;this._oDataLoadManager.loadRealtimeData(function(b,c,d,e){a._oMessage.hide(),a._hideServerError(),d?(a.pause(),a.resume(e-a._oSCManager.getGapX(),e)):(a.addBubbleAndMoveAndDraw(a.createDataBlock(b),!0,c),setTimeout(function(){a._bPause===!1&&a._drawWithRealtimeDataSource()},c))},function(){a._showServerError(),a._oExternal.onError(),setTimeout(function(){a._bPause===!1&&a._drawWithRealtimeDataSource()},0)},this._oSCManager.getXOfPixel(),this._oSCManager.getYOfPixel())},c.prototype._hideServerError=function(){this._$elContainer.css({backgroundImage:"none"})},c.prototype._showServerError=function(){this._$elContainer.css({backgroundImage:"url("+this.option("errorImage")+")",backgroundRepeat:"no-repeat",backgroundPosition:"88% 21%",backgroundSize:"30px 30px"})},c.prototype.redraw=function(){this._oRendererManager.clear(),this._oRendererManager.updateXYAxis(),this.redrawBubbles()},c.prototype.abort=function(){this._bPause=!0,this._oDataLoadManager.abort()},c.prototype.pause=function(){this._bPause=!0,this.option("realtime")&&this._oRendererManager.reset()},c.prototype.resume=function(a,b){this._bPause=!1,this.option("realtime")?(this._aBubbles=[],this._oSCManager.setX(a,b,!0),this._oDataLoadManager.reset(),this._oDataLoadManager.setRealtimeFrom(b),this._oRendererManager.updateXYAxis(),this._drawWithDataSource(),this._invokeLoadRealtimeData()):this._drawWithDataSource()},c.prototype.changeRangeOfY=function(a){this._oSCManager.setY(a.min,a.max)},c.prototype.selectAgent=function(a,c){var d=this,e=a===this._AGENT_ALL,f=this.option("typeInfo"),g={};c===!0?(this._oBubbleTypeManager.selectAll(),b.each(f,function(a,b){g[b[0]]=!0})):b.each(f,function(a,b){g[b[0]]=d._oBubbleTypeManager.isChecked(b[0])}),this._currentAgent=a,this._oRendererManager.showSelectedAgent(e,a,g),this._oBubbleTypeManager.showTypeCount(this._getSumCountByType())},c.prototype.getCurrentAgent=function(){return this._currentAgent},a.BigScatterChart2=c}(window,jQuery),function(a,b){"use strict";function c(a,b,c){this._initData(a),this._splitDataByAgent(b,c)}c.prototype._initData=function(a){this._from=a.from,this._to=a.to,this._resultFrom=a.complete?a.from:a.resultFrom,this._resultTo=a.complete?a.to:a.resultTo,this._oAgentMetaInfo=a.scatter.metadata,this._aAllData=a.scatter.dotList,this._bLoadComplete=a.complete,this._oAgentData={},this._oCountOfType={}},c.prototype._splitDataByAgent=function(a,c){var d=this;this._oPropertyIndex=a,this._oTypeInfo=c,b.each(this._oAgentMetaInfo,function(a,e){var f=e[0];d._oAgentData[f]=[],d._oCountOfType[f]={},b.each(c,function(a,b){d._oCountOfType[f][b[0]]=0})});var e=Number.MAX_VALUE,f=0;b.each(this._aAllData,function(b,g){var h=d._getAgentName(g[2]+"");e=Math.min(g[1],e),f=Math.max(g[1],f),g[0]+=d._from,d._oAgentData[h].push(g),d._oCountOfType[h][c[g[a.type]+""][0]]++}),this._minX=this._bLoadComplete?this._from:this._resultFrom,this._maxX=this._bLoadComplete?this._to:this._resultTo,this._minY=e,this._maxY=f},c.prototype._getAgentName=function(a){return this._oAgentMetaInfo[a][0]},c.prototype.getDataByAgent=function(a,b){return this._oAgentData[a][b]},c.prototype.getData=function(a){return this._aAllData[a]},c.prototype.count=function(){return this._aAllData.length},c.prototype.countByAgent=function(a){return this._oAgentData[a]?this._oAgentData[a].length:0},c.prototype.getCount=function(a,b,c,d){return 2===arguments.length?this._oCountOfType[a]?this._oCountOfType[a][b]:0:this._getRealtimeCount(a,b,c,d)},c.prototype._getRealtimeCount=function(a,c,d,e){var f=this,g=0;return b.each(this._aAllData,function(b,h){a===f._getAgentName(h[f._oPropertyIndex.meta]+"")&&c===f._oTypeInfo[h[f._oPropertyIndex.type]+""][0]&&h[f._oPropertyIndex.x]>=d&&h[f._oPropertyIndex.x]<=e&&g++}),g},c.prototype.getTransactionID=function(a){var b=this._oAgentMetaInfo[a[this._oPropertyIndex.meta]+""];return b[1]+"^"+b[2]+"^"+a[this._oPropertyIndex.transactionId]},c.prototype.getAgentName=function(a){var b=this._oAgentMetaInfo[a[this._oPropertyIndex.meta]+""];return b[0]},c.prototype.getX=function(){return{min:this._minX,max:this._maxX}},c.prototype.isEmpty=function(){return 0===this._aAllData.length},a.BigScatterChart2.DataBlock=c}(window,jQuery),function(a,b){"use strict";function c(a,b,c,d){this._option=a,this._oCallback=d,this._oSCManager=b,this._$elContainer=c,this._initVariable(),this._initElement(c),this._initEvent()}var d="jquery-drag-to-select";c.prototype.option=function(a){return this._option[a]},c.prototype._initVariable=function(){},c.prototype._initElement=function(a){var c=this._oSCManager.getPadding(),d=this.option("lineColor"),e=this.option("axisLabelStyle");this._$element=b("<div>").css({top:"0px",left:"0px",width:this._oSCManager.getWidth()+"px",height:this._oSCManager.getHeight()+"px",cursor:"crosshair","z-index":500,position:"absolute","background-color":"rgba(0,0,0,0)"}).addClass("overlay").appendTo(a),this._welXGuideNumber=b("<div>").css({top:this._oSCManager.getHeight()-c.bottom+10+"px",left:"0px",color:d,width:"56px",height:"22px",border:"1px solid #ccc",display:"none",position:"absolute","text-align":"center",background:"#fff","line-height":"22px","margin-left":"-28px","border-radius":"5px"}).css(e).append(b("<span></span>")).append(b("<div>").css({top:"-10px",left:"27px",height:"10px",position:"absolute","border-left":"1px solid red"})).appendTo(this._$element),this._welYGuideNumber=b("<div>").css({top:"0px",left:"0px",color:d,width:"41px",height:"22px",border:"1px solid #ccc",display:"none",position:"absolute","margin-top":"-10px","text-align":"right",background:"#fff","line-height":"22px","padding-right":"3px","border-radius":"5px","vertical-align":"middle"}).css(e).append(b("<span></span>")).append(b("<div>").css({top:"9px",right:"-10px",width:"10px",position:"absolute","border-top":"1px solid red"})).appendTo(this._$element)},c.prototype._initEvent=function(){var a=this,b=!1;this._$element.dragToSelect({className:d,onHide:function(c){var d=a._adjustSelectBoxForChart(c);a._oCallback.onSelect(d,a._parseCoordinatesToXY(d)),a._$elDragArea=c,a._$elDragArea.hide(),a._hideGuideValue(),b=!1},onMove:function(c){return a.option("bUseMouseGuideLine")?void(a._checkMouseXYInChart(c.pageX,c.pageY)?(b||(a._showGuideValue(),b=!0),a._moveGuideValue(c.pageX,c.pageY)):(b=!1,a._hideGuideValue())):!1},onLeave:function(c){b=!1,a._hideGuideValue()}})},c.prototype._checkMouseXYInChart=function(a,b){var c=this._oSCManager.getPadding(),d=this._oSCManager.getBubbleSize(),e=this._$elContainer.offset(),f=e.left+c.left+d,g=e.left+this._$elContainer.width()-c.right-d,h=e.top+c.top+d,i=e.top+this._$elContainer.height()-c.bottom-d;return a>=f&&g>=a&&b>=h&&i>=b},c.prototype.triggerDrag=function(a){var b=this._adjustSelectBoxForChart(a);this._oCallback.onSelect(b,this._parseCoordinatesToXY(b))},c.prototype._adjustSelectBoxForChart=function(a){var b=this._oSCManager.getPadding(),c=this._oSCManager.getBubbleSize(),d=b.top+c,e=b.left+c,f=this._oSCManager.getWidth()-b.right-c,g=this._oSCManager.getHeight()-b.bottom-c,h=parseInt(a.css("left"),10),i=h+a.width(),j=parseInt(a.css("top"),10),k=j+a.height();j=Math.max(j,d),h=Math.max(h,e),i=Math.min(i,f),k=Math.min(k,g);var l={top:j,left:h,width:i-h,height:k-j};return a.animate(l,200),l},c.prototype._parseCoordinatesToXY=function(a){var b=this._oSCManager.getPadding(),c=this._oSCManager.getBubbleSize();return{fromX:this._oSCManager.parseMouseXToXData(a.left-b.left-c),toX:this._oSCManager.parseMouseXToXData(a.left+a.width-b.left-c),fromY:this._oSCManager.parseMouseYToYData(this._oSCManager.getHeight()-(b.bottom+c)-(a.top+a.height)),toY:this._oSCManager.parseMouseYToYData(this._oSCManager.getHeight()-(b.bottom+c)-a.top)}},c.prototype._showGuideValue=function(){this._welXGuideNumber.show(),this._welYGuideNumber.show()},c.prototype._moveGuideValue=function(a,b){var c=this._oSCManager.getPadding(),d=this._oSCManager.getBubbleSize(),e=this._$elContainer.offset(),f=a-e.left,g=b-e.top;this._welXGuideNumber.css("left",f).find("span").text(moment(this._oSCManager.parseMouseXToXData(f-c.left,d)).format("HH:mm:ss")),this._welYGuideNumber.css("top",g).find("span").text(BigScatterChart2.Util.addComma(this._oSCManager.parseMouseYToYData(this._oSCManager.getHeight()-g-c.bottom-d)))},c.prototype._hideGuideValue=function(){this._welXGuideNumber.hide(),this._welYGuideNumber.hide()},c.prototype.hide=function(){this._hideGuideValue(),this._$elContainer.find("."+d).hide()},a.BigScatterChart2.DragManager=c}(window,jQuery),function(a,b){"use strict";function c(a,b,c,d){this._filter=b,this._option=c,this._application=a,this._cbLoaded=d,this._initVar()}c.prototype._initVar=function(){this._callCount=0,this._bLoadCompleted=!1,this._lastLoadTime=-1},c.prototype.option=function(a){return this._option[a]},c.prototype.loadData=function(a,c,d,e,f){var g=this,h=this._oSCManager.getX();this._oAjax=b.ajax({url:this.getUrl(),data:{to:0===this._callCount?h.max:this._lastLoadTime-1,from:h.min,limit:this.option("fetchLimit"),filter:this._filter||"",application:this._application,xGroupUnit:e,yGroupUnit:f},headers:{accept:"application/json"},dataType:"json"}).done(function(a){a.exception?d():(g._callCount+=1,g._bLoadCompleted=a.complete,g._lastLoadTime=a.resultFrom,c(a,!this._bLoadCompleted,g._getIntervalTime()))}).always(function(){a()})},c.prototype.loadRealtimeData=function(a,c,d,e){var f=this,g=this._oSCManager.getX(),h=Date.now(),i=this._nextFrom||g.max,j=this._nextTo||g.max+this.option("realtimeInterval");this._oRealtimeAjax=b.ajax({url:this.getUrl(),data:{to:j,from:i,limit:this.option("fetchLimit"),filter:"",application:this._application,xGroupUnit:d,yGroupUnit:e,backwardDirection:!1},headers:{accept:"application/json"},dataType:"json"}).done(function(b){b.exception?c():(f._nextFrom=b.complete?b.to:b.resultTo,f._nextTo=f._nextFrom+f.option("realtimeInterval"),a(b,f._calcuRealtimeIntervalTime(b.currentServerTime,Date.now()-h),f._isResetRealtime(b.currentServerTime),b.currentServerTime),f._cbLoaded(f._oSCManager.getX(),f._nextFrom,f._nextTo))}).fail(function(){f.loadRealtimeData(a,c,d,e)})},c.prototype._isResetRealtime=function(a){return a-this._nextTo>=this.option("realtimeResetTimeGap")},c.prototype._calcuRealtimeIntervalTime=function(a,b){var c=parseInt(this.option("realtimeInterval"),0);if(b>c)return 0;var d=a-this._nextTo-this.option("realtimeDefaultTimeGap");return 0>d?Math.max(c-b-d,c):Math.max(c-b-d,0)},c.prototype.setRealtimeFrom=function(a){this._nextFrom=a,this._nextTo=a+this.option("realtimeInteraval")},c.prototype._getIntervalTime=function(){return this.option("useIntervalForFetching")?this.option("fetchingInterval"):0},c.prototype.getRealtimeInterval=function(){return this.option("realtimeDefaultTimeGap")},c.prototype.getUrl=function(){return this.option("url")},c.prototype.initCallCount=function(){this._callCount=0},c.prototype.isFirstRequest=function(){return 0===this._callCount},c.prototype.isCompleted=function(){return this._bLoadCompleted},c.prototype.abort=function(){this._oAjax&&this._oAjax.abort(),this._oRealtimeAjax&&this._oRealtimeAjax.abort()},c.prototype.setTimeManager=function(a){this._oSCManager=a},c.prototype.reset=function(){this._bLoadCompleted=!1,this.initCallCount()},a.BigScatterChart2.DataLoadManager=c}(window,jQuery),function(a,b){"use strict";function c(a,b,c,d){this._option=a,this._oSCManager=b,this._aAgentList=c,this._$elWrapper=d,this._initVariable(),this._makeGridCanvas(),this._makeAxisCanvas(),this._drawGridLine(),this._drawAxisLine(),this._drawAxisValue(),this.updateXYAxis(),this._makeDataCanvas()}c.prototype.option=function(a){return this._option[a]},c.prototype._initVariable=function(){this._oElScrollCanvas={},this._oScrollCtx={},this._ticksOfX=this.option("ticksOfX")-1,this._ticksOfY=this.option("ticksOfY")-1,this._aElAxisX=[],this._aElAxisY=[];var a=this.option("checkBoxImage");this._oCheckedBoxImage=new Image,this._oCheckedBoxImage.src=a.checked,this._oUncheckedBoxImage=new Image,this._oUncheckedBoxImage.src=a.unchecked},c.prototype._makeGridCanvas=function(){this._$elGuideCanvas=b("<canvas>").attr({width:this._oSCManager.getWidth(),height:this._oSCManager.getHeight()}).css({top:0,"z-index":0,position:"absolute"}).append(this._getNotSupportMarkup()).appendTo(this._$elWrapper),this._oCtxGrid=this._$elGuideCanvas.get(0).getContext("2d")},c.prototype._makeAxisCanvas=function(){this._$elAxisCanvas=b("<canvas>").attr({width:this._oSCManager.getWidth(),height:this._oSCManager.getHeight()}).css({top:0,"z-index":10,position:"absolute"}).append(this._getNotSupportMarkup()).appendTo(this._$elWrapper),this._oCtxAxis=this._$elAxisCanvas.get(0).getContext("2d")},c.prototype._getNotSupportMarkup=function(){return b("<div>Your browser does not support the canvas element, get a better one!</div>").css({color:"#fff",width:this._oSCManager.getWidth(),height:this._oSCManager.getHeight(),"text-align":"center","background-color":"#8b2e19"})},c.prototype._drawGridLine=function(){var a=this._oSCManager.getWidth(),b=this._oSCManager.getHeight(),c=this._oSCManager.getPadding(),d=this._oSCManager.getBubbleSize(),e=this._oSCManager.getWidthOfChartSpace()/this._ticksOfX,f=this._oSCManager.getHeightOfChartSpace()/this._ticksOfY,g=0,h=0;for(this._setStyle(this._oCtxGrid,this.option("gridAxisStyle")),g=0;g<=this._ticksOfX;g++)h=c.left+d+e*g,this._oCtxGrid.beginPath(),this._moveTo(this._oCtxGrid,h,c.top),this._lineTo(this._oCtxGrid,h,b-c.bottom),this._oCtxGrid.stroke();for(g=0;g<=this._ticksOfY;g++)h=b-(c.bottom+d+f*g),this._oCtxGrid.beginPath(),this._moveTo(this._oCtxGrid,c.left,h),this._lineTo(this._oCtxGrid,a-c.right,h),this._oCtxGrid.stroke()},c.prototype._drawAxisLine=function(){var a=this._oSCManager.getWidth(),b=this._oSCManager.getHeight(),c=this._oSCManager.getPadding(),d=this._oSCManager.getBubbleSize(),e=this.option("lineColor"),f=this.option("gridAxisStyle"),g=this._oSCManager.getWidthOfChartSpace()/this._ticksOfX,h=this._oSCManager.getHeightOfChartSpace()/this._ticksOfY,i=0,j=0;for(this._oCtxAxis.lineWidth=f.lineWidth,this._oCtxAxis.globalAlpha=1,this._oCtxAxis.lineCap="round",this._oCtxAxis.strokeStyle=e,this._oCtxAxis.beginPath(),this._moveTo(this._oCtxAxis,c.left,c.top),this._lineTo(this._oCtxAxis,c.left,b-c.bottom),this._lineTo(this._oCtxAxis,a-c.right,b-c.bottom),this._oCtxAxis.stroke(),i=0;i<=this._ticksOfX;i++)j=c.left+d+g*i,this._oCtxAxis.beginPath(),this._moveTo(this._oCtxAxis,j,b-c.bottom),this._lineTo(this._oCtxAxis,j,b-c.bottom+10),this._oCtxAxis.stroke();for(i=0;i<=this._ticksOfY;i++)j=b-(c.bottom+d+h*i),this._oCtxAxis.beginPath(),this._moveTo(this._oCtxAxis,c.left,j),this._lineTo(this._oCtxAxis,c.left-10,j),this._oCtxAxis.stroke()},c.prototype._setStyle=function(a,c){b.each(c,function(b,c){"lineDash"===b?a.setLineDash(c):a[b]=c})},c.prototype._moveTo=function(a,b,c){b%1===0&&(b+=.5),c%1===0&&(c+=.5),a.moveTo(b,c)},c.prototype._lineTo=function(a,b,c){b%1===0&&(b+=.5),c%1===0&&(c+=.5),a.lineTo(b,c)},c.prototype._drawAxisValue=function(){var a=this._oSCManager.getWidthOfChartSpace()/this._ticksOfX,c=this._oSCManager.getHeightOfChartSpace()/this._ticksOfY,d=this._oSCManager.getWidth(),e=this._oSCManager.getHeight(),f=this._oSCManager.getPadding(),g=this._oSCManager.getBubbleSize(),h=(this.option("sPrefix"),this.option("lineColor")),i=this.option("axisLabelStyle"),j=0;for(this._welCoordinate=b("<div>").css({top:0,width:d,height:e,cursor:"crosshair",
"z-index":10,position:"absolute","background-color":"rgba(0,0,0,0)"}).addClass("coordinate").appendTo(this._$elWrapper),j=0;j<=this._ticksOfX;j++)this._aElAxisX.push(b("<div>").css({top:e-f.bottom+10+"px",left:f.left-a/2+j*a+"px",color:h,width:a+"px",position:"absolute","text-align":"center"}).css(i).text(" "));for(j=0;j<=this._ticksOfY;j++)this._aElAxisY.push(b("<div>").css({top:g+j*c+f.top-10+"px",left:"0px",width:f.left-15+"px",color:h,position:"absolute","text-align":"right","vertical-align":"middle"}).css(i).text(" "));this._welCoordinate.append(this._aElAxisX).append(this._aElAxisY);var k=this.option("labelX");BigScatterChart2.Util.isString(k)&&k.length>0&&b("<div>").text(k).css(i).css({top:e-f.bottom+10+"px",right:0,color:h,position:"absolute","text-align":"center"}).appendTo(this._welCoordinate);var l=this.option("labelY");BigScatterChart2.Util.isString(l)&&l.length>0&&b("<div>").text(l).css(i).css({top:g+f.top+10+"px",left:"0px",color:h,width:f.left-15+"px",position:"absolute","text-align":"right","vertical-align":"middle"}).appendTo(this._welCoordinate)},c.prototype._makeDataCanvas=function(){var a=this,c=this._oSCManager.getBubbleSize(),d=this.option("sPrefix"),e=100,f=this.option("typeInfo"),g=this._oSCManager.getWidthOfChartSpace(),h=this._oSCManager.getHeightOfChartSpace(),i=this._oSCManager.getCanvasWidth();this._$elScroller=b("<div>").css({top:"0px",left:"0px",height:h+2*c+"px",position:"absolute","background-color":"gray"}).addClass("canvas-scroller"),b("<div>").css({top:this._oSCManager.getTopOfChartSpace()+"px",left:this._oSCManager.getLeftOfChartSpace()+c+"px",width:g+"px",height:h+2*c+"px","z-index":e++,overflow:"hidden",position:"absolute"}).addClass("canvas-wrapper").append(this._$elScroller).appendTo(this._$elWrapper),b.each(this._aAgentList,function(g,j){b.each(f,function(f,g){var k=BigScatterChart2.Util.makeKey(j,d,g[0]);a._oElScrollCanvas[k]=[b("<canvas>").attr({width:i,height:h+2*c+"px","data-key":k}).css({top:"0px",left:"0px","z-index":e++,position:"absolute"}).appendTo(a._$elScroller),b("<canvas>").attr({width:i,height:h+2*c+"px","data-key":k}).css({top:"0px",left:i+"px","z-index":e++,position:"absolute"}).appendTo(a._$elScroller)],a._oScrollCtx[k]=[a._oElScrollCanvas[k][0].get(0).getContext("2d"),a._oElScrollCanvas[k][1].get(0).getContext("2d")]})}),this._oScrollIndexOrder=[0,1]},c.prototype.getChartAsImage=function(a,b){return this._mergeAllDisplay(b).get(0).toDataURL("image/"+a.toLowerCase())},c.prototype.updateXYAxis=function(a,c,d,e){var f=this;b.isNumeric(a),b.isNumeric(c),b.isNumeric(d),b.isNumeric(e);var g=this.option("fnXAxisFormat"),h=this._oSCManager.getX(),i=this._oSCManager.getGapX()/this._ticksOfX;b.each(this._aElAxisX,function(a,c){b.isFunction(g)?c.html(g.call(f,i,a,h.min)):c.html((i*a+h.min).round())});var j=this.option("fnYAxisFormat"),k=this._oSCManager.getY(),l=this._oSCManager.getGapY()/this._ticksOfY;b.each(this._aElAxisY,function(a,c){b.isFunction(j)?c.html(j.call(f,l,a,k.min,k.max)):c.html(BigScatterChart2.Util.addComma(k.max+k.min-(l*a+k.min)))})},c.prototype.clear=function(){var a=this._oSCManager.getCanvasWidth(),c=this._oSCManager.getHeight();b.each(this._oScrollCtx,function(d,e){b.each(e,function(b,d){d.clearRect(0,0,a,c)})})},c.prototype.selectType=function(a,c){b.each(this._oElScrollCanvas,function(a,d){b.each(d,function(b,d){BigScatterChart2.Util.endsWith(a,c)?d.show():d.hide()})})},c.prototype.toggle=function(a){b.each(this._oElScrollCanvas,function(c,d){b.each(d,function(b,d){BigScatterChart2.Util.endsWith(c,a)&&d.toggle()})})},c.prototype.showSelectedAgent=function(a,c,d){var e=this;b.each(this._oElScrollCanvas,function(f,g){if(a){var h=e._visible(f.split("-"),d)?"show":"hide";b.each(g,function(a,b){b[h]()})}else b.each(g,function(a,b){BigScatterChart2.Util.startsWith(f,c)?b[e._visible(f.split("-"),d)?"show":"hide"]():b.hide()})})},c.prototype._visible=function(a,b){return b[a[a.length-1]]},c.prototype.drawBubble=function(a,b,c){var d=this.option("propertyIndex"),e=this.option("bubbleRadius"),f=this._oSCManager.getY(),g=(c[d.x]-this._oSCManager.getStartX())*this._oSCManager.getPixelPerTime(),h=this._oSCManager.parseYDataToYChart(BigScatterChart2.Util.getBoundaryValue(f,c[d.y]),!1),i=this._oSCManager.parseZDataToZChart(c.r||e),j=this._oSCManager.getCanvasWidth(),k=this._oScrollIndexOrder[0],l=parseInt(this._oElScrollCanvas[a][k].css("left")),m=l+j;g>m?(k=this._oScrollIndexOrder[1],g-=m):g-=l,this._oScrollCtx[a][k].beginPath(),this._oScrollCtx[a][k].fillStyle=b,this._oScrollCtx[a][k].strokeStyle=b,this._oScrollCtx[a][k].arc(g,h,i,0,2*Math.PI,!0),this._oScrollCtx[a][k].globalAlpha=.3+.1*c[d.groupCount],this._oScrollCtx[a][k].fill()},c.prototype.moveChart=function(a,c){var d=this,e=this._oSCManager.getCanvasWidth(),f=this._oSCManager.getHeight(),g=parseInt(this._$elScroller.css("left"),10)-a;this._$elScroller.animate({left:g},c,function(){var a=d._oScrollIndexOrder[0],c=!1;b.each(d._oElScrollCanvas,function(a,b){Math.abs(g)>parseInt(b[d._oScrollIndexOrder[0]].css("left"))+e&&(c=!0,b[d._oScrollIndexOrder[0]].css("left",parseInt(b[d._oScrollIndexOrder[1]].css("left"))+e),d._oScrollCtx[a][d._oScrollIndexOrder[0]].clearRect(0,0,e,f))}),c&&(d._oScrollIndexOrder[0]=d._oScrollIndexOrder[1],d._oScrollIndexOrder[1]=a)})},c.prototype.reset=function(){var a=this._oSCManager.getCanvasWidth();this._$elScroller.css("left",0),this._oScrollIndexOrder=[0,1],b.each(this._oElScrollCanvas,function(c,d){b.each(d,function(b,c){c.css("left",b*a)})}),this.clear()},c.prototype._mergeAllDisplay=function(a){var c=this,d=this._oSCManager.getPadding(),e=this._oSCManager.getBubbleSize(),f=this._oSCManager.getWidth(),g=this._oSCManager.getHeight(),h=b("<canvas>").attr({width:f,height:g}),i=h.get(0).getContext("2d");i.fillStyle="#FFFFFF",i.fillRect(0,0,f,g),i.drawImage(this._$elGuideCanvas.get(0),0,0),b.each(this._oElScrollCanvas,function(a,c){b.each(c,function(a,b){b.is(":visible")&&i.drawImage(b.get(0),d.left+e,d.top)})}),i.drawImage(this._$elAxisCanvas.get(0),0,0),i.textBaseline="top";var j=this._$elWrapper.offset();return i.textAlign="left",b.each(a,function(a,b){var d=b.offset(),e=d.left-j.left,f=d.top-j.top;i.font=b.css("font"),i.fillStyle=b.css("color"),i.fillText(b.text(),e+parseInt(b.css("padding-left"),10),f),b.hasClass("unchecked")?i.drawImage(c._oUncheckedBoxImage,e,f):i.drawImage(c._oCheckedBoxImage,e,f)}),i.textAlign="center",b.each(this._aElAxisX,function(a,b){i.font=b.css("font"),i.fillStyle=b.css("color"),i.fillText(b.text(),parseInt(b.css("left"),10)+b.get(0).getBoundingClientRect().width/2,parseInt(b.css("top"),10))}),i.textAlign="right",b.each(this._aElAxisY,function(a,b){i.font=b.css("font"),i.fillStyle=b.css("color"),i.fillText(b.text(),parseInt(b.css("left"),10)+b.get(0).getBoundingClientRect().width,parseInt(b.css("top"),10))}),h},a.BigScatterChart2.RendererManager=c}(window,jQuery),function(a,b){"use strict";function c(a,b,c,d){this._option=a,this._oSCManager=b,this._oCallback=d,this._initVar(),this._initElements(c),this._initEvents()}c.prototype.option=function(a){return this._option[a]},c.prototype._initVar=function(){this._oReferenceLI={},this._oReferenceSpan={}},c.prototype._initElements=function(a){var c=this,d=this._oSCManager.getPadding();this._$element=b("<div>").css({top:0,width:this._oSCManager.getWidth()-d.right,height:d.top,cursor:"pointer","z-index":510,position:"absolute","background-color":"rgba(0,0,0,0)"}).addClass("bubble-type"),this._$elTypeUL=b("<ul>").css({top:"5px",margin:"0",padding:"0",position:"absolute","font-size":"12px","list-style":"none"}),b.each(this._sortTypeInfo(),function(a,d){c._$elTypeUL.append(c._oReferenceLI[d[0]]=b("<li>").attr("data-type",d[0]).css({color:d[1],margin:"0 0 0 20px",padding:"0 0 0 19px",display:"inline-block","line-height":"15px","background-image":"url("+c.option("checkBoxImage").checked+")","background-repeat":"no-repeat"}).text(d[0]+" : ").append(c._oReferenceSpan[d[0]]=b("<span>").text("0")))}),this._$element.append(this._$elTypeUL).appendTo(a)},c.prototype._sortTypeInfo=function(){var a=[];b.each(this.option("typeInfo"),function(b,c){a.push(c)});var c=a.map(function(a,b){return{index:b,value:a}});return c.sort(function(a,b){return a.value[2]-b.value[2]}),c.map(function(b){return a[b.index]})},c.prototype._initEvents=function(){var a=this,c=this.option("checkBoxImage");this._$elTypeUL.on("mousedown",function(a){a.stopPropagation()}).on("click","li",function(d){d.preventDefault();var e=b(this),f=e.attr("data-type"),g=e.hasClass("unchecked")===!1;e[g?"addClass":"removeClass"]("unchecked").css({"background-image":"url("+c[g?"unchecked":"checked"]+")"}),a._oCallback.onChange(f),a._oCallback.onSend(f,!g)})},c.prototype.showTypeCount=function(a){var c=this;b.each(a,function(a,b){c._oReferenceSpan[a].text(BigScatterChart2.Util.addComma(b))})},c.prototype.getVisibleType=function(){var a=[];return b.each(this._oReferenceLI,function(b,c){c.hasClass("unchecked")===!1&&a.push(b)}),a},c.prototype.selectType=function(a){var c=this.option("checkBoxImage");b.each(this._oReferenceLI,function(b,d){b===a?d.removeClass("unchecked").css("background-image","url("+c.checked+")"):d.addClass("unchecked").css("background-image","url("+c.unchecked+")")})},c.prototype.selectAll=function(){var a=this.option("checkBoxImage");b.each(this._oReferenceLI,function(b,c){c.removeClass("unchecked").css("background-image","url("+a.checked+")")})},c.prototype.isChecked=function(a){return this._oReferenceLI[a].hasClass("unchecked")===!1},c.prototype.getElementLI=function(){return this._oReferenceLI},a.BigScatterChart2.BubbleTypeManager=c}(window,jQuery),function(a,b){"use strict";function c(a){this._option=a,this._initVar()}c.prototype.option=function(a,b){return 1===arguments.length?this._option[a]:void(this._option[a]=b)},c.prototype._initVar=function(){var a=this.option("padding"),b=this.option("bubbleSize");this._startX=this.option("minX"),this._widthOfChartSpace=this.option("width")-(a.left+a.right)-2*b,this._heightOfChartSpace=this.option("height")-(a.top+a.bottom)-2*b,this._calcuUnitValue()},c.prototype._calcuUnitValue=function(){this._timePerPixel=this.getGapX()/this._widthOfChartSpace,this._pixelPerTime=this._widthOfChartSpace/this.getGapX()},c.prototype.getStartX=function(){return this._startX},c.prototype.getLeftOfChartSpace=function(){return this.option("padding").left},c.prototype.getTopOfChartSpace=function(){return this.option("padding").top},c.prototype.getCanvasWidth=function(){return this._widthOfChartSpace+50},c.prototype.getWidth=function(){return this.option("width")},c.prototype.getHeight=function(){return this.option("height")},c.prototype.getX=function(){return{min:this.option("minX"),max:this.option("maxX")}},c.prototype.setX=function(a,b,c){this.option("minX",a),this.option("maxX",b),c===!0&&(this._startX=a),this._calcuUnitValue()},c.prototype.getY=function(){return{min:this.option("minY"),max:this.option("maxY")}},c.prototype.setY=function(a,b){this.option("minY",a),this.option("maxY",b)},c.prototype.getPadding=function(){return this.option("padding")},c.prototype.getBubbleSize=function(){return this.option("bubbleSize")},c.prototype.getWidthOfChartSpace=function(){return this._widthOfChartSpace},c.prototype.getHeightOfChartSpace=function(){return this._heightOfChartSpace},c.prototype.getPixelPerTime=function(){return this._pixelPerTime},c.prototype.getTimePerPixel=function(){return this._timePerPixel},c.prototype.parseYDataToYChart=function(a,b){return Math.round(this._heightOfChartSpace-(a-this.option("minY"))/this.getGapY()*this._heightOfChartSpace)+this.option("bubbleSize")+(b?this.option("padding").top:0)},c.prototype.parseZDataToZChart=function(a){return Math.round((a-this.option("minZ"))/this.getGapZ()*this.option("bubbleSize"))},c.prototype.getLeftOfPluginArea=function(){return this.option("width")-this.option("padding").right},c.prototype.getXOfPixel=function(){return Math.round(this.getGapX()/this._widthOfChartSpace)},c.prototype.getYOfPixel=function(){return Math.round(this.getGapY()/this._heightOfChartSpace)},c.prototype.parseMouseXToXData=function(a){return Math.round(a/this._widthOfChartSpace*this.getGapX())+this.option("minX")},c.prototype.parseMouseYToYData=function(a){return Math.round(this.option("minY")+a/this._heightOfChartSpace*this.getGapY())},c.prototype.getGapX=function(){return this.option("maxX")-this.option("minX")},c.prototype.getGapY=function(){return this.option("maxY")-this.option("minY")},c.prototype.getGapZ=function(){return this.option("maxZ")-this.option("minZ")},a.BigScatterChart2.SizeCoordinateManager=c}(window,jQuery),function(a,b){"use strict";a.BigScatterChart2.Util={addComma:function(a){for(var b=a+"",c=/(-?[0-9]+)([0-9]{3})/;c.test(b);)b=b.replace(c,"$1,$2");return b},compare:function(a,b,c){for(var d=0,e=1,f=a.length;f>e;e++){var g=a[d][b]-a[e][b];c(g)&&(d=e)}return a[d][b]},min:function(a){return a>0},max:function(a){return 0>a},indexOf:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},getBoundaryValue:function(a,b){return Math.min(a.max,Math.max(a.min,b))},isInRange:function(a,b,c){return c>=a&&b>=c},isEmpty:function(a){var b=0;for(var c in a)b+=a[c].length;return 0===b},makeKey:function(a,b,c){return a+"-"+b+"-"+c},isString:function(a){return"string"==typeof a},endsWith:function(a,b){var c=a.indexOf(b);return-1!==c&&a.length-c===b.length},startsWith:function(a,b){return 0===a.indexOf(b)}}}(window,jQuery),function(a,b){"use strict";function c(a){this._init(a)}c.prototype._init=function(a){this._tooltipService=a,this._aCallback=[]},c.prototype.initElement=function(a,c){var d=this;return this._$element=b("<div>").css({padding:"4px 0px 4px 20px"}).append(b("<span>").addClass("glyphicon glyphicon-question-sign scatterTooltip").css("cursor","pointer")).appendTo(c),setTimeout(function(){d._tooltipService.init("scatter")},0),this},c.prototype.initEvent=function(a){return this},c.prototype.addCallback=function(a){this._aCallback.push(a)},a.BigScatterChart2.HelpPlugin=c}(window,jQuery),function(a,b){"use strict";function c(){this._init()}c.prototype._init=function(){this._aCallback=[]},c.prototype.initElement=function(a,c,d){return this._$element=b("<div>").css({top:0,width:d.width,height:d.height,cursor:"crosshair",display:"none","z-index":1100,position:"absolute","background-color":"rgba(0,0,0,0)"}).addClass("message-display").append(b("<div>").css(d.noDataStyle).css({top:d.height/2+"px",width:d.width+"px",position:"absolute","text-align":"center"})).appendTo(a),this},c.prototype.initEvent=function(){return this},c.prototype.addCallback=function(a){this._aCallback.push(a)},c.prototype.show=function(a){this._$element.find("> div").html(a).end().show()},c.prototype.hide=function(){this._$element.hide()},a.BigScatterChart2.MessagePlugin=c}(window,jQuery),function(a,b){"use strict";function c(a){this._init(a)}c.prototype._init=function(a){this._featureImage=a,this._aCallback=[]},c.prototype.initElement=function(a,c,d){var e=d.width,f=d.height,g=e/2,h=f/2,i=200,j=130,k="setting-min-"+parseInt(1e5*Math.random()),l="setting-max-"+parseInt(1e5*Math.random());this._$elConfigButton=b("<div>").css({padding:"4px 0px 4px 20px",cursor:"pointer"}).append(b("<img>").attr({src:this._featureImage,alt:"Open Config",title:"Open Config"})).appendTo(c);var m=['<div class="config-layer">','<div class="config-bg cancel"></div>','<div class="dropdown-menu config">',"<h5>Setting</h5>",'<label for="" class="label">Min of Y axis</label>','<input type="text" id="" class="input" value=""/>','<label for="" class="label">Max of Y axis</label>','<input type="text" id="" class="input" vlaue=""/>','<button type="button" class="apply btn btn-default btn-xs">Apply</button>','<button type="button" class="cancel btn btn-default btn-xs">Cancel</buton>',"</div>","</div>"].join("");return this._$element=b(m),this._$element.css({width:e+"px",height:f+"px",display:"none",position:"relative"}),this._$element.find(".config-bg").css({width:e+"px",height:f+"px",opacity:.3,"z-index":1100,position:"absolute","background-color":"#000"}),this._$element.find(".dropdown-menu").css({top:h-j/2+"px",left:g-i/2+"px",width:i+"px",height:j+"px",display:"block","z-index":1101}),this._$element.find("label:first").attr("for",k),this._$element.find("label:last").attr("for",l),this._$element.find("input[type=text]:first").attr("id",k).val(d.minY),this._$element.find("input[type=text]:last").attr("id",l).val(d.maxY),a.append(this._$element),this},c.prototype.hide=function(){this._$element.hide()},c.prototype.show=function(){this._$element.show()},c.prototype.initEvent=function(a){var c=this;return this._$elConfigButton.click(function(){c.show()}),this._$element.find(".cancel").click(function(){c.hide()}),this._$element.find(".apply").click(function(d){d.preventDefault();var e=parseInt(c._$element.find("input[type=text]:first").val(),10),f=parseInt(c._$element.find("input[type=text]:last").val(),10);return e>=f?void alert("Min of Y axis is should be smaller than "+f):(b.each(c._aCallback,function(b,c){c(a,{min:e,max:f})}),void c.hide())}),this},c.prototype.addCallback=function(a){return this._aCallback.push(a),this},a.BigScatterChart2.SettingPlugin=c}(window,jQuery),function(a,b){"use strict";function c(a){this._init(a)}c.prototype._init=function(a){this._featureImage=a,this._aCallback=[],this._bDisabled=!1},c.prototype.initElement=function(a,c,d){return this._bDisabled=d.realtime,this._$element=b("<div>").css({cursor:"pointer",padding:"4px 0px 4px 20px"}).append(b("<a>").attr({alt:"Download Scatter Chart",href:"",title:"Download Scatter Chart",download:""}).append(b("<img>").attr({src:this._featureImage}).css({opacity:this._bDisabled?.2:1}))).appendTo(c),this},c.prototype.initEvent=function(a){var c=this;return this._$element.find("a").on("click",function(d){return c._bDisabled?void d.preventDefault():(b(this).attr({href:a.getChartAsImage("png"),download:"Pinpoint_Scatter_Chart["+moment(a.option("minX")).format("YYYYMMDD_HHmm")+"~"+moment(a.option("maxX")).format("YYYYMMDD_HHmm")+"]"}),void b.each(c._aCallback,function(b,c){c(a)}))}),this},c.prototype.addCallback=function(a){return this._aCallback.push(a),this},a.BigScatterChart2.DownloadPlugin=c}(window,jQuery),function(a,b){"use strict";function c(a){this._init(a)}c.prototype._init=function(a){this._featureImage=a,this._aCallback=[],this._bDisabeld=!1},c.prototype.initElement=function(a,c){return this._$element=b("<div>").css({cursor:"pointer",padding:"4px 0px 4px 20px"}).append(b("<img>").attr({src:this._featureImage,alt:"Full Screen Mode",title:"Full Screen Mode"})).appendTo(c),this},c.prototype.initEvent=function(a){var c=this;return this._$element.on("click",function(d){d.preventDefault(),b.each(c._aCallback,function(b,d){d(a,c._$element)})}),this},c.prototype.addCallback=function(a){return this._aCallback.push(a),this},a.BigScatterChart2.WideOpenPlugin=c}(window,jQuery),!function(a,b){"use strict";var c=8,d=function(a){this.options=a,this._init(),this._initOption(),this._initVar(),this._initEvent(),this._renderScrollArea()};d.prototype._init=function(){this.$wrapper=this.options.wrapper,this._threshold=this.options.elementHeight*(c/4)},d.prototype._initOption=function(){this._viewAreaHeight=this.options.viewAreaHeight,this._renderFunc=this.options.renderFunc||function(){},this._source=this.options.source,this._previousTop=0,this._previousTime=-1,this._selectedRow=-1},d.prototype._initVar=function(){this._elementArray=[],this._elementArrayStartIndex=0,this._elementArrayEndIndex=0,this._elementArraySize=0,this._previousTop=0},d.prototype._initEvent=function(){var a=this;this.options.scroller.on("scroll",function(c){a._scrollEventHandler(c,b(this))})},d.prototype._isDefined=function(a){return"undefined"!=typeof a},d.prototype._renderScrollArea=function(){this._isDefined(this._source)&&this._isDefined(this.options.viewAreaHeight)&&this.reset()},d.prototype._calculateElementStartCount=function(){var a=parseInt(this._viewAreaHeight/this.options.elementHeight)+c;this._elementArraySize=a>this._source.length?this._source.length:a,this._elementArrayEndIndex=this._elementArraySize-1,this.$wrapper.height(this._source.length*this.options.elementHeight)},d.prototype._initElementArray=function(){this.$wrapper.empty();for(var a=0;a<this._elementArraySize;a++){var c=b(this.options.template);this._renderElement(c,a),this._elementArray.push(c),this.$wrapper.append(c)}},d.prototype._renderElement=function(a,b){this._renderFunc.call(this,a,b,this._source[b]),a.attr("data-index",b).css("top",b*this.options.elementHeight+"px")},d.prototype._getDataIndex=function(a){return parseInt(this._elementArray[a].attr("data-index"))},d.prototype._getTopByIndex=function(a){return parseInt(this._elementArray[a].css("top"))},d.prototype._getNextArrayIndex=function(a){return a+1>=this._elementArraySize?0:a+1},d.prototype._getPreviousArrayIndex=function(a){return(0>a-1?this._elementArraySize:a)-1},d.prototype._scrollEventHandler=function(a,b){var c=b.scrollTop(),d=(new Date).valueOf();if(c!=this._previousTop){var e=c-this._previousTop>0;e?this._scrollDown(c,this._getTopByIndex(this._elementArrayStartIndex)):this._scrollUp(c,this._getTopByIndex(this._elementArrayEndIndex)),this._previousTop=c,this._previousTime=d}},d.prototype._scrollDown=function(a,b){var c=a-b-this._threshold;if(c>=0){for(var d=this._getDataIndex(this._elementArrayEndIndex),e=this._elementArrayStartIndex,f=parseInt(c/this.options.elementHeight),g=0;f>g;g++){var h=d+g+1;if(h>=this._source.length)break;f-g<=2*this._elementArraySize&&this._renderElement(this._elementArray[e],h),e=this._getNextArrayIndex(e)}this._elementArrayStartIndex=e,this._elementArrayEndIndex=this._getPreviousArrayIndex(e)}},d.prototype._scrollUp=function(a,b){var c=b+this.options.elementHeight-a-this._viewAreaHeight-this._threshold;if(c>=0){for(var d=this._getDataIndex(this._elementArrayStartIndex),e=this._elementArrayEndIndex,f=parseInt(c/this.options.elementHeight),g=0;f>g;g++){var h=d-(g+1);if(0>h)break;f-g<=2*this._elementArraySize&&this._renderElement(this._elementArray[e],h),e=this._getPreviousArrayIndex(e)}this._elementArrayEndIndex=e,this._elementArrayStartIndex=this._getNextArrayIndex(e)}},d.prototype.source=function(){return 1==arguments.length?(this.options.source=arguments[0],this):this._source},d.prototype.viewAreaHeight=function(){return 1==arguments.length?(this.options.viewAreaHeight=arguments[0],this):this._viewAreaHeight},d.prototype.renderFunc=function(){return 1==arguments.length?(this.options.renderFunc=arguments[0],this):this._renderFunc},d.prototype.reset=function(){return this._initOption(),this._initVar(),this._calculateElementStartCount(),this._initElementArray(),this},d.prototype.contentsAreaHeight=function(){return this.options.elementHeight*this._source.length},d.prototype.destroy=function(){this.options.scroller.off("scroll")},d.prototype.resize=function(a){if(this._isDefined(this._source)!==!1){var b=parseInt(this.options.scroller.scrollTop()/this.options.elementHeight);this.reset(),this.moveByRow(b)}},d.prototype.moveByRow=function(a){var b=this;setTimeout(function(){b.options.scroller.scrollTop(a*b.options.elementHeight)},0)},d.prototype.searchRow=function(a,b,c){var d=-1;b=-1==b?this._source.length:b;for(var e=a;b>e;e++)if(c(this._source[e])){d=e;break}return d},d.prototype.selectedRow=function(a,b){return 0==arguments.length?this._selectedRow:(b.call(this,a),this._selectedRow=a,this)},a.InfiniteCircularScroll=d}(window,jQuery),!function(a,b,c,d){"use strict";a.ServerMap=c.Class({$init:function(a,b,c){this.analyticsService=c,this._query="",this.option({sContainerId:"",sOverviewId:"",sBigFont:"11pt avn85,NanumGothic,ng,dotum,AppleGothic,sans-serif",sSmallFont:"10pt avn55,NanumGothic,ng,dotum,AppleGothic,sans-serif",sImageDir:"./images/",sBoldKey:null,htIcons:{APACHE:"APACHE.png",APACHE_GROUP:"APACHE.png",ARCUS:"ARCUS.png",ARCUS_GROUP:"ARCUS.png",BACKEND:"BACKEND.png",BACKEND_GROUP:"BACKEND.png",BLOC:"BLOC.png",BLOC_GROUP:"BLOC.png",CASSANDRA:"CASSANDRA.png",CASSANDRA_GROUP:"CASSANDRA.png",CUBRID:"CUBRID.png",CUBRID_GROUP:"CUBRID.png",JAVA:"JAVA.png",JAVA_GROUP:"JAVA.png",MEMCACHED:"MEMCACHED.png",MEMCACHED_GROUP:"MEMCACHED.png",MONGODB:"MONGODB.png",MONGODB_GROUP:"MONGODB.png",MSSQLSERVER:"MSSQLSERVER.png",MSSQLSERVER_GROUP:"MSSQLSERVER.png",MYSQL:"MYSQL.png",MYSQL_GROUP:"MYSQL.png",MARIADB:"MARIADB.png",MARIADB_GROUP:"MARIADB.png",POSTGRESQL:"POSTGRESQL.png",POSTGRESQL_GROUP:"POSTGRESQL.png",NBASE:"NBASE.png",NBASE_GROUP:"NBASE.png",NGINX:"NGINX.png",NGINX_GROUP:"NGINX.png",ORACLE:"ORACLE.png",ORACLE_GROUP:"ORACLE.png",QUEUE:"QUEUE.png",QUEUE_GROUP:"QUEUE.png",STAND_ALONE:"STAND_ALONE.png",STAND_ALONE_GROUP:"STAND_ALONE.png",SPRING_BOOT:"SPRING_BOOT.png",TOMCAT:"TOMCAT.png",TOMCAT_GROUP:"TOMCAT.png",DUBBO_CONSUMER:"DUBBO.png",DUBBO_CONSUMER_GROUP:"DUBBO.png",DUBBO_PROVIDER:"DUBBO.png",DUBBO_PROVIDER_GROUP:"DUBBO.png",JETTY:"JETTY.png",JETTY_GROUP:"JETTY.png",UNDEFINED:"UNDEFINED.png",UNDEFINED_GROUP:"UNDEFINED.png",UNKNOWN:"UNKNOWN.png",UNKNOWN_GROUP:"UNKNOWN_GROUP.png",REDIS:"REDIS.png",REDIS_GROUP:"REDIS.png",NBASE_ARC:"NBASE_ARC.png",NBASE_ARC_GROUP:"NBASE_ARC.png",NBASE_T:"NBASE_T.png",NBASE_T_GROUP:"NBASE_T.png",USER:"USER.png",USER_GROUP:"USER.png"},htNodeTheme:{"default":{backgroundColor:"#ffffff",borderColor:"#C5C5C5",borderWidth:1,fontColor:"#000000"},bold:{backgroundColor:"#f2f2f2",borderColor:"#666975",borderWidth:2,fontColor:"#000000"}},htLinkType:{sRouting:"AvoidsNodes",sCurve:"JumpGap"},htLinkTheme:{"default":{backgroundColor:"#ffffff",borderColor:"#c5c5c5",fontFamily:"11pt avn55,NanumGothic,ng,dotum,AppleGothic,sans-serif",fontColor:"#000000",fontAlign:"center",margin:1,strokeWidth:1},bad:{backgroundColor:"#ffc9c9",borderColor:"#7d7d7d",fontFamily:"11pt avn55,NanumGothic,ng,dotum,AppleGothic,sans-serif",fontColor:"#FF1300",fontAlign:"center",margin:1,strokeWidth:1}},htHighlightNode:{borderColor:"#53069B",backgroundColor:"#289E1D",fontColor:"#53069B"},htHighlightLink:{fontFamily:"bold 12pt avn55,NanumGothic,ng,dotum,AppleGothic,sans-serif",borderColor:"#53069B",strokeWidth:2},htPadding:{top:10,right:10,bottom:10,left:10},unknownGroupName:"UNKNOWN_GROUP",fOnNodeSubGroupClicked:function(a,b){},fOnNodeClicked:function(a,b){},fOnNodeDoubleClicked:function(a,b,c){},fOnNodeContextClicked:function(a,b){},fOnLinkClicked:function(a,b){},fOnLinkContextClicked:function(a,b){},fOnBackgroundClicked:function(a,b){},fOnBackgroundDoubleClicked:function(a,b){},fOnBackgroundContextClicked:function(a,b){}}),this.option(a),this._initVariables(),this._initNodeTemplates(),this._initLinkTemplates(),this._initDiagramEnvironment(),this._initOverview(b)},_initVariables:function(){this.$=b.GraphObject.make,this.nodeClickEventOnce=!1,this._oDiagram=this.$(b.Diagram,this.option("sContainerId"),{initialContentAlignment:b.Spot.Center,maxSelectionCount:1,allowDelete:!1}),this._oDiagram.animationManager.isEnabled=!1,this._oDiagram.scrollMode=b.Diagram.InfiniteScroll},_initNodeTemplates:function(){var a=this,c=this.option("sImageDir"),e=this.option("htIcons"),f=a.$(b.Panel,b.Panel.TableRow,{},a.$(b.TextBlock,{margin:new b.Margin(0,2),column:1,stroke:"#848484",font:a.option("sSmallFont")},new b.Binding("text","k")),a.$(b.TextBlock,{margin:new b.Margin(0,2),column:2,stroke:"#848484",font:a.option("sSmallFont")},new b.Binding("text","v"))),g=function(a,b){var c=0;if(0===b)return 0;var d=100*b/a;return c=d<g.minPercentage?parseInt(g.maxSize*g.minPercentage/100):parseInt(g.maxSize*d/100)};g.maxSize=360,g.minPercentage=5;var h=function(d){return a.$(b.Node,new b.Binding("category","serviceType"),b.Panel.Auto,{selectionAdorned:!1,cursor:"pointer",name:"NODE",click:function(b,c){a._onNodeClicked(b,c)},doubleClick:function(b,c){a._onNodeDoubleClicked(b,c)},contextClick:a._onNodeContextClicked.bind(a)},a.$(b.Shape,{alignment:b.Spot.TopLeft,alignmentFocus:b.Spot.TopLeft,figure:"RoundedRectangle",strokeWidth:1,margin:0,isPanelMain:!0,minSize:new b.Size(120,NaN),name:"NODE_SHAPE",portId:""},new b.Binding("strokeWidth","key",function(b){var c="default";return a.option("sBoldKey")&&a.option("sBoldKey")===b&&(c="bold"),a.option("htNodeTheme")[c].borderWidth}),new b.Binding("stroke","key",function(b){var c="default";return a.option("sBoldKey")&&a.option("sBoldKey")===b&&(c="bold"),a.option("htNodeTheme")[c].borderColor}),new b.Binding("fill","key",function(b){var c="default";return a.option("sBoldKey")&&a.option("sBoldKey")===b&&(c="bold"),a.option("htNodeTheme")[c].backgroundColor}),new b.Binding("key","key")),a.$(b.Shape,{stroke:"red",strokeWidth:4,opacity:.8,margin:new b.Margin(-28,0,0,0),visible:!0},new b.Binding("visible","isWas"),new b.Binding("geometry","histogram",function(a){return b.Geometry.parse("M30 0 B270 360 30 30 30 30")})),a.$(b.Shape,{stroke:"orange",strokeWidth:4,margin:new b.Margin(-28,0,0,0),visible:!0},new b.Binding("visible","isWas"),new b.Binding("geometry","histogram",function(a){if(0===a.Slow)return b.Geometry.parse("M30 0");var c=0;return jQuery.each(a,function(a,b){c+=b}),b.Geometry.parse("M30 0 B270 "+(g.maxSize-g(c,a.Error))+" 30 30 30 30")})),a.$(b.Shape,{stroke:a.$(b.Brush,b.Brush.Linear,{"0.0":"lightgreen","1.0":"green"}),strokeWidth:4,margin:new b.Margin(-28,0,0,0),visible:!0},new b.Binding("visible","isWas"),new b.Binding("geometry","histogram",function(a){var c=0;jQuery.each(a,function(a,b){c+=b});var d=g.maxSize-g(c,a.Slow)-g(c,a.Error);return d>=180?b.Geometry.parse("M30 0 B270 "+d+" 30 30 30 30"):b.Geometry.parse("M30 -60 B270 "+d+" 30 -30 30 30")})),a.$(b.Panel,b.Panel.Spot,{name:"NODE_PANEL",alignment:b.Spot.TopLeft,alignmentFocus:b.Spot.TopLeft},a.$(b.Panel,b.Panel.Vertical,{alignment:b.Spot.TopLeft,alignmentFocus:b.Spot.TopLeft,minSize:new b.Size(120,NaN)},a.$(b.Picture,{source:c+d,margin:new b.Margin(18,0,5,0),desiredSize:new b.Size(80,40),imageStretch:b.GraphObject.Uniform}),a.$(b.TextBlock,new b.Binding("text","applicationName").makeTwoWay(),{alignment:b.Spot.BottomCenter,alignmentFocus:b.Spot.BottomCenter,name:"NODE_TEXT",margin:6,font:a.option("sBigFont"),editable:!1}),a.$(b.Panel,b.Panel.Table,{padding:2,minSize:new b.Size(100,10),defaultStretch:b.GraphObject.Horizontal,itemTemplate:f},new b.Binding("itemArray","infoTable"))),a.$(b.Panel,b.Panel.Horizontal,{alignment:b.Spot.TopLeft,alignmentFocus:b.Spot.TopLeft,margin:0},a.$(b.Picture,{source:c+"ERROR.png",desiredSize:new b.Size(20,20),imageStretch:b.GraphObject.Uniform,margin:new b.Margin(1,5,0,1)},new b.Binding("visible","hasAlert")),a.$(b.Picture,{source:c+"FILTER.png",desiredSize:new b.Size(17,17),visible:!1,imageStretch:b.GraphObject.Uniform},new b.Binding("visible","isFiltered"))),a.$(b.Panel,b.Panel.Auto,{alignment:b.Spot.TopRight,alignmentFocus:b.Spot.TopRight,visible:!1},new b.Binding("visible","instanceCount",function(a){return a>1}),a.$(b.Shape,{figure:"RoundedRectangle",fill:"#848484",strokeWidth:1,stroke:"#848484"}),a.$(b.Panel,b.Panel.Auto,{margin:new b.Margin(0,3,0,3)},a.$(b.TextBlock,new b.Binding("text","instanceCount"),{stroke:"#FFFFFF",textAlign:"center",height:16,font:a.option("sSmallFont"),editable:!1})))))},i=a.$(b.Panel,b.Panel.TableRow,a.$(b.Picture,{source:c+"ERROR.png",margin:new b.Margin(1,2),desiredSize:new b.Size(10,10),visible:!1,column:1,imageStretch:b.GraphObject.Uniform},new b.Binding("visible","hasAlert")),a.$(b.TextBlock,{name:"NODE_INDEX",visible:!1,text:"0"},new b.Binding("text","idx")),a.$(b.TextBlock,{name:"NODE_APPLICATION_NAME",margin:new b.Margin(1,2),column:2,font:a.option("sSmallFont"),alignment:b.Spot.Left,click:function(b,c){if(b.bubbles=!1,c.part.data.isCollapse)a._onNodeClicked(b,c,c.part.data.unknownNodeGroup[b.targetObject.row].key);else{var d=c.part.data.subGroup[parseInt(b.targetObject.panel.findObject("NODE_INDEX").text)];a._onNodeSubGroupClicked(b,c,d.groups[b.targetObject.row].key,d.applicationName)}return!1}},new b.Binding("text","applicationName")),a.$(b.TextBlock,{margin:new b.Margin(1,2),column:3,alignment:b.Spot.Right,font:a.option("sSmallFont")},new b.Binding("text","totalCount",function(a){
return Number(a,10).toLocaleString()}))),j=a.$(b.Panel,b.Panel.Vertical,a.$(b.TextBlock,{name:"NODE_SUB_APPLICATION_NAME",margin:new b.Margin(2,2),font:"bold 16px avn55,NanumGothic,ng,dotum,AppleGothic,sans-serif"},new b.Binding("text","applicationName")),a.$(b.Panel,b.Panel.Table,{padding:4,minSize:new b.Size(100,10),defaultStretch:b.GraphObject.Horizontal,itemTemplate:i,name:"NODE_SUB_TABLE"},new b.Binding("itemArray","groups")),a.$(b.Shape,{figure:"RoundedRectangle",margin:new b.Margin(6,2,6,2),height:1,width:200,strokeWidth:1,stroke:"#F5A623",fill:"#F5A623",visible:!0},new b.Binding("visible","isLast",function(a){return!a}))),k=function(d){return a.$(b.Node,b.Panel.Auto,{selectionAdorned:!1,cursor:"pointer",name:"NODE",click:function(b,c){b.bubbles&&a._onNodeClicked(b,c)},doubleClick:function(b,c){a._onNodeDoubleClicked(b,c)},contextClick:a._onNodeContextClicked.bind(a)},a.$(b.Shape,{figure:"RoundedRectangle",isPanelMain:!0,minSize:new b.Size(100,100),name:"NODE_SHAPE",portId:"",strokeWidth:a.option("htNodeTheme")["default"].borderWidth,stroke:a.option("htNodeTheme")["default"].borderColor,fill:a.option("htNodeTheme")["default"].backgroundColor},new b.Binding("key","key")),a.$("Button",{alignment:b.Spot.TopLeft,width:20,height:20,margin:2,visible:!1,click:function(b,c){a.analyticsService.send(a.analyticsService.CONST.MAIN,a.analyticsService.CONST.TG_NODE_VIEW),b.bubbles=!1;var d=c.part.data.isCollapse;a._oDiagram.model.setDataProperty(c.part.data,"isCollapse",!d),c.part.findObject("GROUP_BUTTON").text=d?" - ":" + "}},new b.Binding("visible","isMultiGroup"),a.$(b.TextBlock,{name:"GROUP_BUTTON",text:" + ",textAlign:"center",font:"bold 14px serif"})),a.$(b.Panel,b.Panel.Spot,a.$(b.Panel,b.Panel.Vertical,{alignment:b.Spot.TopLeft,alignmentFocus:b.Spot.TopLeft,minSize:new b.Size(130,NaN)},a.$(b.Picture,{source:c+d,margin:new b.Margin(0,0,5,0),desiredSize:new b.Size(100,40),imageStretch:b.GraphObject.Uniform}),a.$(b.Panel,b.Panel.Table,{padding:2,minSize:new b.Size(100,10),defaultStretch:b.GraphObject.Horizontal,itemTemplate:i,name:"NODE_TEXT",visible:!0},new b.Binding("itemArray","unknownNodeGroup"),new b.Binding("visible","isCollapse")),a.$(b.Panel,b.Panel.Vertical,{padding:2,minSize:new b.Size(100,10),defaultStretch:b.GraphObject.Horizontal,itemTemplate:j,name:"NODE_SUB_TEXT",visible:!0},new b.Binding("itemArray","subGroup"),new b.Binding("visible","isCollapse",function(a){return!a})))),a.$(b.Panel,b.Panel.Auto,{alignment:b.Spot.TopRight,alignmentFocus:b.Spot.TopRight,visible:!1},new b.Binding("visible","instanceCount",function(a){return a>1}),a.$(b.Shape,{figure:"RoundedRectangle",fill:"#848484",strokeWidth:1,stroke:"#848484"}),a.$(b.Panel,b.Panel.Auto,{margin:new b.Margin(0,3,0,3)},a.$(b.TextBlock,new b.Binding("text","instanceCount"),{stroke:"#FFFFFF",textAlign:"center",height:16,font:a.option("sSmallFont"),editable:!1}))))};d.each(e,function(a,b){-1!=b.indexOf("_GROUP")?this._oDiagram.nodeTemplateMap.add(b,k(a)):this._oDiagram.nodeTemplateMap.add(b,h(a))},this)},_initLinkTemplates:function(){var a=this,c=(this.option("htLinkType"),{selectionAdorned:!1,contextClick:this._onLinkContextClicked.bind(this),layerName:"Foreground",reshapable:!1,corner:10,cursor:"pointer"}),e=this.option("htLinkTheme"),f=this.option("sImageDir"),g=e["default"],h=e.bad,i=function(d){return a.$(b.Link,c,new b.Binding("routing","routing",function(a){return b.Link[a]}),new b.Binding("curve","curve",function(a){return b.Link[a]}),new b.Binding("curviness","curviness"),a.$(b.Shape,{name:"LINK",isPanelMain:!0,stroke:d.borderColor,strokeWidth:1.5}),a.$(b.Shape,{name:"ARROW",toArrow:"standard",fill:d.borderColor,stroke:null,scale:1.5}),a.$(b.Panel,b.Panel.Auto,a.$(b.Shape,"RoundedRectangle",{name:"LINK2",fill:"#ffffff",stroke:"#ffffff",portId:"",fromLinkable:!0,toLinkable:!0}),a.$(b.Panel,b.Panel.Horizontal,{margin:4},a.$(b.Picture,{source:f+"FILTER.png",width:14,height:14,margin:1,visible:!1,imageStretch:b.GraphObject.Uniform},new b.Binding("visible","isFiltered")),a.$(b.TextBlock,{name:"LINK_TEXT",textAlign:d.fontAlign,font:d.fontFamily,margin:d.margin},new b.Binding("text","totalCount",function(a){return Number(a,10).toLocaleString()}),new b.Binding("stroke","hasAlert",function(a){return a?h.fontColor:g.fontColor})))))};this._oDiagram.linkTemplate=i(g),d.each(e,function(a,b){"default"!==b&&this._oDiagram.linkTemplateMap.add(b,i(a))},this)},_initDiagramEnvironment:function(){var a=this.option("htPadding");this._oDiagram.toolManager.mouseWheelBehavior=b.ToolManager.WheelZoom,this._oDiagram.allowDrop=!1,this._oDiagram.initialAutoScale=b.Diagram.Uniform,this._oDiagram.toolManager.draggingTool.doCancel(),this._oDiagram.toolManager.draggingTool.doDeactivate(),this._oDiagram.toolManager.dragSelectingTool.isEnabled=!1,this._oDiagram.initialContentAlignment=b.Spot.Center,this._oDiagram.padding=new b.Margin(a.top,a.right,a.bottom,a.left),this._oDiagram.layout=this.$(b.LayeredDigraphLayout,{isOngoing:!1,layerSpacing:100,columnSpacing:30,setsPortSpots:!1});var c=this;this._oDiagram.addDiagramListener("ChangedSelection",function(a){var d=c._oDiagram.selection.first();d&&(d instanceof b.Node?c.nodeClickEventOnce||(c._onNodeClicked(a,d),c.nodeClickEventOnce=!0):d instanceof b.Link&&c._onLinkClicked(a,d)),c._updateHightlights()}),this._oDiagram.addDiagramListener("BackgroundSingleClicked",function(a){var b=c.option("fOnBackgroundClicked");angular.isFunction(b)&&b.call(c,a)}),this._oDiagram.addDiagramListener("BackgroundDoubleClicked",function(a){var b=c.option("fOnBackgroundDoubleClicked");angular.isFunction(b)&&b.call(c,a)}),this._oDiagram.addDiagramListener("BackgroundContextClicked",function(a){var b=c.option("fOnBackgroundContextClicked");angular.isFunction(b)&&b.call(c,a)})},_initOverview:function(a){/^\/main/.test(a.path())?(this._oOverview=this.$(b.Overview,this.option("sOverviewId"),{observed:this._oDiagram}),this._oOverview.box.elt(0).figure="RoundedRectangle",this._oOverview.box.elt(0).stroke="#53069B",this._oOverview.box.elt(0).strokeWidth=4):c("#"+this.option("sOverviewId")).hide()},load:function(a){this.nodeClickEventOnce=!1,this._sLastModelData=a,this._oDiagram.model=b.Model.fromJson(a),this._oDiagram.undoManager.isEnabled=!0},clear:function(){this._oDiagram.model=b.Model.fromJson({})},_resetHighlights:function(){for(var a=this._oDiagram.nodes,b=this._oDiagram.links;a.next();)a.value.highlight=!1;for(;b.next();)b.value.highlight=!1},_updateHightlights:function(a){if(a=a||this._oDiagram.selection.first(),null!==a){this._resetHighlights(),a.highlight="self",a instanceof b.Node?(this._linksTo(a,"from"),this._linksFrom(a,"to")):a instanceof b.Link&&(this._nodesTo(a,"from"),this._nodesFrom(a,"to"));for(var c=this._oDiagram.nodes,d=this._oDiagram.links;c.next();)this._highlightNode(c.value.findObject("NODE_SHAPE"),c.value.findObject("NODE_TEXT"),c.value.highlight);for(;d.next();)this._highlightLink(d.value.findObject("LINK"),d.value.highlight),this._highlightLink(d.value.findObject("ARROW"),d.value.highlight,!0),this._highlightLinkText(d.value.findObject("LINK_TEXT"),d.value.highlight)}},highlightNodeByKey:function(a){var b=this._oDiagram.findNodeForKey(a);if(b){var c=this._oDiagram.findPartForKey(a);this._oDiagram.select(c),this._updateHightlights(b)}},highlightLinkByFromTo:function(a,b){var c=this._getLinkObjectByFromTo(a,b);c&&(this._oDiagram.select(this._oDiagram.findPartForData(c)),this._updateHightlights(this._oDiagram.findLinkForData(c)))},_getLinkObjectByFromTo:function(a,b){for(var c=this._oDiagram.model.linkDataArray,d=0,e=c.length;e>d;d+=1){var f=c[d];if(f.from===a&&f.to===b)return f}return!1},_highlightNode:function(a,b,c){if(null!==a&&null!==b){var d=0;if(c){a.stroke=this.option("htHighlightNode").borderColor,a.strokeWidth=2,a.part.isShadowed=!0;var e=new RegExp(this._query,"i"),f=this.option("htHighlightNode").fontColor,g=this.option("htNodeTheme")["default"].fontColor;if(""!==this._query)if(angular.isDefined(b.rowCount)){for(d=0;d<b.rowCount;d++){var h=b.elt(d).elt(2);h.stroke=e.test(h.text)?f:g}var i=b.panel.findObject("NODE_SUB_TEXT"),j=i.elements.count;for(d=0;j>d;d++)for(var k=i.elt(d).elt(1),l=0;l<k.elements.count;l++){var m=k.elt(l).elt(2);m.stroke=e.test(m.text)?f:g}}else b.stroke=e.test(b.text)?f:g}else{var n=a.key===this.option("sBoldKey")?"bold":"default";if(a.stroke=this.option("htNodeTheme")[n].borderColor,a.strokeWidth=1,a.part.isShadowed=!1,angular.isDefined(b.rowCount))for(d=0;d<b.rowCount;d++)b.elt(d).elt(2).stroke=this.option("htNodeTheme")[n].fontColor;else b.stroke=this.option("htNodeTheme")[n].fontColor}}},_highlightLink:function(a,b,c){if(null!==a){var d;b?(d=this.option("htHighlightLink").borderColor,a.strokeWidth=this.option("htHighlightLink").strokeWidth):(d=this.option("htLinkTheme")["default"].borderColor,a.strokeWidth=this.option("htLinkTheme")["default"].strokeWidth),c?a.fill=d:a.stroke=d}},_highlightLinkText:function(a,b){b?a.font=this.option("htHighlightLink").fontFamily:a.font=this.option("htLinkTheme")["default"].fontFamily},_linksTo:function(a,c){if(a instanceof b.Node)for(var d=a.findLinksInto();d.next();)d.value.highlight=c},_linksFrom:function(a,c){if(a instanceof b.Node)for(var d=a.findLinksOutOf();d.next();)d.value.highlight=c},_nodesTo:function(a,c){var d=new b.List("string");if(a instanceof b.Link)a.fromNode.highlight=c,d.add(a.data.from);else for(var e=a.findNodesInto();e.next();)e.value.highlight=c,d.add(e.value.data.key);return d},_nodesFrom:function(a,c){var d=new b.List("string");if(a instanceof b.Link)a.toNode.highlight=c,d.add(a.data.to);else for(var e=a.findNodesOutOf();e.next();)e.value.highlight=c,d.add(e.value.data.key);return d},_onNodeSubGroupClicked:function(a,b,c,d){var e=b.part,f=this.option("fOnNodeSubGroupClicked");angular.isFunction(f)&&(this.analyticsService.send(this.analyticsService.CONST.MAIN,this.analyticsService.CONST.CLK_NODE),f.call(this,a,e,c,d))},_onNodeClicked:function(a,b,c,d){var e=b.part,f=e.data,g=this.option("fOnNodeClicked");angular.isFunction(g)&&(a.clickCount>0&&this.analyticsService.send(this.analyticsService.CONST.MAIN,this.analyticsService.CONST.CLK_NODE),g.call(this,a,f,c,d))},_onNodeDoubleClicked:function(a,b){var c=b.part,d=c.data,e=this.option("fOnNodeDoubleClicked");angular.isFunction(e)&&e.call(this,a,c,d)},_onNodeContextClicked:function(a,b){var c=b.part,d=c.data,e=this.option("fOnNodeContextClicked");angular.isFunction(e)&&e.call(this,a,d)},_onLinkClicked:function(a,b){var c=b.part,d=c.data,e=this.option("fOnLinkClicked");angular.isFunction(e)&&(this.analyticsService.send(this.analyticsService.CONST.MAIN,this.analyticsService.CONST.CLK_LINK),d.fromNode=b.fromNode.part.data,d.toNode=b.toNode.part.data,e.call(this,a,d))},_onLinkContextClicked:function(a,b){var c=b.part,d=c.data,e=this.option("fOnLinkContextClicked");angular.isFunction(e)&&(d.fromNode=b.fromNode.part.data,d.toNode=b.toNode.part.data,e.call(this,a,d))},refresh:function(){this.load(this._sLastModelData)},zoomToFit:function(){this._oDiagram.zoomToFit(),this._oDiagram.contentAlignment=b.Spot.Center,this._oDiagram.contentAlignment=b.Spot.None},clearQuery:function(){this._query=""},searchNode:function(a,b){this._query=a;for(var c=this._oDiagram.nodes,d=0,e=[],f=[],g=new RegExp(a,"i");c.next();){var h=c.value;if(h.data.unknownNodeGroup)for(var i=h.data.unknownNodeGroup,j=0;j<i.length;j++)g.test(i[j].applicationName)&&this._addNodeToTemporaryList(e,f,h,i[j],this.option("unknownGroupName"));else angular.isUndefined(h.data.applicationName)||g.test(h.data.applicationName)&&this._addNodeToTemporaryList(e,f,h,h.data)}return this._selectAndHighlight(e[d]),angular.isUndefined(b)?f:void 0},_addNodeToTemporaryList:function(a,b,c,d,e){a.push(c),b.push({applicationName:d.applicationName,serviceType:e||d.serviceType})},_selectAndHighlight:function(a){this._oDiagram.clearSelection(),this._oDiagram.select(a),this._oDiagram.centerRect(a.actualBounds),this._onNodeClicked(null,a,null,this._query)}})}(window,go,jQuery,_);
//# sourceMappingURL=pinpoint-component.min.js.map