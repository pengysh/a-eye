/*! pinpoint - v1.5.2 */
!function(){"use strict";angular.module("pinpointApp").filter("iconUrl",function(){return function(a){var b="/images/icons/";if(angular.isString(a)){switch(a){case"UNKNOWN_GROUP":b+="UNKNOWN.png";break;default:b+=a+".png"}return b}return""}})}(),function(){"use strict";angular.module("pinpointApp").filter("applicationNameToClassName",function(){return function(a){return a.replace(/[\.\^:]/gi,"_")}})}(),function(){"use strict";pinpointApp.factory("TimeSliderVoService",function(){return function(){this._nFrom=!1,this._nTo=!1,this._nInnerFrom=!1,this._nInnerTo=!1,this._nCount=!1,this._nTotal=!1,this.setFrom=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setFrom, It should be number. "+a);if(angular.isNumber(this._nTo)&&a>=this._nTo)throw"timeSliderVoService:setFrom, It should be smaller than To value.";return this._nFrom=a,this}.bind(this),this.getFrom=function(){return this._nFrom}.bind(this),this.setTo=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setTo It should be number. "+a);if(angular.isNumber(a)&&this._nFrom>=a)throw"timeSliderVoService:setTo, It should be bigger than From value.";return this._nTo=a,this}.bind(this),this.getTo=function(){return this._nTo}.bind(this),this.setInnerFrom=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVo:setInnerFrom It should be number. "+a);if(angular.isNumber(this._nInnerTo)&&a>=this._nInnerTo)throw"timeSliderVo:setInnerFrom, It should be smaller than InnerTo value.";return this._nInnerFrom=a,this}.bind(this),this.getInnerFrom=function(){return this._nInnerFrom}.bind(this),this.setInnerTo=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setInnerTo It should be number. "+a);if(angular.isNumber(this._nInnerFrom)&&this._nInnerFrom>=a)throw"timeSliderVoService:setInnerTo, It should be bigger than InnerFrom value.";return this._nInnerTo=a,this}.bind(this),this.getInnerTo=function(){return this._nInnerTo}.bind(this),this.setCount=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setCount It should be number. "+a);if(angular.isNumber(this._nTotal)&&a>this._nTotal)throw"timeSliderVoService:setCount, It should be smaller than Total value.";return this._nCount=a,this}.bind(this),this.addCount=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setCount It should be number. "+a);if(angular.isNumber(this._nTotal)&&a+this._nCount>this._nTotal)throw"timeSliderVoService:setCount, It should be smaller than Total value.";return this._nCount+=a,this}.bind(this),this.getCount=function(){return this._nCount}.bind(this),this.setTotal=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setTotal It should be number. "+a);if(angular.isNumber(this._nCount)&&this._nCount>a)throw"timeSliderVoService:setTotal, It should be bigger than Count value.";return this._nTotal=a,this}.bind(this),this.getTotal=function(){return this._nTotal}.bind(this),this.getReady=function(){return this._nFrom&&this._nTo&&this._nInnerFrom&&this._nInnerTo}.bind(this)}})}(),function(){"use strict";pinpointApp.factory("AlertsService",["$timeout",function(a){return function(b){this.$parent=b||null,this.setParent=function(a){return this.$parent=a,this}.bind(this),this.getParent=function(){return this.$parent}.bind(this),this.showError=function(b){a(function(){this.getElement(".error").show(),"string"==typeof b?this.getElement(".error .msg").text(b):(this.getElement(".error .msg").text(b.message),this.getElement(".error .method").text(b.request.method),this.getElement(".error .header").html(this._transTableFormat(b.request.heads)),this.getElement(".error .parameters").html(this._transTableFormat(b.request.parameters)),this.getElement(".error .url").text(b.request.url),this.getElement(".error .stacktrace").text(b.stacktrace))}.bind(this),300)}.bind(this),this.hideError=function(){a(function(){this.getElement(".error").hide()}.bind(this))}.bind(this),this.showWarning=function(b){a(function(){this.getElement(".warning").show(),this.getElement(".warning .msg").text(b)}.bind(this),300)}.bind(this),this.hideWarning=function(){a(function(){this.getElement(".warning").hide()}.bind(this))}.bind(this),this.showInfo=function(b){a(function(){this.getElement(".info").show(),this.getElement(".info .msg").html(b)}.bind(this),300)}.bind(this),this.hideInfo=function(){a(function(){this.getElement(".info").hide()}.bind(this))}.bind(this),this.getElement=function(a){return this.$parent?$(a,this.$parent):$(a)}.bind(this),this._transTableFormat=function(a){var b=["<table>"];for(var c in a)b.push("<tr>"),b.push("<td>"+c+"</td><td style='padding-left:20px'>"+a[c]+"</td>"),b.push("</tr>");return b.push("</table>"),b.join("")}}}])}(),function(){"use strict";pinpointApp.factory("ProgressBarService",["$timeout","$window","$location","UserLocalesService",function(a,b,c,d){var e=["ko","en"],f=5,g="__HIDE_LOADING_TIP";return function(h){this.$parent=h||null,this.nPercentage=0,this.bAutoIncrease=!0,this.nTimePromise=null,this.setParent=function(a){return this.$parent=a,this}.bind(this),this.getParent=function(){return this.$parent}.bind(this),this.startLoading=function(d){var e=!0;if(b.localStorage){var f=b.localStorage.getItem(g)||"-";e="-"===f?!0:!((new Date).valueOf()<parseInt(f))}this.bAutoIncrease=d||!0,this.setLoading(0),a(function(){/^\/main/.test(c.path())&&e&&(this.showBackground(),this.showTip()),this.getProgress().show(),this.autoIncrease()}.bind(this))}.bind(this),this.stopLoading=function(){a.cancel(this.nTimePromise),a(function(){this.getProgress().hide(),this.hideTip(),this.hideBackground()}.bind(this),300)}.bind(this),this.setLoading=function(a){return this.nPercentage=a,this.getProgressBar().width(a+"%"),this}.bind(this),this.getProgress=function(){return this.$parent?$(".progress",this.$parent):$(".progress")}.bind(this),this.getProgressBar=function(){return this.$parent?$(".progress .bar",this.$parent):$(".progress .bar")}.bind(this),this.autoIncrease=function(){if(this.bAutoIncrease!==!1){var b=_.random(1,4);this.nPercentage+b<=99&&(this.setLoading(this.nPercentage+b),this.nTimePromise=a(function(){this.autoIncrease()}.bind(this),500))}}.bind(this),this.showBackground=function(){}.bind(this),this.showTip=function(){}.bind(this),this._getRandomNum=function(){var a=parseInt(Math.random()*(f+1));return 10>a?"0"+a:a+""}.bind(this),this._getLocale=function(){return-1==e.indexOf(d.userLocale)?d.defaultLocale:d.userLocale}.bind(this),this.hideBackground=function(){this.$parent&&$(".progress-back",this.$parent).hide()}.bind(this),this.hideTip=function(){this.$parent&&$(".progress-tip",this.$parent).hide()}.bind(this)}}])}(),function(){"use strict";pinpointApp.factory("NavbarVoService",["PreferenceService",function(a){return function(){var b=this;this._sApplication=!1,this._periodType="",this._nPeriod=!1,this._nQueryEndTime=!1,this._sFilter=!1,this._sAgentId=!1,this._nQueryPeriod=!1,this._nQueryStartTime=!1,this._sReadablePeriod=!1,this._sQueryEndDateTime=!1,this._nCalleeRange=a.getCallee(),this._nCallerRange=a.getCaller(),this._sHint=!1,this._sDateTimeFormat="YYYY-MM-DD-HH-mm-ss",this.setApplication=function(a){return angular.isString(a)&&a.indexOf("@")>0&&(b._sApplication=a),b},this.getApplication=function(){return b._sApplication},this.setPeriod=function(a){return angular.isNumber(a)&&a>0&&(b._nPeriod=a),b},this.getPeriod=function(){return b._nPeriod},this.setQueryEndTime=function(a){return angular.isNumber(a)&&a>0&&(b._nQueryEndTime=a),b},this.getQueryEndTime=function(){return b._nQueryEndTime},this.getQueryPeriod=function(){return b._nQueryPeriod},this.getApplicationName=function(){return b._sApplication.split("@")[0]},this.getServiceTypeName=function(){return b._sApplication.split("@")[1]},this.getCalleeRange=function(){return b._nCalleeRange},this.getCallerRange=function(){return b._nCallerRange},this.setCalleeRange=function(a){b._nCalleeRange=a},this.setCallerRange=function(a){b._nCallerRange=a},this.setQueryStartTime=function(a){return angular.isNumber(a)&&a>0&&(b._nQueryStartTime=a),b},this.getQueryStartTime=function(){return b._nQueryStartTime},this.getReady=function(){return b._sApplication&&b._nPeriod&&b._nQueryEndTime},this.setFilter=function(a){return angular.isString(a)&&(b._sFilter=a),b},this.getFilter=function(){return b._sFilter},this.getFilterAsJson=function(){return JSON.parse(b._sFilter)},this.setHint=function(a){return angular.isString(a)&&(b._sHint=a),b},this.getHint=function(){return b._sHint},this.setAgentId=function(a){return angular.isString(a)&&(b._sAgentId=a),b},this.getAgentId=function(){return b._sAgentId},this.setReadablePeriod=function(a){var c=/^(\d)+(s|m|h|d|w|M|y)$/,d=c.exec(a);if(d){b._sReadablePeriod=a;var e=parseInt(a,10);switch(d[2]){case"m":b.setPeriod(60*e);break;case"h":b.setPeriod(60*e*60);break;case"d":b.setPeriod(60*e*60*24);break;case"w":b.setPeriod(60*e*60*24*7);break;case"M":b.setPeriod(60*e*60*24*30);break;case"y":b.setPeriod(60*e*60*24*30*12);break;default:b.setPeriod(e)}}else"realtime"===a&&(b.setPeriodType("realtime"),b._sReadablePeriod="1m",b.setPeriod(300));return b},this.isRealtime=function(){return"realtime"===this._periodType},this.getReadablePeriod=function(){return b._sReadablePeriod},this.setQueryEndDateTime=function(a){var c=/^(19[7-9][0-9]|20\d{2})-(0[0-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])-(0[0-9]|1[0-9]|2[0-3])-([0-5][0-9])-([0-5][0-9])$/;return c.test(a)&&(b._sQueryEndDateTime=a,b.setQueryEndTime(b._parseQueryEndDateTimeToTimestamp(a))),b},this.getQueryEndDateTime=function(){return b._sQueryEndDateTime},this._parseQueryEndDateTimeToTimestamp=function(a){return moment(a,b._sDateTimeFormat).valueOf()},this.autoCalculateByQueryEndTimeAndPeriod=function(){return b._nQueryPeriod=1e3*b._nPeriod*60,b._nQueryStartTime=b._nQueryEndTime-b._nQueryPeriod,b},this.autoCalcultateByQueryStartTimeAndQueryEndTime=function(){return b._nQueryPeriod=b._nQueryEndTime-b._nQueryStartTime,b._nPeriod=b._nQueryPeriod/1e3/60,b._sReadablePeriod=b._nQueryPeriod/1e3/60+"m",b._sQueryEndDateTime=moment(b._nQueryEndTime).format(b._sDateTimeFormat),b},this.autoCalculateByQueryEndDateTimeAndReadablePeriod=function(){return b._nQueryPeriod=1e3*b._nPeriod,b._nQueryStartTime=b._nQueryEndTime-b._nQueryPeriod,b},this.getPartialURL=function(a,c){return(a?b.getApplication()+"/":"")+b.getReadablePeriod()+"/"+b.getQueryEndDateTime()+(c&&b.getFilter()?"/"+b.getFilter():"")},this.setPeriodType=function(a){this._periodType=a},this.getPeriodType=function(){return this._periodType}}}])}(),function(){"use strict";pinpointApp.constant("TransactionDaoServiceConfig",{transactionInfoUrl:"/transactionInfo.pinpoint"}),pinpointApp.service("TransactionDaoService",["TransactionDaoServiceConfig","$timeout","$window",function(a,b,c){b(function(){c.transactionData={}}),this.addData=function(a,b,d){c.transactionData[a]=b},this.getDataByName=function(a,b){angular.isFunction(b)&&b(opener.transactionData[a]||{})},this.getTransactionDetail=function(b,c,d){jQuery.ajax({type:"GET",url:a.transactionInfoUrl,cache:!1,dataType:"json",data:{traceId:b,focusTimestamp:c},success:function(a){angular.isFunction(d)&&d(null,a)},error:function(a,b,c){angular.isFunction(d)&&d("ERROR",{})}})}}])}(),function(){"use strict";pinpointApp.factory("locationService",["$location","$route","$rootScope",function(a,b,c){return a.skipReload=function(){var d=b.current,e=c.$on("$locationChangeSuccess",function(){b.current=d,e()});return a},a}])}(),function(){"use strict";pinpointApp.constant("serverMapDaoServiceConfig",{serverMapDataUrl:"/getServerMapData.pinpoint",filteredServerMapDataUrl:"/getFilteredServerMapDataMadeOfDotGroup.pinpoint",filtermapUrl:"/filtermap.pinpoint",lastTransactionListUrl:"/lastTransactionList.pinpoint",transactionListUrl:"/transactionList.pinpoint",FILTER_DELIMETER:"^",FILTER_ENTRY_DELIMETER:"|",FILTER_FETCH_LIMIT:5e3}),pinpointApp.service("ServerMapDaoService",["serverMapDaoServiceConfig","PreferenceService",function(a,b){var c=this;this.getServerMapData=function(b,c){var d={applicationName:b.applicationName,from:b.from,to:b.to,callerRange:b.callerRange,calleeRange:b.calleeRange};isNaN(parseInt(b.serviceTypeName))?d.serviceTypeName=b.serviceTypeName:d.serviceTypeCode=b.serviceTypeName,jQuery.ajax({type:"GET",url:a.serverMapDataUrl,cache:!1,dataType:"json",data:d,success:function(a){angular.isFunction(c)&&c(null,b,a)},error:function(a,d,e){angular.isFunction(c)&&c(e,b,{})}})},this.getFilteredServerMapData=function(b,c){var d={applicationName:b.applicationName,from:b.from,to:b.to,originTo:b.originTo,filter:b.filter,limit:a.FILTER_FETCH_LIMIT,callerRange:b.callerRange,calleeRange:b.calleeRange,v:3,xGroupUnit:987,yGroupUnit:57};isNaN(parseInt(b.serviceTypeName))?d.serviceTypeName=b.serviceTypeName:d.serviceTypeCode=b.serviceTypeName,b.hint&&(d.hint=b.hint),jQuery.ajax({type:"GET",url:a.filteredServerMapDataUrl,cache:!1,dataType:"json",data:d,success:function(a){angular.isFunction(c)&&c(null,b,a)},error:function(a,d,e){angular.isFunction(c)&&c(e,b,{})}})},this.mergeFilteredMapData=function(a,b){return 0===a.linkDataArray.length&&0===a.nodeDataArray.length?(a.linkDataArray=b.linkDataArray,a.nodeDataArray=b.nodeDataArray):(angular.forEach(b.nodeDataArray,function(b,c){var d=this.findExistingNodeKeyFromLastMapData(a,b);d>=0?a=this.mergeNodeData(a,d,b):a.nodeDataArray.push(b)},this),angular.forEach(b.linkDataArray,function(b,c){var d=this.findExistingLinkFromLastMapData(a,b);d>=0?a=this.mergeLinkData(a,d,b):a.linkDataArray.push(b)},this)),a},this.findExistingNodeKeyFromLastMapData=function(a,b){for(var c in a.nodeDataArray)if(a.nodeDataArray[c].applicationName===b.applicationName&&a.nodeDataArray[c].serviceTypeCode===b.serviceTypeCode)return c;return-1},this.findExistingLinkFromLastMapData=function(a,b){for(var c in a.linkDataArray)if(a.linkDataArray[c].from===b.from&&a.linkDataArray[c].to===b.to)return c;return-1},this.addFilterProperty=function(a,b){var c=this.parseFilterText(a,b);return angular.forEach(b.nodeDataArray,function(a){angular.isDefined(_.findWhere(c,{nodeKey:a.key}))?a.isFiltered=!0:a.isFiltered=!1}),angular.forEach(b.linkDataArray,function(a,b){angular.isDefined(_.findWhere(c,{fromKey:a.from,toKey:a.to}))?a.isFiltered=!0:a.isFiltered=!1},this),b},this.parseFilterText=function(a,b){var c=[];return angular.forEach(a,function(a){c.push({fromServiceType:a.fst,fromApplication:a.fa,fromKey:this.findNodeKeyByApplicationName(a.fa,b),toServiceType:a.tst,toApplication:a.ta,toKey:this.findNodeKeyByApplicationName(a.ta,b),nodeKey:""})},this),c},this.findNodeKeyByApplicationName=function(a,b){var c=_.findWhere(b.nodeDataArray,{applicationName:a});return angular.isDefined(c)?c.key:!1},this.mergeNodeData=function(a,b,c){if(angular.isUndefined(a.nodeDataArray[b]))return a.nodeDataArray[b]=c,a;var d,e,f=a.nodeDataArray[b];if(f.errorCount+=c.errorCount,f.slowCount+=c.slowCount,f.totalCount+=c.totalCount,c.hasAlert&&(f.hasAlert=c.hasAlert),angular.isDefined(c.histogram))if(angular.isDefined(f.histogram))for(d in c.histogram)angular.isDefined(f.histogram[d])?f.histogram[d]+=c.histogram[d]:f.histogram[d]=c.histogram[d];else f.histogram=c.histogram;if(angular.isDefined(c.agentHistogram))for(d in c.agentHistogram)if(angular.isDefined(f.agentHistogram[d]))for(e in c.agentHistogram[d])angular.isDefined(f.agentHistogram[d][e])?f.agentHistogram[d][e]+=c.agentHistogram[d][e]:f.agentHistogram[d][e]=c.agentHistogram[d][e];else f.agentHistogram[d]=c.agentHistogram[d];if(angular.isDefined(c.timeSeriesHistogram))for(d in c.timeSeriesHistogram)if(angular.isDefined(f.timeSeriesHistogram)){var g=[];a:for(e in c.timeSeriesHistogram[d].values){for(var h in f.timeSeriesHistogram[d].values)if(f.timeSeriesHistogram[d].values[h][0]===c.timeSeriesHistogram[d].values[e][0]){f.timeSeriesHistogram[d].values[h][1]+=c.timeSeriesHistogram[d].values[e][1];continue a}g.push(c.timeSeriesHistogram[d].values[e])}f.timeSeriesHistogram[d].values=g.concat(f.timeSeriesHistogram[d].values)}else f.timeSeriesHistogram=c.timeSeriesHistogram;if(angular.isDefined(c.agentTimeSeriesHistogram))for(d in c.agentTimeSeriesHistogram)if(angular.isDefined(f.agentTimeSeriesHistogram))if(angular.isDefined(f.agentTimeSeriesHistogram[d]))for(e in c.agentTimeSeriesHistogram[d])angular.isDefined(f.agentTimeSeriesHistogram[d][e])?f.agentTimeSeriesHistogram[d][e].values=c.agentTimeSeriesHistogram[d][e].values.concat(f.agentTimeSeriesHistogram[d][e].values):f.agentTimeSeriesHistogram[d][e]=c.agentTimeSeriesHistogram[d][e];else f.agentTimeSeriesHistogram[d]=c.agentTimeSeriesHistogram[d];else f.agentTimeSeriesHistogram=c.agentTimeSeriesHistogram;if(angular.isDefined(c.serverList))for(d in c.serverList)if(f.serverList[d])for(e in c.serverList[d].instanceList)if(f.serverList[d].instanceList[e])for(var i in c.serverList[d].instanceList[e].histogram)f.serverList[d].instanceList[e].histogram[i]?f.serverList[d].instanceList[e].histogram[i]+=c.serverList[d].instanceList[e].histogram[i]:f.serverList[d].instanceList[e].histogram[i]=c.serverList[d].instanceList[e].histogram[i];else f.serverList[d].instanceList[e]=c.serverList[d].instanceList[e];else f.serverList[d]=c.serverList[d];return a},this.mergeLinkData=function(a,b,c){if(angular.isUndefined(a.linkDataArray[b]))return a.linkDataArray[b]=c,a;var d,e,f=a.linkDataArray[b];if(f.errorCount+=c.errorCount,f.slowCount+=c.slowCount,f.totalCount+=c.totalCount,c.hasAlert&&(f.hasAlert=c.hasAlert),angular.isDefined(c.histogram))for(d in c.histogram)f.histogram[d]?f.histogram[d]+=c.histogram[d]:f.histogram[d]=c.histogram[d];if(angular.isDefined(c.timeSeriesHistogram))for(d in c.timeSeriesHistogram)if(angular.isDefined(f.timeSeriesHistogram)){var g=[];a:for(e in c.timeSeriesHistogram[d].values){for(var h in f.timeSeriesHistogram[d].values)if(f.timeSeriesHistogram[d].values[h][0]===c.timeSeriesHistogram[d].values[e][0]){f.timeSeriesHistogram[d].values[h][1]+=c.timeSeriesHistogram[d].values[e][1];continue a}g.push(c.timeSeriesHistogram[d].values[e])}f.timeSeriesHistogram[d].values=g.concat(f.timeSeriesHistogram[d].values)}else f.timeSeriesHistogram=c.timeSeriesHistogram;if(angular.isDefined(c.sourceHistogram))for(d in c.sourceHistogram)if(angular.isDefined(f.sourceHistogram[d]))for(e in c.sourceHistogram[d])f.sourceHistogram[d][e]?f.sourceHistogram[d][e]+=c.sourceHistogram[d][e]:f.sourceHistogram[d][e]=c.sourceHistogram[d][e];else f.sourceHistogram[d]=c.sourceHistogram[d];if(angular.isDefined(c.targetHistogram))for(d in c.targetHistogram)if(angular.isDefined(f.targetHistogram[d]))for(e in c.targetHistogram[d])f.targetHistogram[d][e]?f.targetHistogram[d][e]+=c.targetHistogram[d][e]:f.targetHistogram[d][e]=c.targetHistogram[d][e];else f.targetHistogram[d]=c.targetHistogram[d];return a},this.mergeTimeSeriesResponses=function(a,b){return angular.forEach(b.values,function(b,c){angular.isUndefined(a.timeSeriesResponses.values[c])?a.timeSeriesResponses.values[c]=b:a.timeSeriesResponses.values[c]=_.union(b,a.timeSeriesResponses.values[c])},this),a.timeSeriesResponses.time=_.union(b.time,a.timeSeriesResponses.time),a},this.mergeGroup=function(a,b){var c=this,d=a.nodeDataArray,e=a.linkDataArray,f=c._getInboundCountMap(d,e);return b.forEach(function(a){var b=a+"_GROUP",g=[],h=[],i={},j={};d.forEach(function(k,l){var m,n,o=b+"_"+k.key,p=0;e.forEach(function(b,c){b.from==k.key&&b.targetInfo.serviceType==a&&f[b.to]&&1==f[b.to].toCount&&p++}),2>p||(e.forEach(function(e,g){e.targetInfo.serviceType==a&&(f[e.to]&&f[e.to].toCount>1||e.from==k.key&&(m||(m=c._createNewNode(o,b)),n||(n=c._createNewLink(k.key,o)),c._addToSubNode(m,c._getNodeByApplicationName(d,e.targetInfo.applicationName,a),function(){}),c._mergeLinkData(n,e),n.unknownLinkGroup.push(e),i[e.to]=null,j[e.key]=null))}),m&&(m.unknownNodeGroup.sort(function(a,b){return b.totalCount-a.totalCount}),g.push(m)),n&&(n.unknownLinkGroup.sort(function(a,b){return b.totalCount-a.totalCount}),h.push(n)))}),c._addToOriginal(d,g),c._addToOriginal(e,h),c._removeByKey(d,i),c._removeByKey(e,j)}),a},this._addToOriginal=function(a,b){b.forEach(function(b){a.push(b)})},this._getInboundCountMap=function(a,b){var c={};return a.forEach(function(a){var d={toCount:0,fromCount:0,totalCallCount:0};b.forEach(function(b){b.to===a.key&&(d.toCount++,d.totalCallCount+=b.totalCount),b.from===a.key&&d.fromCount++}),c[a.key]=d}),c},this._selectMergeTarget=function(a,b){var c=[];return a.forEach(function(a,d){b[a.key].fromCount>0||b[a.key].toCount<2||c.push(a)}),c},this._getFromNodes=function(a,b){var c=[];return a.forEach(function(a){a.to===b&&c.push(a.from)}),c},this.mergeMultiLinkGroup=function(a,b){var c=this,d=a.nodeDataArray,e=a.linkDataArray,f=this._getInboundCountMap(d,e),g=this._selectMergeTarget(d,f),h={},i=[],j=[],k={},l={};return g.forEach(function(a,d){if(h[a.key]!==!0||-1!=b.indexOf(a.serviceType)){h[a.key]=!0;var f=a.serviceType+"_GROUP",m=null,n=null,o=f+"_"+a.key,p=c._getFromNodes(e,a.key);g.forEach(function(d,g){if(h[d.key]!==!0&&a.serviceType===d.serviceType&&-1!=b.indexOf(d.serviceType)){var i=c._getFromNodes(e,d.key);if(p.length===i.length){var j=0;for(j=0;j<p.length;j++)if(-1===i.indexOf(p[j]))return;if(h[d.key]=!0,null===m&&(m=c._createNewMultiGroupNode(o,f)),null===n)for(n=[],j=0;j<i.length;j++)n.push(c._createNewLink(i[j],o));c._addToSubNode(m,d,function(a){k[a]=null}),c._addToSubLink(e,n,d.key,function(a,b){l[a]=null;var c=/(.*)\^(.*)/.exec(b.from),d=/(.*)\^(.*)/.exec(b.to),e=!1,f=null,g=0;m.subGroup.forEach(function(a,b){a.applicationName===c[1]&&(e=!0,f=a,g=b)}),e===!1&&(f={applicationName:c[1],groups:[],isLast:!1},m.subGroup.push(f),g=m.subGroup.length-1),f.groups.push({applicationName:d[1],hasAlert:b.hasAlert,totalCount:b.totalCount,serviceType:d[2],key:b.to,idx:g})})}}}),null!==m&&c._addToSubNode(m,a,function(a){k[a]=null}),null!==n&&c._addToSubLink(e,n,a.key,function(a,b){l[a]=null;var c=/(.*)\^(.*)/.exec(b.from),d=/(.*)\^(.*)/.exec(b.to),e=!1,f=null,g=0;m.subGroup.forEach(function(a,b){a.applicationName===c[1]&&(e=!0,f=a,g=b)}),e===!1&&(f={applicationName:c[1],groups:[],isLast:!1},m.subGroup.push(f),g=m.subGroup.length-1),f.groups.push({applicationName:d[1],hasAlert:b.hasAlert,totalCount:b.totalCount,serviceType:d[2],key:b.to,idx:g})}),m&&m.subGroup&&(m.subGroup[m.subGroup.length-1].isLast=!0),null!==m&&null!==n&&(i.push(m),n.forEach(function(a){j.push(a)})),m=null,n=null}}),c._addToOriginal(d,i),c._addToOriginal(e,j),c._removeByKey(d,k),c._removeByKey(e,l),a},this._createNewLink=function(a,b){return{key:a+"-"+b,from:a,to:b,sourceInfo:{},targetInfo:[],totalCount:0,errorCount:0,slowCount:0,hasAlert:!1,unknownLinkGroup:[],histogram:{}}},this._createNewNode=function(a,b){return{key:a,unknownNodeGroup:[],serviceType:b,category:b,instanceCount:0,isMultiGroup:!1,isCollapse:!0}},this._createNewMultiGroupNode=function(a,b){return{key:a,unknownNodeGroup:[],subGroup:[],serviceType:b,category:b,instanceCount:0,isMultiGroup:!0,isCollapse:!0}},this._removeByKey=function(a,b){$.each(b,function(b,c){a.forEach(function(c,d){c.key==b&&a.splice(d,1)})})},this._addToSubNode=function(a,b,c){delete b.category,a.instanceCount+=b.instanceCount,a.unknownNodeGroup.push(b),c(b.key)},this._addToSubLink=function(a,b,c,d){var e=this;a.forEach(function(a){a.to===c&&(b.forEach(function(b){b.from==a.from&&(e._mergeLinkData(b,a),b.unknownLinkGroup.push(a))}),d(a.key,a))})},this._mergeLinkData=function(a,b){a.totalCount+=b.totalCount,a.errorCount+=b.errorCount,a.slowCount+=b.slowCount,a.sourceInfo=b.sourceInfo,b.hasAlert&&(a.hasAlert=b.hasAlert)},this._getNodeByApplicationName=function(a,b,c){for(var d in a)if(b===a[d].applicationName&&c===a[d].serviceType)return a[d];return!1},this.getNodeDataByKey=function(a,b){var c=a.nodeDataArray,d=!1;return c.forEach(function(a){a.key===b&&(d=a)}),d},this.getLinkNodeDataByNodeKey=function(a,b,c){var d=a.linkDataArray,e=!1;return d.forEach(function(a){a.to===b&&-1!=a.from.indexOf(c)&&(e=a)}),e},this.getLinkDataByKey=function(a,b){var c=a.linkDataArray,d=!1;return c.forEach(function(a){a.key===b&&(d=a)}),d},this.getUnknownNodeDataByUnknownNodeGroup=function(a,b){for(var d in b)b[d]=c.getNodeDataByKey(a,b[d].key);return b},this.getUnknownLinkDataByUnknownLinkGroup=function(a,b){for(var d in b)b[d]=c.getLinkDataByKey(a,b[d].key),b[d].fromNode=c.getNodeDataByKey(a,b[d].from),b[d].toNode=c.getNodeDataByKey(a,b[d].to);return b},this.extractDataFromApplicationMapData=function(a){var b=["applicationName","category","errorCount","hasAlert","instanceCount","isWas","key","slowCount","serviceType","totalCount","histogram"],c=["errorCount","from","hasAlert","key","sourceInfo","slowCount","to","targetInfo","totalCount"],d={nodeDataArray:[],linkDataArray:[]};return angular.forEach(a.nodeDataArray,function(a,c){d.nodeDataArray.push({}),angular.forEach(b,function(b){d.nodeDataArray[c][b]=a[b]})}),angular.forEach(a.linkDataArray,function(a,b){d.linkDataArray.push({}),angular.forEach(c,function(c){d.linkDataArray[b][c]=a[c]})}),d}}])}(),function(){"use strict";pinpointApp.constant("agentDaoServiceConfig",{agentStatUrl:"/getAgentStat.pinpoint"}),pinpointApp.service("AgentDaoService",["agentDaoServiceConfig",function(a){this.getAgentStat=function(b,c){jQuery.ajax({type:"GET",url:a.agentStatUrl,cache:!1,dataType:"json",data:b,success:function(a){angular.isFunction(c)&&c(null,a)},error:function(a,b,d){angular.isFunction(c)&&c(d,{})}})},this.getSampleRate=function(a){var b=100,c=a/5,d=Math.floor(c/b);return b>=c?1:d},this.parseMemoryChartDataForAmcharts=function(a,b){var c=[],d=b.charts.JVM_GC_OLD_TIME.points,e=b.charts.JVM_GC_OLD_COUNT.points;if(d.length!==e.length)throw new Error("assertion error","time.length != count.length");for(var f,g,h,i,j=0;j<e.length;++j){var k={time:moment(d[j].timestamp).format("YYYY-MM-dd HH:mm:ss")};for(var l in a.line)if(a.line[l].isFgc){var m=0,n=0;if(f=d[j].maxVal,g=e[j].maxVal,h&&i){var o=g-i,p=f-h,q=Math.abs(o)>0&&Math.abs(p)>0,r=0>o&&0>p;q&&(r?(m=g,n=f):(m=g-i,n=f-h),i=g,h=f)}else h=f,i=g;m>0&&n>0&&(k[a.line[l].key+"Count"]=m,k[a.line[l].key+"Time"]=n)}else{var s=b.charts[a.line[l].id].points[j].maxVal;s>=0&&(k[a.line[l].key]=s)}c.push(k)}return c},this.parseCpuLoadChartDataForAmcharts=function(a,b){var c=b.charts.CPU_LOAD_JVM,d=b.charts.CPU_LOAD_SYSTEM;if(c||d){a.isAvailable=!0;var e=[],f=c.points,g=d.points;if(f.length!==g.length)throw new Error("assertion error","jvmCpuLoad.length != systemCpuLoad.length");for(var h=0;h<f.length;++h){if(f[h].timestamp!==g[h].timestamp)throw new Error("assertion error","timestamp mismatch between jvmCpuLoad and systemCpuLoad");var i={time:moment(f[h].timestamp).toString("YYYY-MM-dd HH:mm:ss"),maxCpuLoad:100},j="number"==typeof b.charts.CPU_LOAD_JVM.points[h].maxVal?b.charts.CPU_LOAD_JVM.points[h].maxVal.toFixed(2):0,k="number"==typeof b.charts.CPU_LOAD_SYSTEM.points[h].maxVal?b.charts.CPU_LOAD_SYSTEM.points[h].maxVal.toFixed(2):0;j>=0&&(i.jvmCpuLoad=j),k>=0&&(i.systemCpuLoad=k),e.push(i)}return e}},this.parseTpsChartDataForAmcharts=function(a,b){var c=b.charts.TPS_SAMPLED_CONTINUATION.points,d=b.charts.TPS_SAMPLED_NEW.points,e=b.charts.TPS_UNSAMPLED_CONTINUATION.points,f=b.charts.TPS_UNSAMPLED_NEW.points,g=b.charts.TPS_TOTAL.points,h=g.length;if(h>0){a.isAvailable=!0;for(var i=[],j=-1,k=0;h>k;k++){var l={time:moment(c[k].timestamp).toString("YYYY-MM-dd HH:mm:ss")},m="number"==typeof c[k].avgVal?c[k].avgVal.toFixed(2):0,n="number"==typeof d[k].avgVal?d[k].avgVal.toFixed(2):0,o="number"==typeof e[k].avgVal?e[k].avgVal.toFixed(2):0,p="number"==typeof f[k].avgVal?f[k].avgVal.toFixed(2):0,q="number"==typeof g[k].avgVal?g[k].avgVal.toFixed(2):0;m!=j&&(l.sampledContinuationTps=m),n!=j&&(l.sampledNewTps=n),o!=j&&(l.unsampledContinuationTps=o),p!=j&&(l.unsampledNewTps=p),q!=j&&(l.totalTps=q),i.push(l)}return i}}}])}(),function(){"use strict";pinpointApp.factory("SidebarTitleVoService",[function(){return function(){var a=this;this._sImage=!1,this._sImageType=!1,this._sTitle=!1,this._sImage2=!1,this._sImageType2=!1,this._sTitle2=!1,this.setImageType=function(b){if(!angular.isString(b))throw"ImageType should be string in SidebarTitleVo";return a._sImageType=b,a._sImage=a._parseImageTypeToImageUrl(b),a},this._parseImageTypeToImageUrl=function(a){if(angular.isString(a)){var b="/images/icons/";switch(a){case"UNKNOWN_GROUP":b+="UNKNOWN.png";break;default:b+=a+".png"}return b}throw"ImageType should be string in SidebarTitleVo"},this.getImageType=function(){return a._sImageType},this.getImage=function(){return a._sImage},this.setTitle=function(b){if(!angular.isString(b))throw"Title should be string in SidebarTitleVo";return a._sTitle=b,a},this.getTitle=function(){return a._sTitle},this.setImageType2=function(b){if(!angular.isString(b))throw"ImageType2 should be string in SidebarTitleVo";return a._sImageType2=b,a._sImage2=a._parseImageTypeToImageUrl(b),a},this.getImageType2=function(){return a._sImageType2},this.getImage2=function(){return a._sImage2},this.setTitle2=function(b){if(!angular.isString(b))throw"Title2 should be string in SidebarTitleVo";return a._sTitle2=b,a},this.getTitle2=function(){return a._sTitle2}}}])}(),function(){"use strict";pinpointApp.factory("filteredMapUtilService",["filterConfig","ServerMapFilterVoService","$window",function(a,b,c){return{mergeFilters:function(a,b){var c=[];if(a.getFilter()){var d=JSON.parse(a.getFilter());if(angular.isArray(d)){c=d;var e=this.findFilterInNavbarVo(b.getFromApplication(),b.getFromServiceType(),b.getToApplication(),b.getToServiceType(),a);if(e)return c[e.index]=b.toJson(),c}}return c.push(b.toJson()),c},mergeHints:function(a,b){var c={},d=this.parseShortHintToLongHint(JSON.parse(a.getHint())),e=b.getHint();if(d)if(e){var f=_.keys(e)[0],g=e[f];c=angular.copy(d),angular.isDefined(c[f])?(c[f]=_.union(c[f],g),c[f]=this.uniqueHintValue(c[f])):c[f]=g}else c=d;else c=b.getHint();return c},uniqueHintValue:function(a){for(var b=0;b<a.length;++b)for(var c=b+1;c<a.length;++c)a[b].rpc===a[c].rpc&&a[b].rpcServiceTypeCode===a[c].rpcServiceTypeCode&&a.splice(c--,1);return a},parseShortHintToLongHint:function(a){var b=angular.copy(a);return angular.forEach(b,function(a,c){for(var d=[],e=0;e<a.length;e+=2)d.push({rpc:a[e],rpcServiceTypeCode:a[e+1]});b[c]=d}),b},parseLongHintToShortHint:function(a){var b=angular.copy(a);return angular.forEach(b,function(a,c){var d=[];for(var e in a)d.push(a[e].rpc),d.push(a[e].rpcServiceTypeCode);b[c]=d}),b},getStartValueForFilterByLabel:function(a,b){var c=function(){for(var c in b)if(b[c].label===a)return c;return!1}(),d=0;return c>0&&(d=parseInt(b[c-1].label,10)),d},getFilteredMapUrlWithFilterVo:function(a,b,d){var e=this.mergeFilters(a,b),f=b.getMainApplication()+"@"+b.getMainServiceTypeName(),g="#/filteredMap/"+f+"/"+a.getReadablePeriod()+"/"+a.getQueryEndDateTime()+"/"+c.encodeURIComponent(JSON.stringify(e));if(a.getHint()||d.getHint()){var h=this.mergeHints(a,d),i=this.parseLongHintToShortHint(h);g+="/"+c.encodeURIComponent(JSON.stringify(i))}return g},findFilterInNavbarVo:function(a,b,c,d,e){var f=JSON.parse(e.getFilter()),g=!1;return"USER"===b&&(a="USER"),angular.isArray(f)&&angular.forEach(f,function(e,f){var h=new ServerMapFilterVo(e);a===h.getFromApplication()&&c===h.getToApplication()&&b===h.getFromServiceType()&&d===h.getToServiceType()&&(g={oServerMapFilterVoService:h,index:f})}),g},doFiltersHaveUnknownNode:function(a){for(var b in a)if("UNKNOWN"===a[b].tst)return!0;return!1}}}])}(),function(){"use strict";pinpointApp.constant("filterConfig",{FILTER_DELIMETER:"^",FILTER_ENTRY_DELIMETER:"|"})}(),function(){"use strict";pinpointApp.factory("ServerMapFilterVoService",[function(){return function(a){var b=this;this._sMainApplication=null,this._nMainServiceTypeCode=null,this._sMainServiceTypeName=null,this._sFromApplication=null,this._sFromServiceType=null,this._sFromAgentName=null,this._sToApplication=null,this._sToServiceType=null,this._sToAgentName=null,this._sResponseFrom=0,this._sResponseTo="max",this._bIncludeException=null,this._sRequestUrlPattern="",
this.setMainApplication=function(a){if(!angular.isString(a))throw new Error("mainApplication should be string in ServerMapFilterVo. : ",a);return b._sMainApplication=a,b},this.getMainApplication=function(){return b._sMainApplication},this.setMainServiceTypeCode=function(a){if(!angular.isNumber(a))throw new Error("mainServiceTypeCode should be number in ServerMapFilterVo. : ",a);return b._nMainServiceTypeCode=a,b},this.setMainServiceTypeName=function(a){if(!angular.isString(a))throw new Error("mainServiceTypeName should be string in ServerMapFilterVo. : ",a);return b._sMainServiceTypeName=a,b},this.getMainServiceTypeCode=function(){return b._nMainServiceTypeCode},this.getMainServiceTypeName=function(){return b._sMainServiceTypeName},this.setFromApplication=function(a){if(!angular.isString(a))throw new Error("fromApplication should be string in ServerMapFilterVo. : ",a);return b._sFromApplication=a,b},this.getFromApplication=function(){return b._sFromApplication},this.setFromServiceType=function(a){if(!angular.isString(a))throw new Error("fromServiceType should be string in ServerMapFilterVo. : ",a);return b._sFromServiceType=a,b},this.getFromServiceType=function(){return b._sFromServiceType},this.setFromAgentName=function(a){if(!angular.isString(a))throw new Error("fromAgentName should be string in ServerMapFilterVo. : ",a);return b._sFromAgentName=a,b},this.getFromAgentName=function(){return b._sFromAgentName},this.setToApplication=function(a){if(!angular.isString(a))throw new Error("toApplication should be string in ServerMapFilterVo. : ",a);return b._sToApplication=a,b},this.getToApplication=function(){return b._sToApplication},this.setToServiceType=function(a){if(!angular.isString(a))throw new Error("toServiceType should be string in ServerMapFilterVo. : ",a);return b._sToServiceType=a,b},this.getToServiceType=function(){return b._sToServiceType},this.setToAgentName=function(a){if(!angular.isString(a))throw new Error("toAgentName should be string in ServerMapFilterVo. : ",a);return b._sToAgentName=a,b},this.getToAgentName=function(){return b._sToAgentName},this.setResponseFrom=function(a){if(angular.isString(a))b._sResponseFrom=parseInt(a,10);else{if(!angular.isNumber(a))throw new Error("responseFrom should be string in ServerMapFilterVo. : ",a);b._sResponseFrom=a}return b},this.getResponseFrom=function(){return b._sResponseFrom},this.setResponseTo=function(a){if("max"===a)b._sResponseTo="max";else{if(!angular.isNumber(a)&&!angular.isString(a))throw new Error("responseTo should be string in ServerMapFilterVo.");a=parseInt(a,10),a>=3e4?b._sResponseTo="max":b._sResponseTo=a}return b},this.getResponseTo=function(){return b._sResponseTo},this.setIncludeException=function(a){if(!angular.isDefined(a))throw new Error("includeException should be defined in ServerMapFilterVo.");return b._bIncludeException=a,b},this.getIncludeException=function(){return b._bIncludeException},this.setRequestUrlPattern=function(a){return angular.isString(a)&&(b._sRequestUrlPattern=a),b},this.getRequestUrlPattern=function(){return b._sRequestUrlPattern},this.toJson=function(){var a={fa:b._sFromApplication,fst:b._sFromServiceType,ta:b._sToApplication,tst:b._sToServiceType,ie:b._bIncludeException};return 0===b._sResponseFrom&&"max"===b._sResponseTo||(a.rf=b._sResponseFrom,a.rt=b._sResponseTo),b._sRequestUrlPattern&&(a.url=b._sRequestUrlPattern),b._sFromAgentName&&(a.fan=b._sFromAgentName),b._sToAgentName&&(a.tan=b._sToAgentName),a},a&&angular.isObject(a)&&(this.setFromApplication(a.fa).setFromServiceType(a.fst).setToApplication(a.ta).setToServiceType(a.tst).setIncludeException(a.ie),angular.isNumber(a.rf)&&a.rt&&this.setResponseFrom(a.rf).setResponseTo(a.rt),a.url&&this.setRequestUrlPattern(a.url),a.fan&&this.setFromAgentName(a.fan),a.tan&&this.setToAgentName(a.tan))}}])}(),function(a){"use strict";pinpointApp.constant("AlarmAjaxServiceConfig",{group:"/userGroup.pinpoint",groupMember:"/userGroup/member.pinpoint",pinpointUser:"/user.pinpoint",alarmRule:"/alarmRule.pinpoint",alarmRuleSet:"/alarmRule/checker.pinpoint"}),pinpointApp.service("AlarmAjaxService",["AlarmAjaxServiceConfig","$http",function(b,c){function d(a,b,d){c.post(a,b).then(function(a){d(a.data)},function(a){d(a)})}function e(a,b,d){c.put(a,b).then(function(a){d(a.data)},function(a){d(a)})}function f(b,c,d){a.ajax(b,{type:"DELETE",data:JSON.stringify(c),contentType:"application/json"}).done(function(a){d(a)}).fail(function(a){d(a)})}function g(a,b,d){var e="?";for(var f in b)e+=("?"==e?"":"&")+f+"="+b[f];c.get(a+e).then(function(a){d(a.data)},function(a){d(a)})}this.getUserGroupList=function(a,c){g(b.group,a,c)},this.createUserGroup=function(a,c){d(b.group,a,c)},this.updateUserGroup=function(a,c){e(b.group,a,c)},this.removeUserGroup=function(a,c){f(b.group,a,c)},this.addMemberInGroup=function(a,c){d(b.groupMember,a,c)},this.getGroupMemberListInGroup=function(a,c){g(b.groupMember,a,c)},this.removeMemberInGroup=function(a,c){f(b.groupMember,a,c)},this.getPinpointUserList=function(a,c){g(b.pinpointUser,a,c)},this.createPinpointUser=function(a,c){d(b.pinpointUser,a,c)},this.updatePinpointUser=function(a,c){e(b.pinpointUser,a,c)},this.removePinpointUser=function(a,c){f(b.pinpointUser,a,c)},this.getRuleList=function(a,c){g(b.alarmRule,a,c)},this.createRule=function(a,c){d(b.alarmRule,a,c)},this.updateRule=function(a,c){e(b.alarmRule,a,c)},this.removeRule=function(a,c){f(b.alarmRule,a,c)},this.getRuleSet=function(a,c){g(b.alarmRuleSet,a,c)}}])}(jQuery),function(a){"use strict";pinpointApp.constant("AlarmUtilServiceConfig",{hideClass:"hide-me",hasNotEditClass:"has-not-edit"}),pinpointApp.service("AlarmUtilService",["AlarmUtilServiceConfig","AlarmAjaxService",function(a,b){var c=this;this.show=function(b){b.removeClass(a.hideClass)},this.hide=function(){for(var b=0;b<arguments.length;b++)arguments[b].addClass(a.hideClass)},this.showLoading=function(b,c){b[c?"removeClass":"addClass"](a.hasNotEditClass),b.removeClass(a.hideClass)},this.showAlert=function(b,c){b.find(".message").html(c).end().removeClass(a.hideClass).animate({height:300},500,function(){})},this.sendCRUD=function(a,d,e,f,g){b[a](d,function(a){a.errorCode||a.status?(c.showAlert(g,a.errorMessage||a.statusText),f(a)):e(a)})},this.setTotal=function(a,b){a.html("("+b+")")},this.setFilterBackground=function(a){a.css("background-color","#FFFFF1")},this.unsetFilterBackground=function(a){a.css("background-color","#FFF")},this.hasDuplicateItem=function(a,b){for(var c=(a.length,!1),d=0;d<a.length;d++)if(b(a[d])){c=!0;break}return c},this.closeAlert=function(a,b){a.animate({height:50},100,function(){c.hide(a,b)})},this.extractID=function(a){return a.prop("id").split("_")[1]}}])}(jQuery),function(a){"use strict";pinpointApp.service("AlarmBroadcastService",["$rootScope",function(a){var b=this;this.sendInit=function(a,c){b.sendReloadWithUserGroupID(a,c)},this.sendLoadPinpointUser=function(b){a.$broadcast("alarmPinpointUser.configuration.load",b)},this.sendReloadWithUserGroupID=function(b,c){a.$broadcast("alarmGroupMember.configuration.load",b,c),a.$broadcast("alarmRule.configuration.load",b)},this.sendSelectionEmpty=function(){a.$broadcast("alarmGroupMember.configuration.selectNone"),a.$broadcast("alarmRule.configuration.selectNone")},this.sendCallbackAddedUser=function(b){a.$broadcast("alarmPinpointUser.configuration.addUserCallback",b)},this.sendUserAdd=function(b){a.$broadcast("alarmGroupMember.configuration.addUser",b)},this.sendUserUpdated=function(b){a.$broadcast("alarmGroupMember.configuration.updateUser",b)},this.sendUserRemoved=function(b){a.$broadcast("alarmGroupMember.configuration.removeUser",b)}}])}(jQuery),function(){"use strict";pinpointApp.factory("ServerMapHintVoService",[function(){return function(a){var b=this;this._sApplicationName=!1,this._aHint=!1,this.setHint=function(a,b){this._sApplicationName=a,this._aHint=b},this.getHint=function(){var a={};return b._sApplicationName?a[b._sApplicationName]=b._aHint:a=!1,a}}}])}(),function(){"use strict";pinpointApp.factory("isVisibleService",function(){function a(d,e,f,g,h,i,j,k){var l=d.parentNode,m=2;if(!c(d))return!1;if(e||0===e||(e=99999),9===l.nodeType)return!0;if("0"===b(d,"opacity")||"none"===b(d,"display")||"hidden"===b(d,"visibility"))return!1;if("undefined"!=typeof f&&"undefined"!=typeof g&&"undefined"!=typeof h&&"undefined"!=typeof i&&"undefined"!=typeof j&&"undefined"!=typeof k||(f=d.offsetTop,i=d.offsetLeft,h=f+d.offsetHeight,g=i+d.offsetWidth,j=d.offsetWidth,k=d.offsetHeight),l){var n=b(l,"overflow");return("hidden"===n||"scroll"===n||"auto"===n)&&e>0&&(e-=1,i+m>l.offsetWidth+l.scrollLeft||i+j-m<l.scrollLeft||f+m>l.offsetHeight+l.scrollTop||f+k-m<l.scrollTop)?!1:(d.offsetParent===l&&(i+=l.offsetLeft,f+=l.offsetTop),a(l,e,f,g,h,i,j,k))}return!0}function b(a,b){return window.getComputedStyle?document.defaultView.getComputedStyle(a,null)[b]:a.currentStyle?a.currentStyle[b]:void 0}function c(a){for(;a=a.parentNode;)if(a==document)return!0;return!1}return a})}(),function(){"use strict";pinpointApp.factory("UserLocalesService",["$window",function(a){var b="en",c=a.navigator.userLanguage||a.navigator.language;return c="string"===$.type(c)&&c.length>=2?c.substring(0,2):b,{userLocale:c,defaultLocale:b}}])}(),function(){"use strict";var a={configuration:{general:{warning:"(User configuration is stored in browser cache. Server-side storage will be supported in a future release.)",empty:"Favorite list empty"},alarmRules:{mainStyle:"",title:"Alarm Rule Type",desc:"The following types of alarm rules are supported by Pinpoint.",category:[{title:"[Type]",items:[{name:"SLOW COUNT",desc:"Sends an alarm when the number of slow requests sent by the application exceeds the configured threshold."},{name:"SLOW RATE",desc:"Sends an alarm when the percentage(%) of slow requests sent by the application exceeds the configured threshold."},{name:"ERROR COUNT",desc:"Sends an alarm when the number of failed requests sent by the application exceeds the configured threshold."},{name:"ERROR RATE",desc:"Sends an alarm when the percentage(%) of failed requests sent by the application exceeds the configured threshold."},{name:"TOTAL COUNT",desc:"Sends an alarm when the number of all requests sent by the application exceeds the configured threshold."},{name:"SLOW COUNT TO CALLEE",desc:"Sends an alarm when the number of slow responses returned by the application exceeds the configured threshold."},{name:"SLOW RATE TO CALLEE",desc:"Sends an alarm when the percentage(%) of slow responses returned by the application exceeds the configured threshold."},{name:"ERROR COUNT TO CALLEE",desc:"Sends an alarm when the number of failed responses returned by the application exceeds the configured threshold."},{name:"ERROR RATE TO CALLEE",desc:"Sends an alarm when the percentage(%) of failed responses returned by the application exceeds the configured threshold."},{name:"TOTAL COUNT TO CALLEE",desc:"Sends an alarm when the number of all remote calls sent to the application exceeds the configured threshold."},{name:"HEAP USAGE RATE",desc:"Sends an alarm when the application's heap usage(%) exceeds the configured threshold."},{name:"JVM CPU USAGE RATE",desc:"Sends an alarm when the application's CPU usage(%) exceeds the configured threshold."}]}]}},navbar:{searchPeriod:{guide:"Search duration may not be greater than {{day}} days."},applicationSelector:{mainStyle:"",title:"Application List",desc:"Shows the list of applications with Pinpoint installed.",category:[{title:"[Legend]",items:[{name:"Icon",desc:"Application Type"},{name:"Text",desc:"Application Name. The value set using <code>-Dpinpoint.applicationName</code> when launching Pinpoint agent."}]}]},depth:{mainStyle:"",title:'<img src="images/inbound.png" width="22px" height="22px" style="margin-top:-4px;"> Inbound 와 <img src="images/outbound.png" width="22px" height="22px" style="margin-top:-4px"> Outbound',desc:"Search-depth of server map.",category:[{title:"[범례]",items:[{name:"Inbound",desc:"Number of depth to render for requests coming in to the selected node."},{name:"Outbound",desc:"Number of depth to render for requests going out from the selected node"}]}]},periodSelector:{mainStyle:"",title:"Period Selector",desc:"Selects the time period for querying data.",category:[{title:"[Usage]",items:[{name:"<button type='button' class='btn btn-success btn-xs'><span class='glyphicon glyphicon-th-list'></span></button>",desc:"Query for data traced during the most recent selected time-period.<br/>Auto-refresh is supported for 5m, 10m, 3h time-period."},{name:"<button type='button' class='btn btn-success btn-xs'><span class='glyphicon glyphicon-calendar'></span></button>",desc:"Query for data traced between the two selected times for a maximum of 48 hours."}]}]}},servermap:{"default":{mainStyle:"width:560px;",title:"Server Map",desc:"Displays a topological view of the distributed server map.",category:[{title:"[Node]",list:["Each node is a logical unit of application.","The value on the top-right corner represents the number of server instances assigned to that application. (Not shown when there is only one such instance)","An alarm icon is displayed on the top-left corner if an error/exception is detected in one of the server instances.","Clicking a node shows information on all incoming transactions on the right-hand side of the screen."]},{title:"[Arrow]",list:["Each arrow represents a transaction flow.","The number shows the transaction count and is displayed in red for transactions with error.","<span class='glyphicon glyphicon-filter' style='color:green;'></span> is shown when a filter is applied.","Clicking an arrow shows information on all transactions passing through the selected section on the right-hand side of the screen."]},{title:"[Applying Filter]",list:["Right-clicking on an arrow displays a filter menu.","'Filter' filters the server map to only show transactions that has passed through the selected section.","'Filter Wizard' allows additional filter configurations."]},{title:"[Chart Configuration]",list:["Right-clicking on an empty area displays a chart configuration menu.","Node Setting / Merge Unknown : Groups all agent-less applications into a single node.","Double-clicking on an empty resets the zoom level of the server map."]}]}},realtime:{"default":{mainStyle:"",title:"Realtime Active Thread Chart",desc:"Shows the Active Thread count of each agent in realtime.",category:[{title:"[Error Messages]",items:[{name:"UNSUPPORTED VERSION",desc:"Agent version too old. (Please upgrade the agent to 1.5.0+)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"CLUSTER OPTION NOTSET",desc:"Option disabled by agent. (Please set profiler.pinpoint.activethread to true in profiler.config)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"TIMEOUT",desc:"Agent connection timed out receiving active thread count. Please contact the administrator if problem persists.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"NOT FOUND",desc:"Agent not found. (If you get this message while the agent is running, please set profiler.tcpdatasender.command.accept.enable to true in profiler.config)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"CLUSTER CHANNEL CLOSED",desc:"Agent session expired.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"PINPOINT INTERNAL ERROR",desc:"Pinpoint internal error. Please contact the administrator.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"No Active Thread",desc:"The agent has no threads that are currently active.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"No Response",desc:"No response from Pinpoint Web. Please contact the administrator.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"}]}]}},scatter:{"default":{mainStyle:"",title:"Response Time Scatter Chart",desc:"",category:[{title:"[Legend]",items:[{name:"<span class='glyphicon glyphicon-stop' style='color:#2ca02c'></span>",desc:"Successful Transaction"},{name:"<span class='glyphicon glyphicon-stop' style='color:#f53034'></span>",desc:"Failed Transaction"},{name:"X-axis",desc:"Transaction Timestamp (hh:mm)"},{name:"Y-axis",desc:"Response Time (ms)"}]},{title:"[Usage]",image:"<img src='/images/help/scatter_01.png' width='200px' height='125px'>",items:[{name:"<span class='glyphicon glyphicon-plus'></span>",desc:"Drag on the scatter chart to show detailed information on selected transactions."},{name:"<span class='glyphicon glyphicon-cog'></span>",desc:"Set the min/max value of the Y-axis (Response Time)."},{name:"<span class='glyphicon glyphicon-download-alt'></span>",desc:"Download the chart as an image file."},{name:"<span class='glyphicon glyphicon-fullscreen'></span>",desc:"Open the chart in a new window."}]}]}},nodeInfoDetails:{responseSummary:{mainStyle:"",title:"Response Summary Chart",desc:"",category:[{title:"[Legend]",items:[{name:"X-Axis",desc:"Response Time"},{name:"Y-Axis",desc:"Transaction Count"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"No. of Successful transactions (less than 1 second)"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"No. of Successful transactions (1 ~ 3 seconds)"},{name:"<span style='color:#f8c731'>5s</span>",desc:"No. of Successful transactions (3 ~ 5 seconds)"},{name:"<span style='color:#f69124'>Slow</span>",desc:"No. of Successful transactions (greater than 5 seconds)"},{name:"<span style='color:#f53034'>Error</span>",desc:"No. of Failed transactions regardless of response time"}]}]},load:{mainStyle:"",title:"Load Chart",desc:"",category:[{title:"[Legend]",items:[{name:"X-Axis",desc:"Transaction Timestamp (in minutes)"},{name:"Y-Axis",desc:"Transaction Count"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"No. of Successful transactions (less than 1 second)"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"No. of Successful transactions (1 ~ 3 seconds)"},{name:"<span style='color:#f8c731'>5s</span>",desc:"No. of Successful transactions (3 ~ 5 seconds)"},{name:"<span style='color:#f69124'>Slow</span>",desc:"No. of Successful transactions (greater than 5 seconds)"},{name:"<span style='color:#f53034'>Error</span>",desc:"No. of Failed transactions regardless of response time"}]},{title:"[Usage]",list:["Clicking on a legend item shows/hides all transactions within the selected group.","Dragging on the chart zooms in to the dragged area."]}]},nodeServers:{mainStyle:"width:400px;",title:"Server Information",desc:"List of physical servers and their server instances.",category:[{title:"[Legend]",items:[{name:"<span class='glyphicon glyphicon-home'></span>",desc:"Hostname of the physical server"},{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:"AgentId of the Pinpoint agent installed on the server instance running on the physical server"}]},{title:"[Usage]",items:[{name:"<button type='button' class='btn btn-default btn-xs'>Inspector</button>",desc:"Open a new window with detailed information on the WAS with Pinpoint installed."},{name:"<span class='glyphicon glyphicon-record' style='color:#3B99FC'></span>",desc:"Display statistics on transactions carried out by the server instance."},{name:"<span class='glyphicon glyphicon-hdd' style='color:red'></span>",desc:"Display statistics on transactions (with error) carried out by the server instance."}]}]},unknownList:{mainStyle:"",title:"UnknownList",desc:"From the chart's top-right icon",category:[{title:"[Usage]",items:[{name:"1st",desc:"Toggle between Response Summary Chart / Load Chart"},{name:"2nd",desc:"Show Node Details"}]}]},searchAndOrder:{mainStyle:"",title:"Search and Fliter",desc:"Filter by server name or total count.Clicking Name or Count sorts the list in ascending/descending order."}},linkInfoDetails:{responseSummary:{mainStyle:"",title:"Response Summary Chart",desc:"",category:[{title:"[Legend]",items:[{name:"X-Axis",desc:"Response Time"},{name:"Y-Axis",desc:"Transaction Count"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"No. of Successful transactions (less than 1 second)"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"No. of Successful transactions (1 ~ 3 seconds)"},{name:"<span style='color:#f8c731'>5s</span>",desc:"No. of Successful transactions (3 ~ 5 seconds)"},{name:"<span style='color:#f69124'>Slow</span>",desc:"No. of Successful transactions (greater than 5 seconds)"},{name:"<span style='color:#f53034'>Error</span>",desc:"No. of Failed transactions regardless of response time"}]},{title:"[Usage]",list:["Click on the bar to query for transactions within the selected response time."]}]},load:{mainStyle:"",title:"Load Chart",desc:"",category:[{title:"[Legend]",items:[{name:"X-Axis",desc:"Transaction Timestamp (in minutes)"},{name:"Y-Axis",desc:"Transaction Count"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"No. of Successful transactions (less than 1 second)"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"No. of Successful transactions (1 ~ 3 seconds)"},{name:"<span style='color:#f8c731'>5s</span>",desc:"No. of Successful transactions (3 ~ 5 seconds)"},{name:"<span style='color:#f69124'>Slow</span>",desc:"No. of Successful transactions (greater than 5 seconds)"},{name:"<span style='color:#f53034'>Error</span>",desc:"No. of Failed transactions regardless of response time"}]},{title:"[Usage]",list:["Clicking on a legend item shows/hides all transactions within the selected group.","Dragging on the chart zooms in to the dragged area."]}]},linkServers:{mainStyle:"width:350px;",title:"Server Information",desc:"List of physical servers and their server instances.",category:[{title:"[Legend]",items:[{name:"<span class='glyphicon glyphicon-home'></span>",desc:"Hostname of the physical server"},{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:"AgentId of the Pinpoint agent installed on the server instance running on the physical server"}]},{title:"[Usage]",items:[{name:"<button type='button' class='btn btn-default btn-xs'>Inspector</button>",desc:"Open a new window with detailed information on the WAS with Pinpoint installed."},{name:"<button type='button' class='btn btn-default btn-xs'><span class='glyphicon glyphicon-plus'></span></button>",desc:"Display statistics on transactions carried out by the server instance."},{name:"<button type='button' class='btn btn-danger btn-xs'><span class='glyphicon glyphicon-plus'></span></button>",desc:"Display statistics on transactions (with error) carried out by the server instance."}]}]},unknownList:{mainStyle:"",title:"UnknownList",desc:"From the chart's top-right icon,",category:[{title:"[Usage]",items:[{name:"1st",desc:"Toggle between Response Summary Chart"},{name:"2dn",desc:"Show Node Details"}]}]},searchAndOrder:{mainStyle:"",title:"Search and Filter",desc:"Filter by server name or total count.<br/>Clicking Name or Count sorts the list in ascending/descending order."}},inspector:{list:{mainStyle:"",title:"Agent list",desc:"List of agents registered under the current Application Name",category:[{title:"[Legend]",items:[{name:"<span class='glyphicon glyphicon-home'></span>",desc:"Hostname of the agent's machine"},{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:"Agent-id of the installed agent"},{name:"<span class='glyphicon glyphicon-ok-sign' style='color:#40E340'></span>",desc:"Agent was running at the time of query"},{name:"<span class='glyphicon glyphicon-minus-sign' style='color:#F00'></span>",desc:"Agent was shutdown at the time of query"},{name:"<span class='glyphicon glyphicon-remove-sign' style='color:#AAA'></span>",desc:"Agent was disconnected at the time of query"},{name:"<span class='glyphicon glyphicon-question-sign' style='color:#AAA'></span>",desc:"Agent status was unknown at the time of query"}]}]},heap:{mainStyle:"",title:"Heap",desc:"JVM's heap information and full garbage collection times(if any)",category:[{title:"[Legend]",items:[{name:"Max",desc:"Maximum heap size"},{name:"Used",desc:"Heap currently in use"},{name:"FCG",desc:"Full garbage collection duration (number of FGCs in parenthesis if it occurred more than once)"}]}]},permGen:{mainStyle:"",title:"PermGen",desc:"JVM's PermGen information and full garbage collection times(if any)",category:[{title:"[Legend]",items:[{name:"Max",desc:"Maximum heap size"},{name:"Used",desc:"Heap currently in use"},{name:"FCG",desc:"Full garbage collection duration (number of FGCs in parenthesis if it occurred more than once)"}]}]},cpuUsage:{mainStyle:"",title:"Cpu Usage",desc:"JVM/System's CPU Usage - For multi-core CPUs, displays the average CPU usage of all the cores",category:[{title:"[Legend]",items:[{name:"Java 1.6",desc:"Only the JVM's CPU usage is collected"},{name:"Java 1.7+",desc:"Both the JVM's and the system's CPU usage are collected"}]}]},tps:{mainStyle:"",title:"TPS",desc:"Transactions per second received by the server",category:[{title:"[Legend]",items:[{name:"Sampled New (S.N)",desc:"Profiled transactions that started from the current agent"},{name:"Sampled Continuation (S.C)",desc:"Profiled transactions that started from another agent"},{name:"Unsampled New (U.N)",desc:"Unprofiled transactions that started from the current agent"},{name:"Unsampled Continuation (U.C)",desc:"Unprofiled transactions that started from another agent"},{name:"Total",desc:"All transactions"}]}]},wrongApp:["<div style='font-size:12px'>The agent is currently registered under {{application2}} due to the following:<br>","1. The agent has moved from {{application1}} to {{application2}}<br>","2. A different agent with the same agent id has been registered to {{application2}}<hr>","For the former case, you should delete the mapping between {{application1}} and {{agentId}}.<br>","For the latter case, the agent id of the duplicate agent must be changed.</div>"].join("")},callTree:{column:{mainStyle:"",title:"Call Tree",desc:"",category:[{title:"[Column]",items:[{name:"Gap",desc:"Time elapsed between the start of the previous method and entry of this method"},{name:"Exec",desc:"The overall duration of the method call from method entry until method exit"},{name:"Exec(%)",desc:"<img src='/images/help/callTree_01.png'/>"},{name:"",desc:"<span style='background-color:#FFFFFF;color:#5bc0de'>Light blue</span> The execution time of the method call as a percentage of the total execution time of the transaction"},{name:"",desc:"<span style='background-color:#FFFFFF;color:#4343C8'>Dark blue</span> A percentage of the self execution time"},{name:"Self",desc:"The time that was used for execution of this method only, excluding time consumed in nested methods call"}]}]}},transactionTable:{log:{}},transactionList:{openError:{noParent:"Scatter data of parent window had been changed.\r\nso can't scan the data any more.",noData:"There is no {{application}} scatter data in parent window."}}};pinpointApp.constant("helpContent-en",a)}(),function(){"use strict";var a={configuration:{general:{warning:"(설정 정보는 브라우저 캐쉬에 저장합니다. 서버 측 저장은 추후 지원 할 예정입니다.)",empty:"등록된 목록이 없습니다."},alarmRules:{mainStyle:"",title:"알람 룰의 종류",desc:"Pinpoint에서 지원하는 Alarm rule의 종류는 아래와 같습니다.",category:[{title:"[항목]",items:[{name:"SLOW COUNT",desc:"application 내에서 외부서버를 호출한 요청 중 slow 호출의 개수가 임계치를 초과한 경우 알람이 전송된다."},{name:"SLOW RATE",desc:"application 내에서 외부서버를 호출한 요청 중 slow 호출의 비율(%)이 임계치를 초과한 경우 알람이 전송된다."},{name:"ERROR COUNT",desc:"application 내에서 외부서버를 호출한 요청 중 error 가 발생한 호출의 개수가 임계치를 초과한 경우 알람이 전송된다."},{name:"ERROR RATE",desc:"application 내에서 외부서버를 호출한 요청 중 error 가 발생한 호출의 비율이 임계치를 초과한 경우 알람이 전송된다."},{name:"TOTAL COUNT",desc:"application 내에서 외부서버를 호출한 요청의 개수가 임계치를 초과한 경우 알람이 전송된다."},{name:"SLOW COUNT TO CALLEE",desc:"외부에서 application을 호출한 요청 중에 외부서버로 응답을 늦게 준 요청의 개수가 임계치를 초과한 경우 알람이 전송된다."},{name:"SLOW RATE TO CALLEE",desc:"외부에서 application을 호출한 요청 중에 외부서버로 응답을 늦게 준 요청의 비율(%)이 임계치를 초과한 경우 알람이 전송된다."},{name:"ERROR COUNT TO CALLEE",desc:"외부에서 application을 호출한 요청 중에 에러가 발생한 요청의 개수가 임계치를 초과한 경우 알람이 전송된다."},{name:"ERROR RATE TO CALLEE",desc:"외부에서 application을 호출한 요청 중에 에러가 발생한 요청의 비율(%)이 임계치를 초과한 경우 알람이 전송된다."},{name:"TOTAL COUNT TO CALLEE",desc:"외부에서 application을 호출한 요청 개수가 임계치를 초과한 경우 알람이 전송된다."},{name:"HEAP USAGE RATE",desc:"heap의 사용률이 임계치를 초과한 경우 알람이 전송된다."},{name:"JVM CPU USAGE RATE",desc:"applicaiton의 CPU 사용률이 임계치를 초과한 경우 알람이 전송된다."}]}]}},navbar:{searchPeriod:{guide:"한번에 검색 할 수 있는 최대 기간은 {{day}}일 입니다."},applicationSelector:{mainStyle:"",title:"응용프로그램 목록",desc:"핀포인트가 설치된 응용프로그램 목록입니다.",category:[{title:"[범례]",items:[{name:"아이콘",desc:"응용프로그램의 종류"},{name:"텍스트",desc:"응용프로그램의 이름입니다. Pinpoint agent 설정에서 applicationName에 지정한 값입니다."}]}]},depth:{mainStyle:"",title:'<img src="images/inbound.png" width="22px" height="22px" style="margin-top:-4px;"> Inbound 와 <img src="images/outbound.png" width="22px" height="22px" style="margin-top:-4px"> Outbound',desc:"서버맵의 탐색 깊이를 설정합니다.",category:[{title:"[범례]",items:[{name:"Inbound",desc:"선택된 노드를 기준으로 들어오는 탐색깊이"},{name:"Outbound",desc:"선택된 노드를 기준으로 나가는 탐색 깊이"}]}]},periodSelector:{mainStyle:"",title:"조회 시간 설정",desc:"데이터 조회 시간을 선택합니다.",category:[{title:"[범례]",items:[{name:"<button type='button' class='btn btn-success btn-xs'><span class='glyphicon glyphicon-th-list'></span></button>",desc:"현재 시간을 기준으로 선택한 시간 이전부터 현재시간 사이에 수집된 데이터를 조회합니다.<br/>최근 5m, 10m, 3h조회는 자동 새로고침 기능을 지원합니다."},{name:"<button type='button' class='btn btn-success btn-xs'><span class='glyphicon glyphicon-calendar'></span></button>",desc:"지정된 시간 사이에 수집된 데이터를 조회합니다. 조회 시간은 분단위로 최대 48시간을 지정할 수 있습니다."}]}]}},servermap:{"default":{mainStyle:"width:560px;",title:"서버맵",desc:"분산된 서버를 도식화 한 지도 입니다.",category:[{title:"[박스]",list:["박스는 응용프로그램 그룹을 나타냅니다.","우측의 숫자는 응용프로그램 그룹에 속한 서버 인스턴스의 개수입니다.(한 개일 때에는 숫자를 보여주지 않습니다.)","좌측 빨간 알람은 임계값을 초과한 모니터링 항목이 있을 때 나타납니다."]},{title:"[화살표]",list:["화살표는 트랜잭션의 흐름을 나타냅니다.","화살표의 숫자는 호출 수 입니다. 임계치 이상의 에러를 포함하면 빨간색으로 보여집니다.","<span class='glyphicon glyphicon-filter' style='color:green;'></span> : 필터가 적용되면 아이콘이 표시됩니다."]},{title:"[박스의 기능]",list:["박스를 선택하면 어플리케이션으로 유입된 트랜잭션 정보를 화면 우측에 보여줍니다."]},{title:"[화살표의 기능]",list:["화살표를 선택하여 선택된 구간을 통과하는 트랜잭션의 정보를 화면 우측에 보여줍니다.","Context menu의 Filter는 선택된 구간을 통과하는 트랜잭션만 모아서 보여줍니다.","Filter wizard는 보다 상세한 필터 설정을 할 수 있습니다.","필터가 적용되면 화살표에 <span class='glyphicon glyphicon-filter' style='color:green;'></span>아이콘이 표시됩니다."]},{title:"[차트 설정]",list:["비어있는 부분을 마우스 오른쪽 클릭하여 context menu를 열면 차트 설정메뉴가 보입니다.","Node Setting / Merge Unknown : agent가 설치되어있지 않은 응용프로그램을 하나의 박스로 보여줍니다.","비어있는 부분 더블클릭 : 줌을 초기화 합니다."]}]}},realtime:{"default":{mainStyle:"",title:"Realtime Active Thread Chart",desc:"각 Agent의 Active Thread 갯수를 실시간으로 보여줍니다.",category:[{title:"[에러 메시지 설명]",items:[{name:"UNSUPPORTED VERSION",desc:"해당 에이전트의 버전에서는 지원하지 않는 기능입니다. (1.5.0 이상 버전으로 업그레이드하세요.)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"CLUSTER OPTION NOTSET",desc:"해당 에이전트의 설정에서 기능이 비활성화되어 있습니다. (pinpoint 설정 파일에서 profiler.pinpoint.activethread 항목을 true로 변경하세요.)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"TIMEOUT",desc:"해당 에이전트에서 일시적으로 활성화 된 스레드 개수를 받지 못하였습니다.(오래 지속될 경우 담당자에게 문의하세요.)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"NOT FOUND",desc:"해당 에이전트를 찾을 수 없습니다.(에이전트가 활성화 되어 있는 경우에 해당 메시지가 발생한다면 pinpoint 설정 파일에서 profiler.tcpdatasender.command.accept.enable 항목을 true로 변경하세요.)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"CLUSTER CHANNEL CLOSED",desc:"해당 에이전트와의 세션이 종료되었습니다.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"PINPOINT INTERNAL ERROR",desc:"핀포인트 내부 에러가 발생하였습니다.(담당자에게 문의하세요.)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"
},{name:"No Active Thread",desc:"현재 해당 에이전트는 활성화된 스레드가 존재하지 않습니다.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"No Response",desc:"핀포인트 웹 서버로부터의 응답을 받지 못하였습니다.(담당자에게 문의하세요.)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"}]}]}},scatter:{"default":{mainStyle:"",title:"Response Time Scatter Chart",desc:"수집된 트랜잭션의 응답시간 분포도입니다.",category:[{title:"[범례]",items:[{name:"<span class='glyphicon glyphicon-stop' style='color:#2ca02c'></span>",desc:"에러가 없는 트랜잭션 (Success)"},{name:"<span class='glyphicon glyphicon-stop' style='color:#f53034'></span>",desc:"에러를 포함한 트랜잭션 (Failed)"},{name:"X축",desc:"트랜잭션이 실행된 시간 (시:분)"},{name:"Y축",desc:"트랜잭션의 응답 속도 (ms)"}]},{title:"[기능]",image:"<img src='/images/help/scatter_01.png' width='200px' height='125px'>",items:[{name:"<span class='glyphicon glyphicon-plus'></span>",desc:"마우스로 영역을 드래그하여 드래그 된 영역에 속한 트랜잭션의 상세정보를 조회할 수 있습니다."},{name:"<span class='glyphicon glyphicon-cog'></span>",desc:"에러를 포함한 트랜잭션 (Failed)"},{name:"X축",desc:"응답시간(Y축)의 최대 또는 최소값을 변경할 수 있습니다."},{name:"<span class='glyphicon glyphicon-download-alt'></span>",desc:"차트를 새창으로 크게 보여줍니다."}]}]}},nodeInfoDetails:{responseSummary:{mainStyle:"",title:"Response Summary Chart",desc:"응답결과 요약 입니다.",category:[{title:"[범례]",items:[{name:"X축",desc:"트랜잭션 응답시간 요약 단위"},{name:"Y축",desc:"트랜잭션의 개수"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"<span class='label label-info'>0초 <= 응답시간 < 1초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"<span class='label label-info'>1초 <= 응답시간 < 3초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f8c731'>5s</span>",desc:"<span class='label label-info'>3초 <= 응답시간 < 5초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f69124'>Slow</span>",desc:"<span class='label label-info'>5초 <= 응답시간</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f53034'>Error</span>",desc:"응답시간과 무관하게 실패한 트랜잭션의 수"}]}]},load:{mainStyle:"",title:"Load Chart",desc:"시간별 트랜잭션의 응답 결과입니다.",category:[{title:"[범례]",items:[{name:"X축",desc:"트랜잭션이 실행된 시간 (분단위)"},{name:"Y축",desc:"트랜잭션의 개수"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"<span class='label label-info'>0초 <= 응답시간 < 1초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"<span class='label label-info'>1초 <= 응답시간 < 3초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f8c731'>5s</span>",desc:"<span class='label label-info'>3초 <= 응답시간 < 5초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f69124'>Slow</span>",desc:"<span class='label label-info'>5초 <= 응답시간</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f53034'>Error</span>",desc:"응답시간과 무관하게 실패한 트랜잭션의 수"}]},{title:"[기능]",list:["범례를 클릭하여 해당 응답시간에 속한 트랜잭션을 차트에서 제외하거나 포함 할 수 있습니다.","마우스로 드래그하여 드래그 한 범위를 확대할 수 있습니다."]}]},nodeServers:{mainStyle:"width:400px;",title:"Server Information",desc:"물리서버와 해당 서버에서 동작중인 서버 인스턴스의 정보를 보여줍니다.",category:[{title:"[범례]",items:[{name:"<span class='glyphicon glyphicon-home'></span>",desc:"물리서버의 호스트이름입니다."},{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:"물리서버에 설치된 서버 인스턴스에서 동작중인 Pinpoint의 agentId입니다."}]},{title:"[기능]",items:[{name:"<button type='button' class='btn btn-default btn-xs'>Inspector</button>",desc:"Pinpoint가 설치된 WAS의 상세한 정보를 보여줍니다."},{name:"<span class='glyphicon glyphicon-record' style='color:#3B99FC'></span>",desc:"해당 인스턴스에서 처리된 트랜잭션 통계를 조회할 수 있습니다."},{name:"<span class='glyphicon glyphicon-hdd' style='color:red'></span>",desc:"에러를 발생시킨 트랜잭션이 포함되어있다는 의미입니다."}]}]},unknownList:{mainStyle:"",title:"UnknownList",desc:"차트 오른쪽 상단의 아이콘부터",category:[{title:"[기능]",items:[{name:"첫번째",desc:"Response Summary"},{name:"두번째",desc:"해당 노드 상세보기"}]}]},searchAndOrder:{mainStyle:"",title:"검색과 필터링",desc:"서버 이름과 Count로 검색이 가능합니다.",category:[{title:"[기능]",items:[{name:"Name",desc:"이름을 오름/내림차순 정렬 합니다."},{name:"Count",desc:"갯수를 오름/내림차순 정렬 합니다."}]}]}},linkInfoDetails:{responseSummary:{mainStyle:"",title:"Response Summary Chart",desc:"응답결과 요약 입니다.",category:[{title:"[범례]",items:[{name:"X축",desc:"트랜잭션 응답시간 요약 단위"},{name:"Y축",desc:"트랜잭션의 개수"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"<span class='label label-info'>0초 <= 응답시간 < 1초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"<span class='label label-info'>1초 <= 응답시간 < 3초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f8c731'>5s</span>",desc:"<span class='label label-info'>3초 <= 응답시간 < 5초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f69124'>Slow</span>",desc:"<span class='label label-info'>5초 <= 응답시간</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f53034'>Error</span>",desc:"응답시간과 무관하게 실패한 트랜잭션의 수"}]},{title:"[기능]",list:["바(bar)를 클릭하면 해당 응답시간에 속한 트랜잭션의 목록을 조회합니다."]}]},load:{mainStyle:"",title:"Load Chart",desc:"시간별 트랜잭션의 응답 결과입니다.",category:[{title:"[범례]",items:[{name:"X축",desc:"트랜잭션이 실행된 시간 (분단위)"},{name:"Y축",desc:"트랜잭션의 개수"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"<span class='label label-info'>0초 <= 응답시간 < 1초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"<span class='label label-info'>1초 <= 응답시간 < 3초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f8c731'>5s</span>",desc:"<span class='label label-info'>3초 <= 응답시간 < 5초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f69124'>Slow</span>",desc:"<span class='label label-info'>5초 <= 응답시간</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f53034'>Error</span>",desc:"응답시간과 무관하게 실패한 트랜잭션의 수"}]},{title:"[기능]",list:["범례를 클릭하여 해당 응답시간에 속한 트랜잭션을 차트에서 제외하거나 포함 할 수 있습니다.","마우스로 드래그하여 드래그 한 범위를 확대할 수 있습니다."]}]},linkServers:{mainStyle:"width:350px;",title:"Server Information",desc:"해당 구간을 통과하는 트랜잭션을 호출한 서버 인스턴스의 정보입니다. (호출자)",category:[{title:"[범례]",items:[{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:"물리서버에 설치된 서버 인스턴스에서 동작중인 Pinpoint의 agentId입니다."}]},{title:"[기능]",items:[{name:"<button type='button' class='btn btn-default btn-xs'>Inspector</button>",desc:"Pinpoint가 설치된 WAS의 상세한 정보를 보여줍니다."},{name:"<button type='button' class='btn btn-default btn-xs'><span class='glyphicon glyphicon-plus'></span></button>",desc:"해당 인스턴스에서 처리된 트랜잭션 통계를 조회할 수 있습니다."},{name:"<button type='button' class='btn btn-danger btn-xs'><span class='glyphicon glyphicon-plus'></span></button>",desc:"에러를 발생시킨 트랜잭션이 포함되어있다는 의미입니다."}]}]},unknownList:{mainStyle:"",title:"UnknownList",desc:"차트 오른쪽 상단의 아이콘부터",category:[{title:"[기능]",items:[{name:"첫번째",desc:"Response Summary"},{name:"두번째",desc:"해당 노드 상세보기"}]}]},searchAndOrder:{mainStyle:"",title:"검색과 필터링",desc:"서버 이름과 Count로 검색이 가능합니다.",category:[{title:"[기능]",items:[{name:"Name",desc:"이름을 오름/내림차순 정렬 합니다."},{name:"Count",desc:"갯수를 오름/내림차순 정렬 합니다."}]}]}},inspector:{list:{mainStyle:"",title:"Agent 리스트",desc:"현 Appliation Name에 등록된 agent 리스트입니다.",category:[{title:"[범례]",items:[{name:"<span class='glyphicon glyphicon-home'></span>",desc:"Agent가 설치된 장비의 호스트 이름"},{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:"설치된 agent의 agent-id"},{name:"<span class='glyphicon glyphicon-ok-sign' style='color:#40E340'></span>",desc:"정상적으로 실행중인 agent 상태 표시"},{name:"<span class='glyphicon glyphicon-minus-sign' style='color:#F00'></span>",desc:"Shutdown 된 agent 상태 표시"},{name:"<span class='glyphicon glyphicon-remove-sign' style='color:#AAA'></span>",desc:"연결이 끊긴 agent 상태 표시"},{name:"<span class='glyphicon glyphicon-question-sign' style='color:#AAA'></span>",desc:"알수 없는 상태의 agent 상태 표시"}]}]},heap:{mainStyle:"",title:"Heap",desc:"JVM의 heap 정보와 full garbage collection 소요 시간",category:[{title:"[범례]",items:[{name:"Max",desc:"최대 heap 사이즈"},{name:"Used",desc:"현재 사용 중인 heap 사이즈"},{name:"FCG",desc:"Full garbage collection의 총 소요 시간(2번 이상 발생 시, 괄호 안에 발생 횟수 표시)"}]}]},permGen:{mainStyle:"",title:"PermGen",desc:"JVM의 PermGen 정보와 full garbage collection 소요 시간",category:[{title:"[범례]",items:[{name:"Max",desc:"최대 heap 사이즈"},{name:"Used",desc:"현재 사용 중인 heap 사이즈"},{name:"FCG",desc:"Full garbage collection의 총 소요 시간(2번 이상 발생 시, 괄호 안에 발생 횟수 표시)"}]}]},cpuUsage:{mainStyle:"",title:"Cpu Usage",desc:"JVM과 시스템의 CPU 사용량 - 멀티코어 CPU의 경우, 전체 코어 사용량의 평균입니다.",category:[{title:"[범례]",items:[{name:"Java 1.6",desc:"JVM의 CPU 사용량만 수집됩니다."},{name:"Java 1.7+",desc:"JVM과 전체 시스템의 CPU 사용량 모두 수집됩니다."}]}]},tps:{mainStyle:"",title:"TPS",desc:"서버로 인입된 초당 트랜잭션 수",category:[{title:"[범례]",items:[{name:"Sampled New (S.N)",desc:"선택된 agent에서 시작한 샘플링된 트랜잭션"},{name:"Sampled Continuation (S.C)",desc:"다른 agent에서 시작한 샘플링된 트랜잭션"},{name:"Unsampled New (U.N)",desc:"선택된 agent에서 시작한 샘플링되지 않은 트랜잭션"},{name:"Unsampled Continuation (U.C)",desc:"다른 agent에서 시작한 샘플링되지 않은 트랜잭션"},{name:"Total",desc:"모든 트랜잭션"}]}]},wrongApp:["<div style='font-size:12px'>해당 agent는 {{application1}}이 아닌 {{application2}}에 포함되어 있습니다.<br>","원인은 다음 중 하나입니다.<hr>","1. 해당 agent가 {{application1}}에서 {{application2}}으로 이동한 경우<br>","2.{{agentId}}의 agent가 {{application2}}에도 등록 된 경우<hr>","1의 경우 {{application1}}과 {{agentId}}간의 매핑 저보를 삭제해야 합니다<br>","2의 경우 중복 등록 된 agent의 id를 변경해야 합니다.</div>"].join("")},callTree:{column:{mainStyle:"",title:"Call Tree",desc:"Call Tree의 컬럼명을 설명합니다.",category:[{title:"[컬럼]",items:[{name:"Gap",desc:"이전 메소드가 시작된 후 현재 메소드를 실행하기 까지의 지연 시간"},{name:"Exec",desc:"메소드 시작부터 종료까지의 시간"},{name:"Exec(%)",desc:"<img src='/images/help/callTree_01.png'/>"},{name:"",desc:"<span style='background-color:#FFFFFF;color:#5bc0de'>옅은 파란색</span><br/>트랜잭션 전체 실행 시간 대 exec 시간의 비율"},{name:"",desc:"<span style='background-color:#FFFFFF;color:#4343C8'>진한 파란색</span><br/>self 시간 비율"},{name:"Self",desc:"메소드 자체의 시작부터 종료까지의 시간으로 하위의 메소드가 실행된 시간을 제외한 값"}]}]}},transactionTable:{log:{}},transactionList:{openError:{noParent:"부모 윈도우의 scatter chart 정보가 변경되어 더 이상 transaction 정보를 표시할 수 없습니다.",noData:"부모 윈도우에 {{application}} scatter chart 정보가 없습니다."}}};pinpointApp.constant("helpContent-ko",a)}(),function(){"use strict";var a=['<div class="pinpoint-tooltip" style="{{mainStyle}}">',"<dl>","<dt>{{{title}}}</dt>","<dd>{{{desc}}}</dd>","</dl>","{{#if category}}<hr/>{{/if}}","{{#each category}}","<p>{{title}}</p>",'{{#if image}}<p style="text-align:center">{{{image}}}</p>{{/if}}',"{{#if items}}","<table>","{{#each items}}","<tr>",'<td style="{{nameStyle}}">{{{name}}}</td>','<td style="{{descStyle}}">{{{desc}}}</td>',"</tr>","{{/each}}","</table>","{{/if}}","{{#if list}}","<ul>","{{#each list}}","<li>{{{this}}}</li>","{{/each}}","</ul>","{{/if}}","{{/each}}","</div>"].join(""),b=Handlebars.compile(a);pinpointApp.constant("helpContentTemplate",b)}(),function(){"use strict";pinpointApp.factory("helpContentService",["$window","$injector","UserLocalesService",function(a,b,c){var d="helpContent-"+c.userLocale,e="helpContent-"+c.defaultLocale;return b.has(d)?b.get(d):b.get(e)}])}(),function(a){"use strict";pinpointApp.service("AnalyticsService",["$rootScope","globalConfig",function(a,b){"undefined"!=typeof ga&&(this.send=function(a,c,d,e,f){b.sendAllowed!==!1&&(1==arguments.length?ga("send","pageview",arguments[0]):ga("send","event",a,c,d,e,f))}),this.CONST={},this.CONST.MAIN="Main",this.CONST.CONTEXT="Context",this.CONST.CALLSTACK="CallStack",this.CONST.MIXEDVIEW="MixedView",this.CONST.INSPECTOR="Inspector",this.CONST.CLK_APPLICATION="ClickApplication",this.CONST.CLK_TIME="ClickTime",this.CONST.CLK_SEARCH_NODE="ClickSearchNode",this.CONST.CLK_CLEAR_SEARCH="ClickClearSearch",this.CONST.CLK_NODE="ClickNode",this.CONST.CLK_LINK="ClickLink",this.CONST.CLK_UPDATE_TIME="ClickUpdateTime",this.CONST.CLK_HELP="ClickHelp",this.CONST.CLK_SCATTER_SETTING="ClickScatterSetting",this.CONST.CLK_DOWNLOAD_SCATTER="ClickDownloadScatter",this.CONST.CLK_RESPONSE_GRAPH="ClickResponseGraph",this.CONST.CLK_LOAD_GRAPH="ClickLoadGraph",this.CONST.CLK_SHOW_GRAPH="ClickShowGraph",this.CONST.CLK_SHOW_SERVER_LIST="ClickShowServerList",this.CONST.CLK_OPEN_INSPECTOR="ClickOpenInspector",this.CONST.CLK_FILTER_TRANSACTION="ClickFilterTransaction",this.CONST.CLK_FILTER_TRANSACTION_WIZARD="ClickFilterTransactionWizard",this.CONST.CLK_MORE="ClickMore",this.CONST.CLK_DISTRIBUTED_CALL_FLOW="ClickDistributedCallFlow",this.CONST.CLK_SERVER_MAP="ClickServerMap",this.CONST.CLK_RPC_TIMELINE="ClickRPCTimeline",this.CONST.CLK_CALL="ClickCall",this.CONST.CLK_TRANSACTION="ClickTransaction",this.CONST.CLK_HEAP="ClickHeap",this.CONST.CLK_PERM_GEN="ClickPermGen",this.CONST.CLK_CPU_LOAD="ClickCpuLoad",this.CONST.CLK_REFRESH="ClickRefresh",this.CONST.CLK_CALLEE_RANGE="ClickCalleeRange",this.CONST.CLK_CALLER_RANGE="ClickCallerRange",this.CONST.CLK_REALTIME_CHART_HIDE="ClickRealtimeChartHide",this.CONST.CLK_REALTIME_CHART_SHOW="ClickRealtimeChartShow",this.CONST.CLK_REALTIME_CHART_PIN_ON="ClickRealtimeChartPinOn",this.CONST.CLK_REALTIME_CHART_PIN_OFF="ClickRealtimeChartPinOff",this.CONST.CLK_SHOW_SERVER_TYPE_DETAIL="ClickShowServerTypeDetail",this.CONST.CLK_CHANGE_AGENT_INSPECTOR="ClickChangeAgentInspector",this.CONST.CLK_CHANGE_AGENT_MAIN="ClickChangeAgentMain",this.CONST.CLK_START_REALTIME="ClickStartRealtime",this.CONST.CLK_CONFIGURATION="ClickConfiguration",this.CONST.CLK_GENERAL="ClickConfigurationGeneral",this.CONST.CLK_ALARM="ClickConfigurationAlarm",this.CONST.CLK_HELP="ClickConfigurationHelp",this.CONST.CLK_GENERAL_SET_DEPTH="ClickGeneralSetDepth",this.CONST.CLK_GENERAL_SET_PERIOD="ClickGeneralSetPeriod",this.CONST.CLK_GENERAL_SET_FAVORITE="ClickGeneralSetFavorite",this.CONST.CLK_ALARM_CREATE_USER_GROUP="ClickAlarmCreateUserGroup",this.CONST.CLK_ALARM_REFRESH_USER_GROUP="ClickAlarmRefreshUserGroup",this.CONST.CLK_ALARM_FILTER_USER_GROUP="ClickAlarmFilterUserGroup",this.CONST.CLK_ALARM_ADD_USER="ClickAlarmAddUser",this.CONST.CLK_ALARM_REFRESH_USER="ClickAlarmRefreshUser",this.CONST.CLK_ALARM_FILTER_USER="ClickAlarmFilterUser",this.CONST.CLK_ALARM_CREATE_PINPOINT_USER="ClickAlarmCreatePinpointUser",this.CONST.CLK_ALARM_REFRESH_PINPOINT_USER="ClickAlarmRefreshPinpointUser",this.CONST.CLK_ALARM_FILTER_PINPOINT_USER="ClickAlarmFilterPinpointUser",this.CONST.CLK_ALARM_CREATE_RULE="ClickAlarmCreateUserGroup",this.CONST.CLK_ALARM_REFRESH_RULE="ClickAlarmRefreshUserGroup",this.CONST.CLK_ALARM_FILTER_RULE="ClickAlarmFilterUserGroup",this.CONST.TG_DATE="ToggleDate",this.CONST.TG_UPDATE_ON="ToggleUpdateOn",this.CONST.TG_UPDATE_OFF="ToggleUpdateOff",this.CONST.TG_NODE_VIEW="ToggleNodeView",this.CONST.TG_SCATTER_SUCCESS="ToggleScatterSuccess",this.CONST.TG_SCATTER_FAILED="ToggleScatterFailed",this.CONST.TG_MERGE_TYPE="ToggleMergeType",this.CONST.TG_CALL_COUNT="ToggleCallCount",this.CONST.TG_TPS="ToggleTPS",this.CONST.TG_ROUTING="ToggleRouting",this.CONST.TG_CURVE="ToggleCurve",this.CONST.TG_REALTIME_CHART_RESIZE="ToggleRealtimeChartResize",this.CONST.ST_="Sort",this.CONST.ASCENDING="ascending",this.CONST.DESCENDING="descending",this.CONST.ON="on",this.CONST.OFF="off",this.CONST.MAIN_PAGE="/main.page",this.CONST.FILTEREDMAP_PAGE="/filteredMap.page",this.CONST.INSPECTOR_PAGE="/inspector.page",this.CONST.SCATTER_FULL_SCREEN_PAGE="/scatterFullScreen.page",this.CONST.TRANSACTION_DETAIL_PAGE="/transactionDetail.page",this.CONST.TRANSACTION_LIST_PAGE="/transactionList.page",this.CONST.TRANSACTION_VIEW_PAGE="/transactionView.page"}])}(jQuery),function(){"use strict";pinpointApp.constant("RealtimeWebsocketServiceConfig",{wsUrl:"/agent/activeThread.pinpointws",wsTimeout:1e4,retryTimeout:3e3,maxRetryCount:1}),pinpointApp.service("RealtimeWebsocketService",["RealtimeWebsocketServiceConfig",function(a){function b(){i=new WebSocket("ws://"+location.host+a.wsUrl),i.onopen=function(a){g=h=Date.now(),c(),f.onopen(a)},i.onmessage=function(a){h=Date.now(),f.onmessage(JSON.parse(a.data))},i.onclose=function(a){console.log("onClose websocket",a),i=null,d(),f.onclose(a),e()}}function c(){j=setInterval(function(){null!==h&&(Date.now()-h<a.wsTimeout||f.ondelay())},1e3)}function d(){clearInterval(j)}function e(){null!==g&&g===h&&Date.now()-g<a.retryTimeout&&k<a.maxRetryCount&&(console.log("retry websocket connection"),k++,f.retry())}var f,g=null,h=null,i=null,j=null,k=0;this.open=function(a){return i=null,f=a,angular.isDefined(WebSocket)?(b(),!0):!1},this.isOpened=function(){return null!==i},this.close=function(){null!==i&&i.close(),i=null},this.send=function(a){null!==i&&i.send(a)},this.stopReceive=function(a){null!==i&&i.send(a),d()}}])}(),function(){"use strict";pinpointApp.constant("PreferenceServiceConfig",{names:{favorite:"preference.favorite"},defaults:{callee:1,caller:1,period:"5m"},list:[{name:"caller",type:"number"},{name:"callee",type:"number"},{name:"period",type:"string"}],cst:{periodTypes:["5m","20m","1h","3h","6h","12h","1d","2d"],depthList:[1,2,3,4],maxFavorite:5e3,maxPeriod:2,realtimeScatterPeriod:3e5,responseType:["1s","3s","5s","Slow","Error"],responseTypeColor:["#2ca02c","#3c81fa","#f8c731","#f69124","#f53034"],agentAllStr:"All"}}),pinpointApp.service("PreferenceService",["PreferenceServiceConfig","webStorage",function(a,b){function c(){b.add(a.names.favorite,JSON.stringify(g))}function d(){jQuery.each(a.list,function(c,d){var g=d.name;switch(f[g]=b.get(g)||a.defaults[g],d.type){case"number":f[g]=parseInt(f[g])}var h=g.substring(0,1).toUpperCase()+g.substring(1);e["get"+h]=function(){return f[g]},e["set"+h]=function(a){b.add(g,a),f[g]=a}}),g=b.get(a.names.favorite)||[]}var e=this,f={},g=[];d(),this.addFavorite=function(b){g.length!=a.cst.maxFavorite&&-1===g.indexOf(b)&&(g.push(b),c())},this.removeFavorite=function(a){var b=g.indexOf(a);-1!==b&&(g.splice(b,1),c())},this.getFavoriteList=function(){return g},this.getDepthList=function(){return a.cst.depthList},this.getPeriodTypes=function(){return a.cst.periodTypes},this.getMaxPeriod=function(){return a.cst.maxPeriod},this.getRealtimeScatterXRange=function(){return a.cst.realtimeScatterPeriod},this.getRealtimeScatterXRangeStr=function(){return a.cst.realtimeScatterPeriod/1e3/60+"m"},this.getResponseTypeColor=function(){return a.cst.responseTypeColor},this.getAgentAllStr=function(){return a.cst.agentAllStr},this.getResponseTypeFormat=function(){var b={};return jQuery.each(a.cst.responseType,function(a,c){b[c]=0}),b},this.getCalleeByApp=function(a){return angular.isUndefined(a)?this.getCallee():b.get(a+"+callee")||this.getCallee()},this.getCallerByApp=function(a){return angular.isUndefined(a)?this.getCaller():b.get(a+"+caller")||this.getCaller()},this.setDepthByApp=function(a,c){angular.isUndefined(a)||null===a||angular.isUndefined(c)||null===c||b.add(a,c)}}])}(),function(){"use strict";pinpointApp.constant("CommonAjaxServiceConfig",{serverTimeUrl:"./serverTime.aeye",applicationListUrl:"./applications.aeye",realtimeSummaryNLoadDataUrl:"/getResponseTimeHistogramData.pinpoint"}),pinpointApp.service("CommonAjaxService",["CommonAjaxServiceConfig","$http",function(a,b){function c(a){var b=[];for(var c in a)b.push(c+"="+a[c]);return b.join("&")}this.getSQLBind=function(a,b,c){jQuery.ajax({type:"POST",url:a,data:b,cache:!1,dataType:"json",success:function(a){angular.isFunction(c)&&c(a)},error:function(a,b,d){angular.isFunction(c)&&c(d)}})},this.getServerTime=function(c){b.get(a.serverTimeUrl).success(function(a){c(a.currentServerTime)}).error(function(){c(Date.now())})},this.getApplicationList=function(c,d){b.get(a.applicationListUrl).success(function(a){c(a)}).error(function(){d()})},this.getResponseTimeHistogramData=function(d,e,f){b({url:a.realtimeSummaryNLoadDataUrl+"?"+c(d),method:"GET"}).then(function(a){e(a.data)},function(){f()})}}])}(),function(a){"use strict";pinpointApp.constant("AgentAjaxServiceConfig",{agentList:"/getAgentList.pinpoint",agentInfo:"/getAgentInfo.pinpoint",agetEvent:"/getAgentEvent.pinpoint",agentStatus:"/getAgentStatus.pinpoint",agentEventList:"/getAgentEvents.pinpoint",agentStateForChart:"/getAgentStat.pinpoint"}),pinpointApp.service("AgentAjaxService",["AgentAjaxServiceConfig","$http",function(a,b){function c(a,c,e){b.get(a+d(c)).then(function(a){e(a.data)},function(a){e(a)})}function d(a){var b="?";for(var c in a)b+=("?"==b?"":"&")+c+"="+a[c];return b}this.getAgentList=function(b,d){c(a.agentList,b,d)},this.getAgentStateForChart=function(b,d){c(a.agentStateForChart,b,d)},this.getAgentInfo=function(b,d){c(a.agentInfo,b,d)},this.getEventList=function(b,d){b.exclude="10199",c(a.agentEventList,b,d)},this.getEvent=function(b,d){c(a.agetEvent,b,d)}}])}(jQuery),function(a){"use strict";pinpointApp.constant("TooltipServiceConfig",{scatter:{position:"bottom",trigger:"click"},navbar:{position:"bottom",trigger:"click"},agentList:{position:"bottom",trigger:"click"},heap:{position:"top",trigger:"click"},permGen:{position:"top",trigger:"click"},cpuUsage:{position:"top",trigger:"click"},tps:{position:"top",trigger:"click"},responseSummaryChart:{position:"top",trigger:"click"},loadChart:{position:"top",trigger:"click"},serverList:{position:"bottom",trigger:"click"},callTree:{position:"bottom",trigger:"click"},realtime:{position:"top",trigger:"click"},alarmRules:{position:"top",trigger:"click"}}),pinpointApp.service("TooltipService",["TooltipServiceConfig","helpContentTemplate","helpContentService",function(b,c,d){function e(a){switch(a){case"scatter":return function(){return c(d.scatter["default"])};case"navbar":return function(){return c(d.navbar.applicationSelector)+c(d.navbar.depth)+c(d.navbar.periodSelector)};case"agentList":return function(){return c(d.inspector.list)};case"heap":return function(){return c(d.inspector.heap)};case"permGen":return function(){return c(d.inspector.permGen)};case"cpuUsage":return function(){return c(d.inspector.cpuUsage)};case"tps":return function(){return c(d.inspector.tps)};case"responseSummaryChart":return function(){return c(d.nodeInfoDetails.responseSummary)};case"loadChart":return function(){return c(d.nodeInfoDetails.load)};case"serverList":return function(){return c(d.nodeInfoDetails.nodeServers)};case"callTree":return function(){return c(d.callTree.column)};case"realtime":return function(){return c(d.realtime["default"])};case"alarmRules":return function(){return c(d.configuration.alarmRules)}}}this.init=function(c){a("."+c+"Tooltip").tooltipster({content:e(c),position:b[c].position,trigger:b[c].trigger})}}])}(jQuery),function(a){"use strict";pinpointApp.constant("cfg",{periodTypePrefix:".navbar.periodType",periodType:{RANGE:"range",LAST:"last",REALTIME:"realtime"}}),pinpointApp.directive("navbarDirective",["cfg","$route","$rootScope","$http","$document","$timeout","$window","webStorage","helpContentService","AnalyticsService","PreferenceService","TooltipService","CommonAjaxService",function(b,c,d,e,f,g,h,i,j,k,l,m,n){return{restrict:"EA",replace:!0,templateUrl:"features/navbar/navbar.html?v="+G_BUILD_TIME,link:function(c,e){function o(){a("#navbar_depth div").on("show.bs.dropdown",function(){}).on("hide.bs.dropdown",function(a){T===!0?a.preventDefault():U===!1&&c.$apply(function(){c.cancelDepth(!1)}),T=!1,U=!1}),a("#navbar_depth .dropdown-menu").on("click",function(){T=!0})}var p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T=!1,U=!1;c.showNavbar=!1,c.periodDelay=!1,c.aReadablePeriodList=l.getPeriodTypes(),c.autoUpdate=!1,c.timeLeft=10,c.timeCountDown=10,c.timeList=[{time:10,label:"10 seconds"},{time:20,label:"20 seconds"},{time:30,label:"30 seconds"},{time:60,label:"1 minute"}],c.callee=u=l.getCalleeByApp(c.application),c.caller=v=l.getCallerByApp(c.application),c.rangeList=l.getDepthList(),c.applications=[{text:"Select an application.",value:""}],e.bind("selectstart",function(a){return!1}),m.init("navbar"),o(),w=function(a){s=a,c.periodType=I(),c.showNavbar=!0,c.showStaticApplication=!1,c.showStatic=!c.showApplication,p=e.find(".application"),c.applications=[{text:"Loading...",value:""}],c.application=s.getApplication()||"",c.callee=u=l.getCalleeByApp(c.application),c.caller=v=l.getCallerByApp(c.application),c.disableApplication=!0,c.readablePeriod=s.getReadablePeriod()||l.getPeriod(),c.periodCalendar=s.getReadablePeriod()||l.getPeriod(),c.queryEndTime=s.getQueryEndTime()||"",y(),x(),C()},H=function(b){s=b,c.periodType=I(),c.showNavbar=!0,c.showStaticApplication=!0,p=e.find(".application"),c.application=s.getApplication()||"",c.applicationName=s.getApplicationName()||"",c.readablePeriod=s.getReadablePeriod()||l.getPeriod(),c.periodCalendar=s.getReadablePeriod()||l.getPeriod(),c.queryEndTime=s.getQueryEndTime()||"",a("#ui-datepicker-div").remove()},x=function(){t=a("#ui-datepicker-div"),t.find(".guide").html(j.navbar.searchPeriod.guide.replace(/\{\{day\}\}/,l.getMaxPeriod())),t.find("button.ui-datepicker-close").on("click",function(){t.hide()}),q=e.find("#from-picker"),q.datetimepicker({altField:"#from-picker-alt",altFieldTimeOnly:!1,dateFormat:"yy-mm-dd",timeFormat:"HH:mm",controlType:"select",showButtonPanel:!1,onSelect:function(){var a=moment(K(q)),b=moment(K(r));if(b.isAfter(moment(K(q)).add(l.getMaxPeriod(),"days"))||a.isAfter(b)){var c=R();z(r,a.add(c[0],c[1]).format())}},onClose:function(a,b){""!==r.val()?q.datetimepicker("getDate")>r.datetimepicker("getDate")&&r.datetimepicker("setDate",q.datetimepicker("getDate")):r.val(a)}}),z(q,s.getQueryStartTime()||moment().subtract(20,"minute").valueOf()),r=e.find("#to-picker"),r.datetimepicker({altField:"#to-picker-alt",altFieldTimeOnly:!1,dateFormat:"yy-mm-dd",timeFormat:"HH:mm",controlType:"select",showButtonPanel:!1,onSelect:function(){var a=moment(K(q)),b=moment(K(r));if(a.isBefore(moment(K(r)).subtract(l.getMaxPeriod(),"days"))||a.isAfter(b)){var c=R();z(q,b.subtract(c[0],c[1]).format())}},onClose:function(a,b){""!==q.val()?q.datetimepicker("getDate")>r.datetimepicker("getDate")&&q.datetimepicker("setDate",r.datetimepicker("getDate")):q.val(a)}}),z(r,s.getQueryEndTime()),a("#from-picker-alt").on("click",function(){Q()}),a("#to-picker-alt").on("click",function(){Q()}),a(document).mousedown(function(b){t.is(":visible")!==!1&&0===a(b.target).parents("div#ui-datepicker-div").length&&t.hide()})},R=function(){var a=[],b=c.periodCalendar.substring(c.periodCalendar.length-1);return a[0]=parseInt(c.periodCalendar),a[1]="d"==b?"days":"h"==b?"hours":"minutes",a},Q=function(){t.is(":visible")?t.hide():(t.css("left",a("#navbar_period").offset().left),t.show())},K=function(a){return a.datetimepicker("getDate")},I=function(){if(s.isRealtime())return b.periodType.REALTIME;var a=b.periodType.LAST;return a=h.name&&i.get(h.name+b.periodTypePrefix)?i.get(h.name+b.periodTypePrefix):s.getApplication()?b.periodType.RANGE:b.periodType.LAST,s.getReadablePeriod()&&_.indexOf(c.aReadablePeriodList,s.getReadablePeriod())<0&&(a=b.periodType.RANGE),a},J=function(){h.name=h.name||"window."+_.random(1e5,999999),i.add(h.name+b.periodTypePrefix,c.periodType)},z=function(a,b){a.datetimepicker("setDate",b?new Date(b):new Date)},B=function(){c.application&&(s.setApplication(c.application),c.callee=u=l.getCalleeByApp(c.application),c.caller=v=l.getCallerByApp(c.application),s.setCalleeRange(c.callee),s.setCallerRange(c.caller),c.periodType===b.periodType.LAST&&c.readablePeriod?(s.setPeriodType(b.periodType.LAST),A(function(a){s.setReadablePeriod(c.readablePeriod),s.setQueryEndDateTime(moment(a).format("YYYY-MM-DD-HH-mm-ss")),s.autoCalculateByQueryEndDateTimeAndReadablePeriod(),G(),z(q,s.getQueryStartTime()),z(r,s.getQueryEndTime())})):c.periodType===b.periodType.REALTIME?(s.setPeriodType(b.periodType.REALTIME),A(function(a){s.setReadablePeriod(l.getRealtimeScatterXRangeStr()),s.setQueryEndDateTime(moment(a).format("YYYY-MM-DD-HH-mm-ss")),s.autoCalculateByQueryEndDateTimeAndReadablePeriod(),G(),z(q,s.getQueryStartTime()),z(r,s.getQueryEndTime())})):D()&&E()&&(s.setPeriodType(b.periodType.RANGE),s.setQueryStartTime(D()),s.setQueryEndTime(E()),s.autoCalcultateByQueryStartTimeAndQueryEndTime(),G()))},G=function(){d.$broadcast("realtimeChartController.close"),J(),c.$emit("navbarDirective.changed",s)},A=function(a){n.getServerTime(function(b){a(b)})},C=function(){n.getApplicationList(function(a){angular.isArray(a)===!1||0===a.length?(c.applications[0].text="Application not found.",d.$broadcast("alarmRule.applications.set",c.applications),d.$broadcast("configuration.general.applications.set",c.applications)):(S=a,F(S,function(){c.disableApplication=!1,g(function(){s.getApplication()?(p.select2("val",s.getApplication()),c.application=s.getApplication()):p.select2("open")}),d.$broadcast("alarmRule.applications.set",c.applications),d.$broadcast("configuration.general.applications.set",c.applications)})),c.hideFakeApplication=!0},function(){c.applications[0].text="Application error.",c.hideFakeApplication=!0})},D=function(){return q.datetimepicker("getDate").getTime()},E=function(){return r.datetimepicker("getDate").getTime()},F=function(a,b){var d=l.getFavoriteList();c.favoriteCount=d.length,c.applications=[{text:"",value:""}];var e=[],f=[];angular.forEach(a,function(a,b){var c=a.applicationName+"@"+a.serviceType;-1===d.indexOf(c)?f.push({text:c,value:a.applicationName+"@"+a.code}):e.push({text:c,value:a.applicationName+"@"+a.code})}),c.applications=e.concat(f),angular.isFunction(b)&&b.apply(c)},y=function(){function a(a){if(!a.id)return a.text;var b=a.text.split("@");if(b.length>1){var c=f.get(0).createElement("img");return c.src="/images/icons/"+b[1]+".png",c.style.height="25px",c.style.paddingRight="3px",c.outerHTML+b[0]}return a.text}p.select2({placeholder:"Select an application",searchInputPlaceholder:"Input your application name",allowClear:!1,formatResult:a,formatSelection:a,escapeMarkup:function(a){return a}}).on("change",function(a){k.send(k.CONST.MAIN,k.CONST.CLK_APPLICATION),c.application=a.val,c.$digest(),B()})},N=function(a){var b=parseInt(a);switch(a.substring(a.length-1)){case"m":b*=6e4;break;case"h":b*=36e5;break;case"d":b*=864e5}return b},O=function(a){c.periodType===b.periodType.LAST?(s.setQueryEndDateTime(moment(s.getQueryEndTime()+a).format("YYYY-MM-DD-HH-mm-ss")),s.autoCalculateByQueryEndDateTimeAndReadablePeriod(),G(),z(q,s.getQueryStartTime()),z(r,s.getQueryEndTime())):(z(q,s.getQueryStartTime()+a),z(r,s.getQueryEndTime()+a),s.setQueryStartTime(D()),s.setQueryEndTime(E()),s.autoCalcultateByQueryStartTimeAndQueryEndTime(),G())},P=function(a){k.send(k.CONST.MAIN,k.CONST.CLK_TIME,a),c.periodDelay=!0,c.readablePeriod=a,c.autoUpdate=!1,B(),g(function(){c.periodDelay=!1,c.$$phase||c.$digest()},1e3)},c.search=function(){B()},c.setPeriod=function(a){c.periodType=b.periodType.LAST,P(a)},c.getPreviousClass=function(){return""},c.getNextClass=function(){return""},c.getPeriodClassInCalendar=function(a){return c.periodCalendar===a?"btn-success":""},c.getPeriodClass=function(a){var d="";return c.periodType!==b.periodType.LAST?d:(c.readablePeriod===a&&(d+="btn-info"),c.periodDelay&&(d+=" wait"),d)},c.showUpdate=function(){return!!(c.periodType===b.periodType.LAST&&_.indexOf(["5m","20m","1h","3h"],c.readablePeriod)>=0&&c.application)},c.changeUpdateSetting=function(){k.send(k.CONST.MAIN,c.autoUpdate?k.CONST.TG_UPDATE_OFF:k.CONST.TG_UPDATE_ON)},L=function(){c.autoUpdate&&(c.timeLeft-=1,0===c.timeLeft?(c.update(),c.timeLeft=c.timeCountDown):g(L,1e3))},M=function(){c.timeLeft=c.timeCountDown},c.setPeriodForCalendar=function(a){c.periodCalendar=a},c.setAutoUpdateTime=function(a){k.send(k.CONST.MAIN,k.CONST.CLK_UPDATE_TIME,a+"s"),c.timeCountDown=a,c.timeLeft=a},c.setCallee=function(a){c.callee=a},c.setCaller=function(a){c.caller=a},c.setDepth=function(){T=!1,U=!0,a("#navbar_depth .dropdown-menu").trigger("click.bs.dropdown"),console.log("previous :",u,v,", current :",c.callee,c.caller),u===c.callee&&v===c.caller||(k.send(k.CONST.MAIN,k.CONST.CLK_CALLEE_RANGE,c.callee),k.send(k.CONST.MAIN,k.CONST.CLK_CALLER_RANGE,c.caller),u=c.callee,v=c.caller,l.setDepthByApp(c.application+"+callee",c.callee),l.setDepthByApp(c.application+"+caller",c.caller),window.location.reload(!0))},c.cancelDepth=function(b){c.callee=u,c.caller=v,b&&(T=!1,U=!0,a("#navbar_depth .dropdown-menu").trigger("click.bs.dropdown"))},c.update=function(){var a=c.autoUpdate;c.autoUpdate=!1,c.periodDelay=!0,B(),g(function(){c.periodDelay=!1,M(),c.autoUpdate=a,c.$$phase||c.$digest()},1e3)},c.togglePeriod=function(a){k.send(k.CONST.MAIN,k.CONST.TG_DATE,a),c.periodType=a,c.autoUpdate=!1},c.setRealtime=function(){c.periodType!==b.periodType.REALTIME&&(k.send(k.CONST.MAIN,k.CONST.CLK_START_REALTIME),
c.periodType=b.periodType.REALTIME,c.autoUpdate=!1,B())},c.isRealtime=function(){return"undefined"==typeof s||null===s?!1:s.isRealtime()},c.showConfig=function(){d.$broadcast("configuration.show")},c.$watch("autoUpdate",function(a,b){a?g(L,1e3):M()}),c.$on("navbarDirective.initialize",function(a,b){w(b)}),c.$on("navbarDirective.initialize.andReload",function(a,d){w(d),c.periodType=b.periodType.LAST,P(l.getPeriod())}),c.$on("navbarDirective.initialize.realtime.andReload",function(a,d){w(d),c.periodType=b.periodType.REALTIME,P(l.getPeriod())}),c.$on("navbarDirective.initializeWithStaticApplication",function(a,b){H(b)}),c.$on("navbarDirective.moveToPast",function(a){O(c.periodType===b.periodType.LAST?-N(c.readablePeriod):-(s.getQueryEndTime()-s.getQueryStartTime()))}),c.$on("navbarDirective.moveToFuture",function(a){O(c.periodType===b.periodType.LAST?N(c.readablePeriod):s.getQueryEndTime()-s.getQueryStartTime())}),c.$on("navbarDirective.changedFavorite",function(a){F(S,function(){c.disableApplication=!1,g(function(){s.getApplication()&&(p.select2("val",s.getApplication()),c.application=s.getApplication())})})})}}}])}(jQuery),function(){"use strict";pinpointApp.constant("serverMapDirectiveConfig",{options:{sContainerId:"servermap",sOverviewId:"servermapOverview",sBigFont:"11pt Lato,NanumGothic,ng,dotum,AppleGothic,sans-serif",sSmallFont:"11pt Lato,NanumGothic,ng,dotum,AppleGothic,sans-serif",sImageDir:"/images/servermap/",htLinkType:{sRouting:"Normal",sCurve:"JumpGap"},htLinkTheme:{"default":{backgroundColor:"#ffffff",borderColor:"#c5c5c5",fontFamily:"11pt Lato,NanumGothic,ng,dotum,AppleGothic,sans-serif",fontColor:"#000000",fontAlign:"center",margin:1,strokeWidth:1},bad:{backgroundColor:"#ffc9c9",borderColor:"#7d7d7d",fontFamily:"11pt Lato,NanumGothic,ng,dotum,AppleGothic,sans-serif",fontColor:"#FF1300",fontAlign:"center",margin:1,strokeWidth:1}}}}),pinpointApp.directive("serverMapDirective",["serverMapDirectiveConfig","$rootScope","ServerMapDaoService","AlertsService","ProgressBarService","SidebarTitleVoService","$filter","ServerMapFilterVoService","filteredMapUtilService","$base64","ServerMapHintVoService","$timeout","$location","$window","helpContentTemplate","helpContentService","AnalyticsService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return{restrict:"EA",replace:!0,templateUrl:"features/serverMap/serverMap.html?v="+G_BUILD_TIME,link:function(r,s,t){var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W;z=new d(s),A=new e(s),E=!1,y=null,B={applicationMapData:{linkDataArray:[],nodeDataArray:[]},lastFetchedTimestamp:[],timeSeriesResponses:{values:{},time:[]}},w={},C={},D={},r.oNavbarVoService=null,r.totalRequestCount=!0,r.bShowServerMapStatus=!1,r.linkRouting=a.options.htLinkType.sRouting,r.linkCurve=a.options.htLinkType.sCurve,r.searchNodeQuery="",r.searchNodeIndex=0,r.searchNodeList=[],J=s.find(".serverMapTime"),F=s.find(".fromAgentName"),G=s.find(".toAgentName"),F.select2(),G.select2(),H=!1,r.mergeTypeList=[],r.mergeStatus={},r.showAntStyleHint=!1,W=function(a){a.nodeDataArray.forEach(function(a){a.isWas===!1&&"USER"!==a.serviceType&&angular.isUndefined(r.mergeStatus[a.serviceType])&&(r.mergeTypeList.push(a.serviceType),r.mergeStatus[a.serviceType]=!0)})},M=function(){r.nodeContextMenuStyle="",r.linkContextMenuStyle="",r.backgroundContextMenuStyle="",r.urlPattern="",r.responseTime={from:0,to:3e4},r.includeFailed=null,$("#filterWizard").modal("hide"),"$apply"!=r.$$phase&&"$digest"!=r.$$phase&&"$apply"!=r.$root.$$phase&&"$digest"!=r.$root.$$phase&&r.$digest()},K=function(a,b,d,e,f,g,h,j){A.startLoading(),z.hideError(),z.hideWarning(),z.hideInfo(),y&&y.clear(),A.setLoading(10),w={applicationName:a,serviceTypeName:b,from:d-e,to:d,originTo:r.oNavbarVoService.getQueryEndTime(),callerRange:r.oNavbarVoService.getCallerRange(),calleeRange:r.oNavbarVoService.getCalleeRange(),period:e,filter:n.encodeURIComponent(f),hint:g?n.encodeURIComponent(g):!1},f?c.getFilteredServerMapData(w,function(a,b,d){if(a)return A.stopLoading(),z.showError("There is some error."),!1;A.setLoading(50),b.from===d.lastFetchedTimestamp?r.$emit("serverMapDirective.allFetched",d):(B.lastFetchedTimestamp=d.lastFetchedTimestamp-1,r.$emit("serverMapDirective.fetched",B.lastFetchedTimestamp,d));var e=JSON.parse(f);B.applicationMapData=c.mergeFilteredMapData(B.applicationMapData,d.applicationMapData);var g=c.extractDataFromApplicationMapData(B.applicationMapData);if(g=c.addFilterProperty(e,g),W(g),i.doFiltersHaveUnknownNode(e))for(var k in r.mergeStatus)r.mergeStatus[k]=!1;N(B),Q(b,g,h,j)}):c.getServerMapData(w,function(a,b,d){if(a||d.exception)return A.stopLoading(),a?z.showError("There is some error."):z.showError(d.exception),r.$emit("serverMapDirective.hasNoData"),!1;A.setLoading(50),N(d),B=d;var e=c.extractDataFromApplicationMapData(d.applicationMapData);W(e),Q(b,e,h,j)})},N=function(a){0===a.applicationMapData.nodeDataArray.length?r.$emit("serverMapDirective.hasNoData"):r.$emit("serverMapDirective.hasData")},L=function(a,b,c,d){r.inspectApplicationName=c,r.inspectCategory=d,r.nodeContextMenuStyle={display:"block",top:a,left:b,"z-index":9999999},r.$digest()},O=function(a,b){r.linkContextMenuStyle={display:"block",top:a,left:b,"z-index":9999999},r.$digest()},P=function(a,b){r.backgroundContextMenuStyle={display:"block",top:a,left:b,"z-index":9999999},r.$digest()},V=function(){var a=[];for(var b in r.mergeStatus)r.mergeStatus[b]===!0&&a.push(b);return a},Q=function(d,e,f,h){var i=V();if(I=c.mergeMultiLinkGroup(c.mergeGroup(e,i),i),A.setLoading(80),0!==I.nodeDataArray.length){I.linkDataArray=R(I.linkDataArray,f,h),A.setLoading(90);var k=a.options;k.fOnNodeSubGroupClicked=function(a,b,d,e){var f=c.getLinkNodeDataByNodeKey(B.applicationMapData,d,e);f.fromNode=c.getNodeDataByKey(B.applicationMapData,f.from),f.toNode=c.getNodeDataByKey(B.applicationMapData,f.to),k.fOnLinkClicked(a,f)},k.fOnNodeClicked=function(a,d,e,f){var g;angular.isDefined(d.unknownNodeGroup)&&!e?d.unknownNodeGroup=c.getUnknownNodeDataByUnknownNodeGroup(B.applicationMapData,d.unknownNodeGroup):g=c.getNodeDataByKey(B.applicationMapData,e||d.key),g&&(d=g),E="node",D=d,r.$emit("serverMapDirective.nodeClicked",a,w,d,I,f),r.oNavbarVoService&&r.oNavbarVoService.isRealtime()&&b.$broadcast("realtimeChartController.initialize",d.isWas,d.applicationName,r.oNavbarVoService.getApplication()+"/"+r.oNavbarVoService.getReadablePeriod()+"/"+r.oNavbarVoService.getQueryEndDateTime()+"/"+r.oNavbarVoService.getCallerRange()),M()},k.fOnNodeDoubleClicked=function(a,b,c){a.diagram.zoomToRect(b.actualBounds,1.2)},k.fOnNodeContextClicked=function(a,b){if(!r.oNavbarVoService.isRealtime()){M();var d=c.getNodeDataByKey(B.applicationMapData,b.key);d&&(b=d),D=b,u&&b.isWas===!0&&L(a.event.layerY,a.event.layerX,b.applicationName,b.category)}},k.fOnLinkClicked=function(a,b){if(!r.oNavbarVoService.isRealtime()){var d;angular.isDefined(b.unknownLinkGroup)?b.unknownLinkGroup=c.getUnknownLinkDataByUnknownLinkGroup(B.applicationMapData,b.unknownLinkGroup):d=c.getLinkDataByKey(B.applicationMapData,b.key),d&&(d.fromNode=b.fromNode,d.toNode=b.toNode,b=d),E="link",C=b,M(),r.$emit("serverMapDirective.linkClicked",a,w,b,I)}},k.fOnLinkContextClicked=function(a,b){var f=c.getLinkDataByKey(B.applicationMapData,b.key);f&&(f.fromNode=b.fromNode,f.toNode=b.toNode,b=f),M(),C=b,v&&!angular.isArray(b.targetInfo)&&(O(a.event.layerY,a.event.layerX),r.$emit("serverMapDirective.linkContextClicked",a,d,b,e))},k.fOnBackgroundClicked=function(a){r.$emit("serverMapDirective.backgroundClicked",a,d),M()},k.fOnBackgroundDoubleClicked=function(a){S()},k.fOnBackgroundContextClicked=function(a){r.$emit("serverMapDirective.backgroundContextClicked",a,d),M(),x&&P(a.diagram.lastInput.event.layerY,a.diagram.lastInput.event.layerX)};var l;try{l=_.find(I.nodeDataArray,function(a){return a.applicationName===d.applicationName&&angular.isUndefined(d.serviceType)?!0:a.applicationName===d.applicationName&&a.serviceTypeCode===d.serviceTypeCode}),l&&(k.sBoldKey=l.key)}catch(n){z.showError("There is some error while selecting a node."),console.log(n)}A.setLoading(100),null===y?y=new ServerMap(k,m,q):y.option(k),y.load(I),A.stopLoading(),T(l)}else if(A.stopLoading(),r.oNavbarVoService.getFilter()){var o=r.oNavbarVoService.getFilterAsJson(),p=[];p.push("<p>There is no data with the filter below.</p>"),angular.forEach(o,function(a,b){p.push("<p><b>Filter"),o.length>1&&p.push(" #"+(b+1)),p.push(" : "+a.fa+"("+a.fst+") ~ "+a.ta+"("+a.tst+")</b><br>"),p.push("<ul>"),a.url&&p.push("<li>Url Pattern : "+j.decode(a.url)+"</li>"),a.rf&&a.rt&&p.push("<li>Response Time : "+g("number")(a.rf)+" ms ~ "+g("number")(a.rt)+" ms</li>"),p.push("<li>Transaction Result : "+(a.ie?"Failed Only":"Success + Failed")+"</li>"),p.push("</ul></p>")}),z.showInfo(p.join(""))}else z.showInfo("There is no data.")},R=function(a,b,c){var d=a;for(var e in d)d[e].from===d[e].to?d[e].routing="AvoidsNodes":d[e].routing=b,d[e].curve=c;return d},U=function(){M();var a=new f;"USER"===C.fromNode.serviceType?a.setImageType("USER").setTitle("USER"):a.setImageType(C.fromNode.serviceType).setTitle(C.fromNode.applicationName),a.setImageType2(C.toNode.serviceType).setTitle2(C.toNode.applicationName),r.fromAgent=C.fromAgent||[],r.toAgent=C.toAgent||[],r.sourceInfo=C.sourceInfo,r.targetInfo=C.targetInfo,r.fromApplicationName=C.fromNode.applicationName,r.toApplicationName=C.toNode.applicationName,F.select2("val",""),G.select2("val",""),r.fromAgentName="",r.toAgentName="",r.$broadcast("sidebarTitleDirective.initialize.forServerMap",a),$("#filterWizard").modal("show"),H||(H=!0,$("#filterWizard").on("shown.bs.modal",function(){if($("slider",this).addClass("auto"),setTimeout(function(){$("#filterWizard slider").removeClass("auto")},500),r.oNavbarVoService.getFilter()){var a=i.findFilterInNavbarVo(C.fromNode.applicationName,C.fromNode.serviceType,C.toNode.applicationName,C.toNode.serviceType,r.oNavbarVoService);if(a){r.urlPattern=a.oServerMapFilterVoService.getRequestUrlPattern(),r.responseTime.from=a.oServerMapFilterVoService.getResponseFrom();var b=a.oServerMapFilterVoService.getResponseTo();r.responseTime.to="max"===b?3e4:b,r.includeFailed=a.oServerMapFilterVoService.getIncludeException(),F.select2("val",a.oServerMapFilterVoService.getFromAgentName()),G.select2("val",a.oServerMapFilterVoService.getToAgentName())}else r.responseTime={from:0,to:3e4}}else r.responseTime={from:0,to:3e4};r.$$phase||r.$digest()}))},r.passingTransactionResponseToScatterChart=function(){r.$emit("serverMapDirective.passingTransactionResponseToScatterChart",D),M()},r.passingTransactionList=function(){q.send(q.CONST.CONTEXT,q.CONST.CLK_FILTER_TRANSACTION);var a=new h;a.setMainApplication(C.filterApplicationName).setMainServiceTypeName(C.filterApplicationServiceTypeName).setMainServiceTypeCode(C.filterApplicationServiceTypeCode).setFromApplication(C.fromNode.applicationName).setFromServiceType(C.fromNode.serviceType).setToApplication(C.toNode.applicationName).setToServiceType(C.toNode.serviceType);var b=new k;C.sourceInfo.isWas&&C.targetInfo.isWas&&b.setHint(C.toNode.applicationName,C.filterTargetRpcList),r.$broadcast("serverMapDirective.openFilteredMap",a,b),M()},r.openFilterWizard=function(){q.send(q.CONST.CONTEXT,q.CONST.CLK_FILTER_TRANSACTION_WIZARD),U()},S=function(){y&&y.zoomToFit()},T=function(a){l(function(){"node"===E&&D?y.highlightNodeByKey(D.key):"link"===E&&C?y.highlightLinkByFromTo(C.from,C.to):a&&y.highlightNodeByKey(a.key)})},r.responseTimeFormatting=function(a){return 3e4==a?"30,000+ ms":g("number")(a)+" ms"},r.passingTransactionMap=function(){var a=new h;a.setMainApplication(C.filterApplicationName).setMainServiceTypeCode(C.filterApplicationServiceTypeCode).setMainServiceTypeName(C.filterApplicationServiceTypeName).setFromApplication(C.fromNode.applicationName).setFromServiceType(C.fromNode.serviceType).setToApplication(C.toNode.applicationName).setToServiceType(C.toNode.serviceType).setResponseFrom(r.responseTime.from).setResponseTo(r.responseTime.to).setIncludeException(r.includeFailed).setRequestUrlPattern(j.encode(r.urlPattern)),r.fromAgentName&&a.setFromAgentName(r.fromAgentName),r.toAgentName&&a.setToAgentName(r.toAgentName);var b=new k;C.sourceInfo.isWas&&C.targetInfo.isWas&&b.setHint(C.toNode.applicationName,C.filterTargetRpcList),r.$broadcast("serverMapDirective.openFilteredMap",a,b),M()},r.toggleMergeGroup=function(a){q.send(q.CONST.CONTEXT,q.CONST.TG_MERGE_TYPE,a),r.mergeStatus[a]=!r.mergeStatus[a],Q(w,c.extractDataFromApplicationMapData(B.applicationMapData),r.linkRouting,r.linkCurve),M()},r.toggleLinkLableTextType=function(a){"tps"===a?(q.send(q.CONST.CONTEXT,q.CONST.TG_TPS),r.totalRequestCount=!1,r.tps=!0):(q.send(q.CONST.CONTEXT,q.CONST.TG_CALL_COUNT),r.totalRequestCount=!0,r.tps=!1),r.totalRequestCount="tps"!==a,r.tps="tps"===a,Q(w,I,r.linkRouting,r.linkCurve),M()},r.toggleLinkRouting=function(b){q.send(q.CONST.CONTEXT,q.CONST.TG_ROUTING,b),r.linkRouting=a.options.htLinkType.sRouting=b,Q(w,I,r.linkRouting,r.linkCurve),M()},r.toggleLinkCurve=function(b){q.send(q.CONST.CONTEXT,q.CONST.TG_CURVE,b),r.linkCurve=a.options.htLinkType.sCurve=b,Q(w,I,r.linkRouting,r.linkCurve),M()},r.refresh=function(){q.send(q.CONST.CONTEXT,q.CONST.CLK_REFRESH),y&&y.refresh(),M()},r.$on("serverMapDirective.initialize",function(a,b){r.oNavbarVoService&&w.applicationName!==b.getApplicationName()&&(E=!1),r.oNavbarVoService=b,r.oNavbarVoService.getQueryEndTime()===!1||r.oNavbarVoService.getQueryStartTime()===!1?r.bShowServerMapStatus=!1:r.bShowServerMapStatus=!0,v=x=!0,u=!1,K(b.getApplicationName(),b.getServiceTypeName(),b.getQueryEndTime(),b.getQueryPeriod(),b.getFilter(),b.getHint(),r.linkRouting,r.linkCurve)}),r.$on("serverMapDirective.fetch",function(a,b,c){K(r.oNavbarVoService.getApplicationName(),r.oNavbarVoService.getServiceTypeName(),c,b,r.oNavbarVoService.getFilter(),r.oNavbarVoService.getHint(),r.linkRouting,r.linkCurve)}),r.$on("serverMapDirective.initializeWithMapData",function(a,b,d,e){M(),r.bShowServerMapStatus=!1,x=!0,u=b,v=!1,w={applicationName:d.applicationId},B=d,r.oNavbarVoService=e,Q(w,c.extractDataFromApplicationMapData(B.applicationMapData),r.linkRouting,r.linkCurve)}),r.$on("serverMapDirective.zoomToFit",function(a){S()}),r.$on("serverMapDirective.openFilterWizard",function(a,b){C=b,U()}),r.searchNodeByEnter=function(a){13==a.keyCode&&r.searchNode()},r.searchNodeWithCategory=function(a){y&&(r.searchNodeIndex=a,y.searchNode(r.searchNodeList[a].applicationName,r.searchNodeList[a].serviceType))},r.searchNode=function(){y&&""!==r.searchNodeQuery&&(q.send(q.CONST.MAIN,q.CONST.CLK_SEARCH_NODE),r.searchNodeIndex=0,r.searchNodeList=y.searchNode(r.searchNodeQuery),jQuery(s).find(".search-result").show().find(".count").html("Result : "+r.searchNodeList.length))},r.clearSearchNode=function(){q.send(q.CONST.MAIN,q.CONST.CLK_CLEAR_SEARCH),y.clearQuery(),r.searchNodeIndex=0,r.searchNodeQuery="",r.searchNodeList=[],jQuery(s).find(".search-result").hide()},r.toggleShowAntStyleHint=function(){r.showAntStyleHint=!r.showAntStyleHint},r.moveToPast=function(){r.$emit("navbarDirective.moveToPast"),J.effect("highlight",{color:"#FFFF00"},1e3)},r.moveToFuture=function(){r.$emit("navbarDirective.moveToFuture"),J.effect("highlight",{color:"#FFFF00"},1e3)},r.toggleToolbar=function(){var a=jQuery(s).find(".servermap-toolbar"),b=jQuery(s).find(".servermap-toolbar-handle span");-1==parseInt(a.css("top"))?(a.find(".search-result").hide(),a.animate({top:-55},"fast",function(){b.addClass("glyphicon-chevron-down").removeClass("glyphicon-chevron-up")})):a.animate({top:-1},"fast",function(){r.searchNodeList.length>0&&a.find(".search-result").show(),b.addClass("glyphicon-chevron-up").removeClass("glyphicon-chevron-down")})},jQuery(".serverMapTooltip").tooltipster({content:function(){return o(p.servermap["default"])},position:"bottom-right",trigger:"click"})}}}])}(),function(){"use strict";pinpointApp.constant("realtimeChartDirectiveConfig",{params:{TIMEOUT_MAX_COUNT:"timeoutMaxCount",SHOW_EXTRA_INFO:"showExtraInfo",REQUEST_LABEL:"requestLabel",REQUEST_COLOR:"requestColor",CHART_COLOR:"chartColor",NAMESPACE:"namespace",XCOUNT:"xcount",HEIGHT:"height",WIDTH:"width"},responseCode:{ERROR_BLACK:111,TIMEOUT:211},consts:{maxDealyCount:5,verticalGridCount:5},message:{NO_ACTIVE_THREAD:"No Active Thread",NO_RESPONSE:"No Response"}}),pinpointApp.directive("realtimeChartDirective",["realtimeChartDirectiveConfig",function(a){return{restrict:"EA",replace:!0,template:'<svg width="" height=""></svg>',link:function(b,c,d){function e(){L=d3.select(c.get(0)).attr("width",y.width).attr("height",y.height).append("g").attr("class","base").attr("transform","translate("+(y.showExtraInfo?z.margin.left:0)+","+z.margin.top+")"),L.append("defs").append("clipPath").attr("id","clip-"+y.namespace).append("rect").attr("x",1).attr("y",0).attr("width",A).attr("height",B)}function f(){G.length=0;for(var a=Date.now(),b=0;b<y.requestLabel.length;b++)G.push(d3.range(y.xAxisCount).map(function(){return{y:0,d:a}}))}function g(){M=d3.scale.linear().domain(z.domain).range([0,A]),y.showExtraInfo?L.append("g").attr("class","y axis"):(P=L.append("g").attr("class","v-grid"),i()),O=L.append("g").attr("class","h-grid"),h()}function h(){N=d3.scale.linear().domain([0,C]).range([B,0]),y.showExtraInfo&&L.selectAll("g.y.axis").call(d3.svg.axis().scale(N).ticks(3).orient("left").tickFormat(z.yAxisFormat)),j()}function i(){for(var b=[],c=0;c<a.consts.verticalGridCount;c++)b.push(J*c);Q=P.selectAll("line").data(b).enter().append("line").attr("class","grid").attr({x1:function(a){return a},x2:function(a){return a},y1:-10,y2:B})[0]}function j(){var a=[],b=L.select("g.y.axis").selectAll("g.tick");if(0!==b.length){jQuery.each(b[0],function(b,c){a.push(parseFloat(c.getAttribute("transform").replace(/translate\(0,(-?[0-9.]*)\)/,"$1")))});var c=O.selectAll("line").data(a);c.enter().append("line").attr("class","grid").transition().attr("x1",0).attr("x2",A).attr("y1",function(a,b){return a}).attr("y2",function(a,b){return a}),c.transition().attr("x1",0).attr("x2",A).attr("y1",function(a){return a}).attr("y2",function(a){return a}),c.exit().remove()}}function k(){S=d3.svg.area().interpolate(z.interpolation).x(function(a,b){return M(b)}).y0(function(a,b){return N(a.y0)}).y1(function(a,b){return N(a.y+a.y0)})}function l(){R=L.append("g").attr("class","pathArea").attr("clip-path","url(#clip-"+y.namespace+")").selectAll("path").data(G).enter().append("path").attr("d",S).attr("class","area ").attr("fill",function(a,b){return y.requestColor[b]})}function m(){V=L.append("g").attr("class","chart-tooltip").attr("transform","translate(-1000, 0)"),V.append("line").attr("x1",z.tooltipWidth).attr("y1",10).attr("x2",z.tooltipWidth).attr("y2",B).attr("class","guideLine"),W=V.append("g").attr("transform","translate(0, 10)"),W.append("rect").attr("width",40).attr("height",90).attr("fill","#000").attr("fill-opacity","0.7"),W.selectAll("text").data(y.requestLabel).enter().append("text").attr("x",function(a,b){return 30}).attr("y",function(a,b){return 20*(y.requestColor.length-b-1)+20+"px"}).attr("fill",function(a,b){return y.requestColor[b]}).attr("text-anchor","end").text(function(a,b){return y.requestLabel[b]}),X=L.append("text").attr("class","date").attr("x","29%").attr("y","6px").text("")}function n(){y.showExtraInfo!==!1&&L.on("mouseout",function(){V.attr("transform","translate(-1000, 0)"),X.text(""),E=-1,D=-1}).on("mousemove",function(a){D=parseInt(M.invert(d3.mouse(this)[0])),E=parseInt(d3.mouse(this)[0]),E=E>A?-1e3:E,V.attr("transform","translate("+(E-z.tooltipWidth)+",0)"),p(o(D))})}function o(a){var b=[];if(-1===a)return b;for(var c=0;c<G.length;c++)b.push({y:G[c][a]?G[c][a].y:0,d:G[c][a]?G[c][a].d:Date.now()});return b}function p(a){y.showExtraInfo!==!1&&-1!==E&&-1!==D&&(W.selectAll("text").text(function(b,c){return a[c].y}),X.text(z.timeFormat(new Date(a[0].d))))}function q(){y.showExtraInfo!==!1&&(L.append("g").attr("transform",function(a,b){return"translate("+(y.width-z.margin.left-z.margin.right+4+32)+",10)"}).attr("class","request-label").append("text").attr("text-anchor","end").attr("fill","#000").style("font-size","14px").style("font-weight","bold").attr("y","0%").text("Total"),L.append("g").attr("transform",function(a,b){return"translate("+(y.width-z.margin.left-z.margin.right+4+32)+",10)"}).attr("class","request-label").selectAll("text").data(y.requestLabel).enter().append("text").attr("text-anchor","end").attr("fill","#9B9B9B").attr("y",function(a,b){return 20*(4-b)+"%"}).text(function(a,b){return y.requestLabel[b]}),U=L.append("g").attr("transform",function(a,b){return"translate("+(y.width-z.margin.left-z.margin.right+4+70)+",10)"}).attr("class","request-count").append("text").attr("text-anchor","end").attr("fill","#000").attr("y","0%").text("0"),T=L.append("g").attr("transform",function(a,b){return"translate("+(y.width-z.margin.left-z.margin.right+4+70)+",10)"}).attr("class","request-count").selectAll("text").data(y.requestLabel).enter().append("text").attr("text-anchor","end").attr("y",function(a,b){return 20*(4-b)+"%"}).attr("fill",function(a,b){return y.requestColor[b]}).text("0"))}function r(){Y=L.append("text").attr("class","error").attr("y","40%").attr("x","50%"),Z=Y.append("tspan").attr("x","50%").attr("dy","0%"),$=Y.append("tspan").attr("x","50%").attr("dy","14px")}function s(a,b){Y.style("fill",a?"#F00":"#000"),b.length>1?(Y.attr("y","20%"),Z.text(b[0]),$.text(b[1])):(Y.attr("y","40%"),Z.text(b[0]),$.text(""))}function t(a){if(y.showExtraInfo!==!1){var b=0;T.data(a).text(function(a,c){return"undefined"!=typeof a.y?(b+=a.y,a.y):""}),U.text(b)}}function u(){I=0}function v(){aa=aa.each(function(){if(I++,0===F.length)return void(I>a.consts.maxDealyCount&&y.showExtraInfo===!1&&s(!1,[a.message.NO_RESPONSE]));u();var b=F.shift();t(b),h(),y.showExtraInfo===!1&&w();var c=0;for(c=0;c<G.length;c++)G[c].push(b[c]);for(_(G),k(),x(),c=0;c<G.length;c++)G[c].shift();p(o(D))}).transition().each("start",function(){v()})}function w(){for(var a=0,b=0;b<Q.length;b++)a=Math.max(a,parseInt(d3.select(Q[b]).attr("x1")));var c=M(0)*K++,d=a+J;P.transition().attr("transform","translate("+c+")").each("end",function(){for(var a=0;a<Q.length;a++){var b=d3.select(Q[a]),e=parseInt(b.attr("x1"));e<Math.abs(c)&&(b.attr({x1:d,x2:d}),d+=J)}})}function x(){R.data(G).attr("d",S).attr("transform",null).transition().attr("transform","translate("+M(0)+")")}var y={timeoutMaxCount:parseInt(d[a.params.TIMEOUT_MAX_COUNT]),showExtraInfo:"true"===d[a.params.SHOW_EXTRA_INFO],requestLabel:b[d[a.params.REQUEST_LABEL]],requestColor:b[d[a.params.CHART_COLOR]],xAxisCount:parseInt(d[a.params.XCOUNT]),namespace:d[a.params.NAMESPACE],height:parseInt(d[a.params.HEIGHT]),width:parseInt(d[a.params.WIDTH])},z={domain:[1,y.xAxisCount-2],margin:{top:6,left:y.showExtraInfo?38:20,right:80,bottom:6},timeFormat:d3.time.format("%Y.%m.%d %H:%M:%S"),transaction:{duration:1e3,ease:"linear"},yAxisFormat:d3.format("d"),tooltipWidth:50,interpolation:"basis"},A=y.width-(y.showExtraInfo?z.margin.left+z.margin.right:0),B=y.height-z.margin.top-z.margin.bottom,C=0,D=-1,E=-1,F=[],G=[],H=0,I=0,J=parseInt(A/(a.consts.verticalGridCount-1)),K=1;f();var L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_=d3.layout.stack().y(function(a){return a.y}),aa=d3.select({}).transition().duration(z.transaction.duration).ease(z.transaction.ease);_(G),e(),g(),k(),l(),m(),n(),q(),r(),v(),b.$on("realtimeChartDirective.onData."+y.namespace,function(a,b,c,d,e){C=d,H=0,s(!1,["",""]),e===!1&&F.push(b.map(function(a){return{y:parseInt(a),d:c}}))}),b.$on("realtimeChartDirective.onError."+y.namespace,function(b,c,d,e){C=e,c.code===a.responseCode.TIMEOUT?(H<y.timeoutMaxCount?F.push(G[G.length-1]):(u(),s(!0,c.message.split("_"))),H++):(u(),s(c.code!==a.responseCode.ERROR_BLACK,c.message.split("_")))}),b.$on("realtimeChartDirective.clear."+y.namespace,function(a,b,d){F.length=0,f(),c.html(""),t([{},{},{},{}]),_(G),e(),g(),k(),l(),m(),n(),q(),r()})}}}])}(),function(){"use strict";pinpointApp.constant("scatterDirectiveConfig",{scatterDataUrl:"/getScatterData.pinpoint",template:"<div id='scatter'></div>",images:{config:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTI2NzMzRDI2QTlGMTFFM0E1RENBRjZGODkwRDBCMEIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTI2NzMzRDM2QTlGMTFFM0E1RENBRjZGODkwRDBCMEIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBMjY3MzNEMDZBOUYxMUUzQTVEQ0FGNkY4OTBEMEIwQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBMjY3MzNEMTZBOUYxMUUzQTVEQ0FGNkY4OTBEMEIwQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pn/ejkcAAAFwSURBVHjanFKxSsNQFE2CFEtaTNsMCbSQ4lA6GSghi2igo/o/GVz6AfmD/EFGJ7cKDiVLO0hFEByzpG1EA5LUxntC80jFKhi4LzfnnnPfzXmPz7KM+9ezT6iq6gnF+T4Nny88/110VK1WbwRB4OM4vgyC4PVXIQlW9JqRwGo2mzm2XC65zWYzplSnBo1CeFDu1Ov1XhaLhVWpVBimKAqXJInVarWmJGQ42xHjybIcQSSK4rNt29cgOI5jR1Gkk5gLw1DC2LkvWGBCu90eDwaDDOF53hXhhwjf908LHByYBo2ArqZpfnY6HbEYw3XdJ5riAzEajR4LHJxut6syhyhq5c6apt1hdER5EnCIKzFzqPM7fUwkSZrhf+r1+lmaphFqjUZuJIeaYRgT4q7ZqFvxmn7+GAQYBDcRyIGhBs6PN4dyjKLP5/OL4XA4RSAHhlpZs3OO1PF+W3ggwxQ6u7d+v3+7s9Nfd3VrQm3fXf0SYADyptv3yy4A0QAAAABJRU5ErkJggg==",download:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RUU3MjQyMUQ2QTlGMTFFM0IxRTY4MjI3MUU5MUUyMzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RUU3MjQyMUU2QTlGMTFFM0IxRTY4MjI3MUU5MUUyMzMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFRTcyNDIxQjZBOUYxMUUzQjFFNjgyMjcxRTkxRTIzMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFRTcyNDIxQzZBOUYxMUUzQjFFNjgyMjcxRTkxRTIzMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlnySxAAAADPSURBVHjaxFLBDYMwDLQjMgEf4M8E4Y0YgzHaTTpGFuDfARAdoH3DiwmQSLmqRIZSpPLpSTH4krOjc9g5R0cQIDDzgozj2Ffrum6xOTcKtqolSUJCuNlR0UH8WTiZcpPGzEaB3xVWVXVO0/QhOeTgP1rKOU7/QdM0RZ7nd2OMwxc5eHkeixEm+71aKUVhGJLWmoZhoL7vaRxHX7xtW/ZzlHOTgDiKIirL8oTcWnuZ914dsyzbfXfoCuAmdV3z15ezBgRr8Nuc4ocRXhGeAgwAFHJVgfQ6KdUAAAAASUVORK5CYII=",fullscreen:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkMwOTc3QTg2QTlGMTFFMzk5MzhBOTM4OEFCMzg3MTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkMwOTc3QTk2QTlGMTFFMzk5MzhBOTM4OEFCMzg3MTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCQzA5NzdBNjZBOUYxMUUzOTkzOEE5Mzg4QUIzODcxNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCQzA5NzdBNzZBOUYxMUUzOTkzOEE5Mzg4QUIzODcxNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvZjiPIAAAE/SURBVHjanFKxaoRAEHXhbM4UopViGWzv0C5VUvsJqdP7A/6Dfb7DMmCVSuRCunClaKUYSKUQM2+zY1SsMjDuuDtv9u3ME9M0af+xAz6u687opmnENslxnFX1uq6FhhvDMKRluofvVeczuMr9vREmhMhRmRy/F3IukhOjM7Mh4B9VNkqQq67rR9u25VnbtsdxHPkZ6zcWRfFAN2qGYVzx3/e9X1XVC2LLsnzTNK8MQK5kCL4AwcqylPTiOH4m8C1igNI0fUIcBEGu3rwGRlFkK3qvRM9XtD+I9h3iLMvaXaDneRdF78T0cHPXdW+Iif6ZgavmALClB9q0nBRw3RyMAa0mWnJzGIbvJEneOeb9hRgEK0e2mjtG9kX+qeJH8hs163lkh2UlVWAruYIlp8ShzeNYqEQqaE9ym638R4ABADZiqF446UJLAAAAAElFTkSuQmCC",error:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAADvUlEQVRoge2ZQW8bRRTHf2+2tMTrkCYFkQ9QqBBKC03aOOkldqtKUcUFqeUbkAN3pFSIGxQOFRx6IN8AJeIYtVIc1xdqHAdCE3EgKeeqNAlV8dIm8u7j0FasHW+8u7E3Rcrv9mbe7P7/mtHsmx044IA9Ie14iI4fP1LdPjYKZEEHBE4g9KOkAUVwUO4rrIIuI9bt9CvrJbl5b2uv796TASc7POgJEyJ6BeiJOPyRotNGrSm78NMvcTXEMuDkMqfVeNdQLsZ9cQO3MDqZnqv8GnVgJAM6MtLlpLyvQD8BrKgva0EN0Rt2zZ6UYvFp2EGhDTzODp0wRmZABuLpC81d18jlnrnyWpjkUAac82fOqMoswht70xaaTU/1g9cKlTutElsa+CebGVbj5RXS7dEWDoGqqHc+VVhcaJEXzLNlY34EjrVVXXjWXSOjuy0nE9ShY2OvGmO+Z//EA7xued4POjLSFZQQaMCxnnwNvNcRWZGQAafL/SKwt1mjk8ucVvEWaP9WGRcXo0PNvhNNZ0CNd42XRzyAhUrTWdgxA052eFCNLnZeU2RUxBu084tL/sYdM+AJE8lpioR4mI93NPoDHT9+xNnue0D0wiwZhL/sXqdfZn7bftFUNwPVrb5zvKziAZTe6kYq42+qX0IiY0nqiYWRXF1Y1yneqUTFxEE56Q8P+QNReSvsc+x8uV2SAHAuDIfKE3jbHzfuQm+2S1AHqdPYaCDRijMm3f4gsBb6v9BooLovKqKgPPaHjQYeJCglHsKf/rBuF1JYFXgnzHPC7hrtRlR+98cNM6B3kxQTD132Rw0GTDFBJbFwhYI/rjOQPrxxB3iUqKJobHb3OXVf0DoDcvPelqrMJKspPCpM+ytRaPIdMMh3yUmKhIroVGPjDgPPf7TeSkRSNGZDn4kR61Og1mlFEajh8VmzjqYG0vnSCqI3OqspAqLfpm8vNN3iA2shu2ZPAktB/QmybDuHPg/qDDQgxeJT18hHwHpHZIVBeVhT90MplZ4EpexajfbMldeMepdkH4o8gaqIXjpa+PmP3fJaltPP/g5rDuVh++S1ZFPgoj1fqbRKDHUesOcrFdeSc0AStdJSTd2zqfmFUpjk0Aeanrnymu2mMijf0JkttgZy3XZTo62WjZ9Yl3zV7NlTWHyJMh73GT4UmEWsq+l8aSXq4L1ds14Yet9TMyHCFZTeiMM3VZgW0ak4t5MvaM9F9+V3D1c3UhmM5FBOPv/10c9/B/C/Ue4LsuoZXVFlvrvPKTcWZgccsA/8C1bvKjPyfF8QAAAAAElFTkSuQmCC"},options:{containerId:"",containerClass:"bigscatterchart",width:400,height:250,minX:0,maxX:1e3,minY:0,maxY:1e4,minZ:0,maxZ:5,bubbleSize:3,labelX:"",labelY:"(ms)",realtime:!1,chartAnimationTime:300,gridAxisStyle:{lineWidth:1,lineDash:[1,0],globalAlpha:1,strokeStyle:"#e3e3e3"},padding:{top:40,left:50,right:40,bottom:30},typeInfo:{0:["Failed","#d62728",20],1:["Success","#2ca02c",10]},propertyIndex:{x:0,y:1,meta:2,transactionId:3,type:4,groupCount:5},checkBoxImage:{checked:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODk0MjRENUI2Qjk2MTFFM0E3NkNCRkIyQTkxMjZFQjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODk0MjRENUM2Qjk2MTFFM0E3NkNCRkIyQTkxMjZFQjMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4OTQyNEQ1OTZCOTYxMUUzQTc2Q0JGQjJBOTEyNkVCMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4OTQyNEQ1QTZCOTYxMUUzQTc2Q0JGQjJBOTEyNkVCMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkJ02akAAAEfSURBVHjalJI/aoRQEMbnrU8RRVYsBAXJASxEtLGRXEDIJXKTpPcOHiDl1gsp1QvEIiD2AbGLmpm3f7Is68YMjOOb9/0Y/Rg2zzPEcTzDP6IsS7Y5QXTAsibFIH4BQVVVi1Mcx9liyTFN13W/+JpPI0iSpL1hGEHf9+E0TSBAxtifkGVZgSzLgBkMwwCbNZNOEIVpmo3v+78gigLMt+O/3IR0XW/yPH/uuu4AEqQoComeSIznhyUoDMP3cRwPoKZpLyjaqqoKJOacfy5B6Mc39QRYFMUrOtbQO4lt24Z70BlMkqSkSxJdmrMEiYiiSGwOrh6v6/oxTdMP6lGlM/Wv3RYMPY55hrMs292DKNn1kqOb4HketG0L5N5CsB8BBgCZjoUNsxfiYwAAAABJRU5ErkJggg==",
unchecked:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEQxQ0ZERUQ2Qjk2MTFFMzg5MjNGMjAzRjdCQ0FEMjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEQxQ0ZERUU2Qjk2MTFFMzg5MjNGMjAzRjdCQ0FEMjkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4RDFDRkRFQjZCOTYxMUUzODkyM0YyMDNGN0JDQUQyOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4RDFDRkRFQzZCOTYxMUUzODkyM0YyMDNGN0JDQUQyOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pq1+Js8AAABTSURBVHjaYvz//z+DiYnJfwYSwJkzZxgZjY2NYZoYidQHVs9Eoia4WhY0JxDUBfQWA7KNRGlCVsfEQCYY1UhLjf9hEUtEAgAnOUZyEjlIH0CAAQDn/BlKI9rDJAAAAABJRU5ErkJggg=="}}}),pinpointApp.directive("scatterDirective",["scatterDirectiveConfig","$rootScope","$compile","$timeout","webStorage","$window","$http","CommonAjaxService","TooltipService","AnalyticsService","PreferenceService",function(a,b,c,d,e,f,g,h,i,j,k){return{template:a.template,restrict:"EA",replace:!0,link:function(c,g,l){function m(c,g,h,l,m){var n=v.getQueryStartTime(),o=v.getQueryEndTime(),p=v.getFilter(),q=g.split("^")[0],r={};angular.copy(a.options,r),r.sPrefix="BigScatterChart2-"+parseInt(1e5*Math.random()),r.containerId=c,r.width=h?h:400,r.height=l?l:250,r.minX=n,r.maxX=o,r.errorImage=a.images.error,r.realtime=u();var s=new BigScatterChart2(r,t(m),[new BigScatterChart2.SettingPlugin(a.images.config).addCallback(function(a,b){e.add("scatter-y-min",b.min),e.add("scatter-y-max",b.max),a.changeRangeOfY(b),a.redraw()}),new BigScatterChart2.DownloadPlugin(a.images.download,"PNG").addCallback(function(a){j.send(j.CONST.MAIN,j.CONST.CLK_DOWNLOAD_SCATTER)}),new BigScatterChart2.WideOpenPlugin(a.images.fullscreen).addCallback(function(){var a=v.isRealtime()?"realtime/"+v.getQueryEndDateTime():v.getPartialURL(!1,!0);f.open("#/scatterFullScreenMode/"+x.applicationName+"@"+x.serviceType+"/"+a+"/"+t().join(","),"width=900, height=700, resizable=yes")}),new BigScatterChart2.HelpPlugin(i)],{sendAnalytics:function(a,b){j.send(j.CONST.MAIN,j.CONST["Success"===a?"TG_SCATTER_SUCCESS":"TG_SCATTER_FAILED"],j.CONST[b?"ON":"OFF"])},loadFromStorage:function(a){return e.get(a)},onSelect:function(a,b){if(3===arguments.length)f.open("#/transactionList/"+v.getPartialURL(!0,!1),g+"|"+arguments[0]+"|"+arguments[1]+"|"+arguments[2]);else{var c=g+"|"+b.fromX+"|"+b.toX+"|"+b.fromY+"|"+b.toY;f.open("#/transactionList/"+v.getPartialURL(!0,!1),c)}},onError:function(){}},k.getAgentAllStr());return d(function(){angular.isUndefined(m)?s.drawWithDataSource(new BigScatterChart2.DataLoadManager(q,p,{url:a.scatterDataUrl,realtime:u(),realtimeInterval:2e3,realtimeDefaultTimeGap:3e3,realtimeResetTimeGap:2e4,fetchLimit:5e3,fetchingInterval:2e3,useIntervalForFetching:!1},function(a,c,d){v.setQueryEndDateTime(c),b.$broadcast("responseTimeChartDirective.loadRealtime",q,s.getCurrentAgent(),a.min,a.max)})):s.addBubbleAndMoveAndDraw(s.createDataBlock(m)),f.htoScatter[g]=s},100),s}function n(a,b,c){g.children().hide(),r(),angular.isDefined(w[a])?(w[a].target.show(),u()?h.getServerTime(function(b){w[a].scatter.resume(b-k.getRealtimeScatterXRange(),b),w[a].scatter.selectAgent(k.getAgentAllStr(),!0)}):(w[a].scatter.resume(),w[a].scatter.selectAgent(k.getAgentAllStr(),!0))):p(a,b,c)}function o(a,b,c,d){angular.isDefined(w[a])?w[a].scatter.addBubbleAndMoveAndDraw(w[a].scatter.createDataBlocK(d)):p(a,b,c,d).hide()}function p(b,c,d,e){var f=angular.element(a.template),h=m(f,b,c,d,e);return w[b]={target:f,scatter:h},g.append(f),f}function q(a){g.children().hide(),angular.isDefined(w[a])&&(w[a].target.show(),w[a].scatter.selectAgent(k.getAgentAllStr(),!0))}function r(){angular.forEach(w,function(a,b){a.scatter.pause()})}function s(){for(var a in w)w[a].scatter.abort();w={}}function t(a){var b,c=[];if("undefined"!=typeof a)return $.each(a.scatter.metadata,function(a,b){c.push(b[0])}),c;if(x.agentList)return x.agentList;if(x.serverList)for(b in x.serverList){var d=x.serverList[b].instanceList;for(var e in d)c.push(d[e].name)}return c}function u(){return"realtime"===v.getPeriodType()}var v=null,w={},x=null;c.$on("scatterDirective.initialize",function(a,b){v=b,s(),g.empty()}),c.$on("scatterDirective.initializeWithNode",function(a,b,d,e){c.currentAgent=k.getAgentAllStr(),x=b,n(b.key,d,e)}),c.$on("scatterDirective.initializeWithData",function(a,b,d){c.currentAgent=k.getAgentAllStr();var e=b.split("^");x={applicationName:e[0],serviceType:e[1],key:b},o(b,null,null,d)}),c.$on("scatterDirective.showByNode",function(a,b){x=b,q(b.key)}),c.$on("responseTimeChartDirective.showErrorTransacitonList",function(b,c){f.htoScatter[x.key].selectType("Failed").fireDragEvent({animate:function(){},css:function(b){return"left"===b?a.options.padding.left+"px":"top"===b?a.options.padding.top+"px":"0px"},width:function(){return a.options.width-a.options.padding.left-a.options.padding.right},height:function(){return a.options.height-a.options.padding.top-a.options.padding.bottom}})}),c.$on("changedCurrentAgent",function(a,b){w[x.key].scatter.selectAgent(b)})}}}])}(),function(){"use strict";pinpointApp.constant("nodeInfoDetailsDirectiveConfig",{maxTimeToShowLoadAsDefaultForUnknown:43200}),pinpointApp.directive("nodeInfoDetailsDirective",["nodeInfoDetailsDirectiveConfig","$filter","$timeout","isVisibleService","$window","AnalyticsService","PreferenceService","TooltipService","CommonAjaxService",function(a,b,c,d,e,f,g,h,i){return{restrict:"EA",replace:!0,templateUrl:"features/nodeInfoDetails/nodeInfoDetails.html?v="+G_BUILD_TIME,scope:{},link:function(j,k){function l(a){var b=g.getResponseTypeFormat();return $.each(a,function(a,c){$.each(c,function(a,c){b[a]+=c})}),b}function m(a){var b=[];return $.each(a,function(a,c){for(var d=0;d<c.length;d++){var e=c[d];b.length<d+1&&(b[d]={key:e.key,values:[]});for(var f=0;f<e.values.length;f++)b[d].values.length<f+1&&(b[d].values[f]=[e.values[f][0],0]),b[d].values[f][1]+=e.values[f][1]}}),b}var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F=!1;t=!1,j.htLastUnknownNode=!1,angular.element(e).bind("resize",function(a){t&&/_GROUP$/.test(o.category)&&y(o)}),k.find(".unknown-list").bind("scroll",function(a){y(o)}),w=function(){p={},q={},s={},r=!1,j.currentAgent=g.getAgentAllStr(),j.showNodeInfoDetails=!1,j.node=!1,j.unknownNodeGroup=null,j.hosts=null,j.showNodeServers=!1,j.agents=null,j.showAgents=!1,j.showNodeResponseSummaryForUnknown=!1,j.showNodeResponseSummary=!1,j.showNodeLoad=!1,j.agentHistogram=!1,j.nodeOrderBy="totalCount",j.nodeOrderByNameClass="",j.nodeOrderByCountClass="glyphicon-sort-by-order-alt",j.nodeOrderByDesc=!0,"$apply"!=j.$$phase&&"$digest"!=j.$$phase&&"$apply"!=j.$root.$$phase&&"$digest"!=j.$root.$$phase&&j.$digest()},x=function(b){j.showNodeInfoDetails=!0,j.node=b,j.unknownNodeGroup=b.unknownNodeGroup,j.serverList=b.serverList,j.showNodeServers=!_.isEmpty(j.serverList),j.agentHistogram=b.agentHistogram,j.serverCount=0,j.errorServerCount=0;for(var d in j.serverList){var e=j.serverList[d].instanceList;for(var f in e)j.serverCount++,j.agentHistogram[e[f].name]&&j.agentHistogram[e[f].name].Error>0&&j.errorServerCount++}/_GROUP$/.test(b.serviceType)===!1?(j.showNodeResponseSummary=!0,j.showNodeLoad=!0,B("forNode",b.applicationName,b.histogram,"100%","150px"),D("forNode",b.applicationName,b.timeSeriesHistogram,"100%","220px",!0)):/_GROUP$/.test(b.serviceType)&&(j.showNodeResponseSummaryForUnknown=!(j.oNavbarVoService.getPeriod()<=a.maxTimeToShowLoadAsDefaultForUnknown),y(b),j.htLastUnknownNode=b,c(function(){k.find('[data-toggle="tooltip"]').tooltip("destroy").tooltip()})),"$apply"!=j.$$phase&&"$digest"!=j.$$phase&&"$apply"!=j.$root.$$phase&&"$digest"!=j.$root.$$phase&&j.$digest()},y=function(a){c(function(){angular.forEach(a.unknownNodeGroup,function(a){var c=a.applicationName,e=b("applicationNameToClassName")(c);if(!angular.isDefined(p[c])&&!angular.isDefined(q[c])){var f=".nodeInfoDetails .summaryCharts_"+e,g=angular.element(f),h=d(g.get(0),1);h&&(j.showNodeResponseSummaryForUnknown?(p[c]=!0,B(null,c,a.histogram,"360px","180px")):(q[c]=!0,D(null,c,a.timeSeriesHistogram,"360px","200px",!0)))}})})},B=function(a,c,d,e,f){var g=b("applicationNameToClassName")(c);a=a||"forNode_"+g,j.$broadcast("responseTimeChartDirective.initAndRenderWithData."+a,d,e,f,!1,!0)},C=function(a,c,d,e,f){var g=b("applicationNameToClassName")(c);a=a||"forNode_"+g,j.$broadcast("responseTimeChartDirective.updateData."+a,d)},D=function(a,c,d,e,f,g){var h=b("applicationNameToClassName")(c);a=a||"forNode_"+h,j.$broadcast("loadChartDirective.initAndRenderWithData."+a,d,e,f,g)},E=function(a,c,d,e,f,g){var h=b("applicationNameToClassName")(c);a=a||"forNode_"+h,j.$broadcast("loadChartDirective.updateData."+a,d)},v=function(a){for(var b=null,c=0;c<o.unknownNodeGroup.length;c++)if(o.unknownNodeGroup[c].key===a){b=o.unknownNodeGroup[c];break}return b},z=function(){t=!1,k.hide()},A=function(){t=!0,k.show()},j.showNodeDetailInformation=function(a){o=v(a),x(o),j.$emit("nodeInfoDetail.showDetailInformationClicked",r,o)},j.goBackToUnknownNode=function(){o=j.htLastUnknownNode,p={},q={},x(o),j.$emit("nodeInfoDetail.showDetailInformationClicked",r,o)},j.renderNodeResponseSummary=function(a,b){angular.isUndefined(p[a])&&(p[a]=!0,B(null,a,v(b).histogram,"360px","180px"))},j.renderNodeLoad=function(a,b){angular.isUndefined(q[a])&&(q[a]=!0,D(null,a,v(b).timeSeriesHistogram,"360px","200px",!0))},j.renderNodeAgentCharts=function(a){f.send(f.CONST.MAIN,f.CONST.CLK_SHOW_GRAPH),angular.isDefined(s[a])||(s[a]=!0,B(null,a,o.agentHistogram[a],"100%","150px"),D(null,a,o.agentTimeSeriesHistogram[a],"100%","200px",!0))},j.nodeSearchChange=function(){y(o)},j.nodeOrderByName=function(){"applicationName"===j.nodeOrderBy?(j.nodeOrderByDesc=!j.nodeOrderByDesc,"glyphicon-sort-by-alphabet-alt"===j.nodeOrderByNameClass?j.nodeOrderByNameClass="glyphicon-sort-by-alphabet":j.nodeOrderByNameClass="glyphicon-sort-by-alphabet-alt"):(j.nodeOrderByNameClass="glyphicon-sort-by-alphabet-alt",j.nodeOrderByCountClass="",j.nodeOrderByDesc=!0,j.nodeOrderBy="applicationName"),y(o)},j.nodeOrderByCount=function(){"totalCount"===j.nodeOrderBy?(j.nodeOrderByDesc=!j.nodeOrderByDesc,"glyphicon-sort-by-order-alt"===j.nodeOrderByCountClass?j.nodeOrderByCountClass="glyphicon-sort-by-order":j.nodeOrderByCountClass="glyphicon-sort-by-order-alt"):(j.nodeOrderByCountClass="glyphicon-sort-by-order-alt",j.nodeOrderByNameClass="",j.nodeOrderByDesc=!0,j.nodeOrderBy="totalCount"),y(o)},j.showUnknownNodeBy=function(a,b){return a?b.applicationName.indexOf(a)>-1||b.totalCount.toString().indexOf(a)>-1:!0},j.showServerList=function(){f.send(f.CONST.MAIN,f.CONST.CLK_SHOW_SERVER_LIST),j.$emit("serverListDirective.show",!0,o,j.oNavbarVoService)},j.$on("nodeInfoDetailsDirective.initialize",function(a,b,c,d,e,f,g,h){A(),w(),r=c,u=d.key,o=d,j.htLastUnknownNode=!1,j.oNavbarVoService=f,j.nodeSearch=h||"",n=e,x(d)}),j.$on("nodeInfoDetailsDirective.hide",function(a){z()}),j.$on("nodeInfoDetailsDirective.lazyRendering",function(a,b){y(o)}),j.$on("responseTimeChartDirective.itemClicked.forNode",function(a,b){}),j.$on("responseTimeChartDirective.loadRealtime",function(a,b,c,d,e){angular.isUndefined(j.node)||j.node.applicationName!==b||F===!1&&(F=!0,i.getResponseTimeHistogramData({applicationName:j.node.applicationName,serviceTypeName:j.node.category,from:d,to:e},function(a){c===g.getAgentAllStr()?(C("forNode",j.node.applicationName,l(a.summary)),E("forNode",j.node.applicationName,m(a.timeSeries))):(C("forNode",j.node.applicationName,a.summary[c]),E("forNode",j.node.applicationName,a.timeSeries[c])),F=!1},function(){F=!1}))}),j.$on("changedCurrentAgent",function(a,b){var c=null,d=null;b===g.getAgentAllStr()?(c=j.node.histogram,d=j.node.timeSeriesHistogram):(c=j.node.agentHistogram[b],d=j.node.agentTimeSeriesHistogram[b]),B("forNode",j.node.applicationName,c,"100%","150px"),D("forNode",j.node.applicationName,d,"100%","220px",!0)}),h.init("responseSummaryChart"),h.init("loadChart")}}}])}(),function(){"use strict";pinpointApp.constant("linkInfoDetailsDirectiveConfig",{maxTimeToShowLoadAsDefaultForUnknown:43200}),pinpointApp.directive("linkInfoDetailsDirective",["linkInfoDetailsDirectiveConfig","$filter","ServerMapFilterVoService","filteredMapUtilService","$timeout","isVisibleService","ServerMapHintVoService","AnalyticsService","$window",function(a,b,c,d,e,f,g,h,i){return{restrict:"EA",replace:!0,templateUrl:"features/linkInfoDetails/linkInfoDetails.html?v="+G_BUILD_TIME,scope:!0,link:function(j,k,l){var m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;j.linkSearch="",s=!1,t=!1,q=!1,j.htLastUnknownLink=!1,angular.element(i).bind("resize",function(a){q&&n.targetRawData&&z(n)}),k.find(".unknown-list").bind("scroll",function(a){z(n)}),v=function(){m=!1,n=!1,o={},r={},p={},j.linkCategory=null,j.unknownLinkGroup=null,j.showLinkInfoDetails=!1,j.showLinkResponseSummary=!1,j.showLinkLoad=!1,j.showLinkServers=!1,j.linkSearch="",j.linkOrderBy="totalCount",j.linkOrderByNameClass="",j.linkOrderByCountClass="glyphicon-sort-by-order-alt",j.linkOrderByDesc=!0,j.sourceApplicationName="",j.sourceHistogram=!1,j.namespace=null,j.$$phase||j.$digest()},w=function(b){if(j.link=b,b.unknownLinkGroup)j.unknownLinkGroup=b.unknownLinkGroup,j.htLastUnknownLink=b,j.showLinkResponseSummaryForUnknown=!(j.oNavbarVoService.getPeriod()<=a.maxTimeToShowLoadAsDefaultForUnknown),z(b),e(function(){k.find('[data-toggle="tooltip"]').tooltip("destroy").tooltip()});else{j.showLinkResponseSummary=!0,j.showLinkLoad=!0,y("forLink",b.targetInfo.applicationName,b.histogram,"100%","150px"),x("forLink",b.targetInfo.applicationName,b.timeSeriesHistogram,"100%","220px",!0),j.showLinkServers=!_.isEmpty(b.sourceHistogram),j.sourceApplicationName=b.sourceInfo.applicationName,j.sourceHistogram=b.sourceHistogram,j.fromNode=b.fromNode,j.serverCount=0,j.errorServerCount=0;for(var c in j.sourceHistogram)j.serverCount++,j.sourceHistogram[c].Error>0&&j.errorServerCount++}j.showLinkInfoDetails=!0,j.$$phase||j.$digest()},z=function(a){e(function(){angular.forEach(a.unknownLinkGroup,function(a,c){var d=a.targetInfo.applicationName,e=b("applicationNameToClassName")(d);if(!angular.isDefined(o[d])&&!angular.isDefined(p[d])){var g=".linkInfoDetails .summaryCharts_"+e,h=angular.element(g),i=f(h.get(0),1);i&&(j.showLinkResponseSummaryForUnknown?(o[d]=!0,C(null,a,"360px","180px")):(p[d]=!0,x(null,d,a.timeSeriesHistogram,"360px","200px",!0)))}})})},y=function(a,e,f,h,i){var k=b("applicationNameToClassName")(e);a=a||"forLink_"+k,"forLink"===a&&s?j.$broadcast("responseTimeChartDirective.updateData."+a,f):("forLink"===a&&(s=!0),j.$broadcast("responseTimeChartDirective.initAndRenderWithData."+a,f,h,i,!0,!0),j.$on("responseTimeChartDirective.itemClicked."+a,function(a,b){var e=b.responseTime,f=b.count,h=new c;h.setMainApplication(n.filterApplicationName).setMainServiceTypeCode(n.filterApplicationServiceTypeCode),"USER"===n.sourceInfo.serviceType?h.setFromApplication("USER").setFromServiceType("USER"):h.setFromApplication(n.sourceInfo.applicationName).setFromServiceType(n.sourceInfo.serviceType),h.setToApplication(n.targetInfo.applicationName).setToServiceType(n.targetInfo.serviceType),"error"===e.toLowerCase()?h.setIncludeException(!0):"slow"===e.toLowerCase()?h.setResponseFrom(1e3*d.getStartValueForFilterByLabel(e,f)).setIncludeException(!1).setResponseTo("max"):h.setResponseFrom(1e3*d.getStartValueForFilterByLabel(e,f)).setIncludeException(!1).setResponseTo(1e3*parseInt(e,10));var i=new g;n.sourceInfo.isWas&&n.targetInfo.isWas&&i.setHint(n.targetInfo.applicationName,n.filterTargetRpcList),j.$emit("linkInfoDetailsDirective.ResponseSummary.barClicked",h,i)}))},C=function(a,e,f,h){var i=b("applicationNameToClassName")(e.targetInfo.applicationName);a=a||"forLink_"+i,"forLink"===a&&s?j.$broadcast("responseTimeChartDirective.updateData."+a,e.histogram):("forLink"===a&&(s=!0),j.$broadcast("responseTimeChartDirective.initAndRenderWithData."+a,e.histogram,f,h,!0,!0),j.$on("responseTimeChartDirective.itemClicked."+a,function(a,b){var f=b.responseTime,h=b.count,i=new c;i.setMainApplication(e.filterApplicationName).setMainServiceTypeCode(e.filterApplicationServiceTypeCode),"USER"===e.sourceInfo.serviceType?i.setFromApplication("USER").setFromServiceType("USER"):i.setFromApplication(e.sourceInfo.applicationName).setFromServiceType(e.sourceInfo.serviceType),i.setToApplication(e.targetInfo.applicationName).setToServiceType(e.targetInfo.serviceType),"error"===f.toLowerCase()?i.setIncludeException(!0):"slow"===f.toLowerCase()?i.setResponseFrom(1e3*d.getStartValueForFilterByLabel(f,h)).setIncludeException(!1).setResponseTo("max"):i.setResponseFrom(1e3*d.getStartValueForFilterByLabel(f,h)).setIncludeException(!1).setResponseTo(1e3*parseInt(f,10));var k=new g;e.sourceInfo.isWas&&e.targetInfo.isWas&&k.setHint(e.targetInfo.applicationName,e.filterTargetRpcList),j.$emit("linkInfoDetailsDirective.ResponseSummary.barClicked",i,k)}))},x=function(a,c,d,e,f,g){var h=b("applicationNameToClassName")(c);a=a||"forLink_"+h,"forLink"===a&&t?j.$broadcast("loadChartDirective.updateData."+a,d):("forLink"===a&&(t=!0),j.$broadcast("loadChartDirective.initAndRenderWithData."+a,d,e,f,g))},D=function(a){for(var b=null,c=0;c<n.unknownLinkGroup.length;c++)if(n.unknownLinkGroup[c].key===a){b=n.unknownLinkGroup[c];break}return b},j.showLinkDetailInformation=function(a){n=D(a),w(n),j.$emit("linkInfoDetail.showDetailInformationClicked",m,n)},j.goBackToUnknownLink=function(){n=j.htLastUnknownLink,o={},p={},w(n),j.$emit("linkInfoDetail.showDetailInformationClicked",m,n)},j.renderLinkResponseSummary=function(a,b){angular.isUndefined(o[a])&&(o[a]=!0,C(null,D(b),"360px","180px"))},j.renderLinkLoad=function(a,b){angular.isUndefined(p[a])&&(p[a]=!0,x(null,a,D(b).timeSeriesHistogram,"360px","200px",!0))},A=function(){q=!1,k.hide()},B=function(){q=!0,k.show()},j.showServerList=function(){h.send(h.CONST.MAIN,h.CONST.CLK_SHOW_SERVER_LIST),j.$emit("serverListDirective.show",!1,n,j.oNavbarVoService)},j.linkOrderByName=function(){"targetInfo.applicationName"===j.linkOrderBy?(j.linkOrderByDesc=!j.linkOrderByDesc,"glyphicon-sort-by-alphabet-alt"===j.linkOrderByNameClass?j.linkOrderByNameClass="glyphicon-sort-by-alphabet":j.linkOrderByNameClass="glyphicon-sort-by-alphabet-alt"):(j.linkOrderByNameClass="glyphicon-sort-by-alphabet-alt",j.linkOrderByCountClass="",j.linkOrderByDesc=!0,j.linkOrderBy="targetInfo.applicationName"),z(n)},j.linkOrderByCount=function(){"totalCount"===j.linkOrderBy?(j.linkOrderByDesc=!j.linkOrderByDesc,"glyphicon-sort-by-order-alt"===j.linkOrderByCountClass?j.linkOrderByCountClass="glyphicon-sort-by-order":j.linkOrderByCountClass="glyphicon-sort-by-order-alt"):(j.linkOrderByCountClass="glyphicon-sort-by-order-alt",j.linkOrderByNameClass="",j.linkOrderByDesc=!0,j.linkOrderBy="totalCount"),z(n)},j.showUnknownLinkBy=function(a,b){return a?b.targetInfo.applicationName.indexOf(a)>-1||b.totalCount.toString().indexOf(a)>-1:!0},j.passingTransactionMapFromLinkInfoDetails=function(a){var b=D(a),d=new c;d.setMainApplication(b.filterApplicationName).setMainServiceTypeCode(b.filterApplicationServiceTypeCode).setFromApplication(b.sourceInfo.applicationName).setFromServiceType(b.sourceInfo.serviceType).setToApplication(b.targetInfo.applicationName).setToServiceType(b.targetInfo.serviceType);var e=new g;b.sourceInfo.isWas&&b.targetInfo.isWas&&e.setHint(b.toNode.applicationName,b.filterTargetRpcList),j.$emit("linkInfoDetailsDirective.openFilteredMap",d,e)},j.openFilterWizard=function(a){var b=D(a);j.$emit("linkInfoDetailsDirective.openFilterWizard",b)},j.renderLinkAgentCharts=function(a){angular.isDefined(r[a])||(r[a]=!0,y(null,a,n.sourceHistogram[a],"100%","150px"),x(null,a,n.sourceTimeSeriesHistogram[a],"100%","200px",!0))},j.linkSearchChange=function(){z(n)},j.$on("linkInfoDetailsDirective.hide",function(a){A()}),j.$on("linkInfoDetailsDirective.initialize",function(a,b,c,d,e,f,g){B(),v(),m=c,u=d.key,n=d,j.htLastUnknownLink=!1,j.oNavbarVoService=f,w(d)}),j.$on("linkInfoDetailsDirective.lazyRendering",function(a,b){z(n)})}}}])}(),function(){"use strict";pinpointApp.constant("agentListConfig",{}),pinpointApp.directive("agentListDirective",["agentListConfig","$rootScope","AgentAjaxService","TooltipService","AnalyticsService",function(a,b,c,d,e){return{restrict:"EA",replace:!0,templateUrl:"features/agentList/agentList.html?v="+G_BUILD_TIME,link:function(a,b,f){d.init("agentList");var g={sign:{100:"ok-sign",200:"minus-sign",201:"minus-sign",300:"remove-sign","-1":"question-sign"},color:{100:"#40E340",200:"#F00",201:"#F00",300:"#AAA","-1":"#AAA"}},h=function(b,d,e,f,g){c.getAgentList({application:b,from:e,to:f},function(b){b.errorCode||b.status||(a.agentGroup=b,a.select(i(g)))})},i=function(b){for(var c in a.agentGroup)for(var d in a.agentGroup[c])if(a.agentGroup[c][d].agentId===b)return a.agentGroup[c][d];return!1};a.select=function(b){e.send(e.CONST.INSPECTOR,e.CONST.CLK_CHANGE_AGENT_INSPECTOR),a.currentAgent=b,a.$emit("agentListDirective.agentChanged",b)},a.getState=function(a){return g.sign[a+""]},a.getStateColor=function(a){return g.color[a+""]},a.$on("agentListDirective.initialize",function(a,b){h(b.getApplicationName(),b.getServiceTypeName(),b.getQueryStartTime(),b.getQueryEndTime(),b.getAgentId())})}}}])}(),function(a){"use strict";pinpointApp.constant("agentInfoConfig",{agentStatUrl:"/getAgentStat.pinpoint"}),pinpointApp.directive("agentInfoDirective",["agentInfoConfig","$timeout","AlertsService","ProgressBarService","AgentDaoService","AgentAjaxService","TooltipService","AnalyticsService","helpContentService",function(b,c,d,e,f,g,h,i,j){return{restrict:"EA",replace:!0,templateUrl:"features/agentInfo/agentInfo.html?v"+G_BUILD_TIME,link:function(b,k,l){b.agentInfoTemplate="features/agentInfo/agentInfoReady.html?v="+G_BUILD_TIME,b.showEventInfo=!1,b.showDetail=!1,b.selectTime=-1;var m,n=null,o=!1,p=new d,q=new e,r=null,s=function(c){null===r&&(r=a("#target-picker"),r.datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",controlType:"select",showButtonPanel:!0,onSelect:function(){},onClose:function(a){var c=moment(a,"YYYY-MM-DD HH:mm:ss").valueOf();b.selectTime!==c&&n.setSelectTime(c)}}),a("#ui-datepicker-div").addClass("inspector-datepicker")),t(c)},t=function(a){r.datetimepicker("setDate",new Date(a))},u=function(c,d){null!==n?n.emptyData():n=new TimeSlider("timeSlider",{width:a("#timeSlider").get(0).getBoundingClientRect().width,height:90,handleSrc:"images/handle.png",timeSeries:d?d:A(c),handleTimeSeries:c,selectTime:c[1],eventData:[]}).addEvent("clickEvent",function(a){z(a[2])}).addEvent("selectTime",function(a){b.selectTime=a,y(a),w(),t(a)}).addEvent("changeSelectionZone",function(a){x(b.agent.agentId,a,v(a[0],a[1]),function(){})}).addEvent("changeSliderTimeSeries",function(a){})},v=function(a,b){return(b-a)/1e3/60},w=function(){n.setDefaultStateLineColor(TimeSlider.EventColor[100==b.agent.status.state.code?"10100":"10200"])},x=function(a,d,e,h){q.startLoading(),q.setLoading(40),g.getAgentStateForChart({agentId:a,from:d[0],to:d[1],sampleRate:f.getSampleRate(e)},function(a){return a.errorCode||a.status?(q.stopLoading(),void p.showError("There is some error.")):(b.agentStat=a,angular.isDefined(a.type)&&a.type&&(b.agent.jvmGcType=a.type),q.setLoading(80),D(a),c(function(){q.setLoading(100),q.stopLoading()},700),void h())})},y=function(a){q.startLoading(),q.setLoading(40),g.getAgentInfo({agentId:b.agent.agentId,timestamp:a},function(a){var c=b.agent.jvmGcType;q.setLoading(80),b.agent=a,b.agent.jvmGcType=c,b.currentServiceInfo=C(a),q.setLoading(100),q.stopLoading()})},z=function(a){g.getEvent({agentId:b.agent.agentId,eventTimestamp:a.eventTimestamp,eventTypeCode:a.eventTypeCode},function(a){a.errorCode||a.status?p.showError("There is some error."):(b.eventInfo=a,b.showEventInfo=!0)})},A=function(a){var b=a[0],c=a[1],d=1728e5,e=c-b;return e>d?[c-d,c]:[c-3*e,c]},B=function(){o===!1&&(h.init("heap"),h.init("permGen"),h.init("cpuUsage"),h.init("tps"),o=!0)},C=function(a){if(a.serverMetaData&&a.serverMetaData.serviceInfos)for(var b=a.serverMetaData.serviceInfos,c=0;c<b.length;++c)if(b[c].serviceLibs.length>0)return b[c]},D=function(a){var c={id:"heap",title:"Heap Usage",span:"span12",line:[{id:"JVM_MEMORY_HEAP_USED",key:"Used",values:[],isFgc:!1},{id:"JVM_MEMORY_HEAP_MAX",key:"Max",values:[],isFgc:!1},{id:"fgc",key:"FGC",values:[],bar:!0,isFgc:!0}]},d={id:"nonheap",title:"PermGen Usage",span:"span12",line:[{id:"JVM_MEMORY_NON_HEAP_USED",key:"Used",values:[],isFgc:!1},{id:"JVM_MEMORY_NON_HEAP_MAX",key:"Max",values:[],isFgc:!1},{id:"fgc",key:"FGC",values:[],bar:!0,isFgc:!0}]},e={id:"cpuLoad",title:"JVM/System Cpu Usage",span:"span12",isAvailable:!1},g={id:"tps",title:"Transactions Per Second",span:"span12",isAvailable:!1};b.memoryGroup=[c,d],b.cpuLoadChart=e,b.tpsChart=g,b.$broadcast("jvmMemoryChartDirective.initAndRenderWithData.forHeap",f.parseMemoryChartDataForAmcharts(c,a),"100%","270px"),b.$broadcast("jvmMemoryChartDirective.initAndRenderWithData.forNonHeap",f.parseMemoryChartDataForAmcharts(d,a),"100%","270px"),b.$broadcast("cpuLoadChartDirective.initAndRenderWithData.forCpuLoad",f.parseCpuLoadChartDataForAmcharts(e,a),"100%","270px"),b.$broadcast("tpsChartDirective.initAndRenderWithData.forTps",f.parseTpsChartDataForAmcharts(g,a),"100%","270px")},E=function(a,b){g.getEventList({agentId:a,from:b[0],to:b[1]},function(a){a.errorCode||a.status?p.showError("There is some error."):n.addEventData(a)})},F=function(a,c){b.cpuLoadChart.isAvailable&&b.$broadcast("cpuLoadChartDirective.showCursorAt.forCpuLoad",c.index)},G=function(a,c){b.tpsChart.isAvailable&&b.$broadcast("tpsChartDirective.showCursorAt.forTps",c.index)};b.toggleHelp=function(){a("._wrongApp").popover({title:"<span class='label label-info'>"+m.getApplicationName()+"</span> <span class='glyphicon glyphicon-resize-horizontal'></span> <span class='label label-info'>"+b.agent.applicationName+"</span>",content:j.inspector.wrongApp.replace(/\{\{application1\}\}/g,m.getApplicationName()).replace(/\{\{application2\}\}/g,b.agent.applicationName).replace(/\{\{agentId\}\}/g,b.agent.agentId),html:!0}).popover("toggle")},b.isSameApplication=function(){return b.agent.applicationName===m.getApplicationName()},b.formatDate=function(a){return moment(a).format("YYYY.MM.DD HH:mm:ss")},b.hideEventInfo=function(){b.showEventInfo=!1},b.zoomInTimeSlider=function(){n.zoomIn()},b.zoomOutTimeSlider=function(){n.zoomOut();var a=n.getSliderTimeSeries();E(b.agent.agentId,a)},b.toggleShowDetail=function(){i.send(i.CONST.INSPECTOR,i.CONST.CLK_SHOW_SERVER_TYPE_DETAIL),b.showDetail=!b.showDetail},b.hasDuplicate=function(a,c){for(var d=b.currentServiceInfo.serviceLibs.length,e=!1,f=0;d>f;f++)if(b.currentServiceInfo.serviceLibs[f]==a&&f!=c){e=!0;break}return e?"color:red":""},b.selectServiceInfo=function(a){a.serviceLibs.length>0&&(b.currentServiceInfo=a)},b.$on("agentInfoDirective.initialize",function(a,d,e){m=d,b.agentInfoTemplate="features/agentInfo/agentInfoMain.html?v="+G_BUILD_TIME,b.agent=e,b.chartGroup=null,b.currentServiceInfo=C(e);var f,g,h=[];null===n?(h[0]=m.getQueryStartTime(),h[1]=m.getQueryEndTime(),g=m.getPeriod()):(h=n.getSelectionTimeSeries(),f=n.getSliderTimeSeries(),g=v(h[0],h[1])),-1===b.selectTime?b.selectTime=m.getQueryEndTime():b.selectTime!==m.getQueryEndTime()&&y(b.selectTime),c(function(){x(e.agentId,h,g,function(){s(b.selectTime),B(),u(h,f),w(),E(e.agentId,f||A(h))}),b.$apply()})}),b.$on("jvmMemoryChartDirective.cursorChanged.forHeap",function(a,c){b.$broadcast("jvmMemoryChart.showCursorAt.forNonHeap",c.index),F(a,c),G(a,c)}),b.$on("jvmMemoryChartDirective.cursorChanged.forNonHeap",function(a,c){b.$broadcast("jvmMemoryChartDirective.showCursorAt.forHeap",c.index),F(a,c),G(a,c)}),b.$on("cpuLoadChartDirective.cursorChanged.forCpuLoad",function(a,c){b.$broadcast("jvmMemoryChartDirective.showCursorAt.forHeap",c.index),b.$broadcast("jvmMemoryChartDirective.showCursorAt.forNonHeap",c.index),G(a,c)}),b.$on("tpsChartDirective.cursorChanged.forTps",function(a,c){b.$broadcast("jvmMemoryChartDirective.showCursorAt.forHeap",c.index),b.$broadcast("jvmMemoryChartDirective.showCursorAt.forNonHeap",c.index),F(a,c)})}}}])}(jQuery),function(){"use strict";pinpointApp.constant("timeSliderDirectiveConfig",{scaleCount:10}),pinpointApp.directive("timeSliderDirective",["timeSliderDirectiveConfig","$timeout","AnalyticsService",function(a,b,c){return{restrict:"EA",replace:!0,templateUrl:"features/timeSlider/timeSlider.html?v="+G_BUILD_TIME,link:function(d,e,f){var g,h,i,j,k,l,m;g=e.find(".timeslider_input"),d.oTimeSliderVoService=null,d.disableMore=!1,d.done=!1,h=function(a){d.oTimeSliderVoService=a,d.oTimeSliderVoService.getReady()!==!1&&(b(function(){g.jslider({from:d.oTimeSliderVoService.getFrom(),to:d.oTimeSliderVoService.getTo(),scale:j(i()),skin:"round_plastic",calculate:function(a){return k(a)},beforeMouseDown:function(a,b){return!1},beforeMouseMove:function(a,b){return!1}}),e.find(".jslider-pointer-from").addClass("jslider-transition"),e.find(".jslider-bg .v").addClass("jslider-transition")},100),m())},m=function(){d.oTimeSliderVoService.getCount()&&d.oTimeSliderVoService.getTotal()&&d.oTimeSliderVoService.getCount()>=d.oTimeSliderVoService.getTotal()&&(d.disableMore=!0)},i=function(){var b=d.oTimeSliderVoService.getFrom(),c=d.oTimeSliderVoService.getTo(),e=c-b,f=e/(a.scaleCount-1),g=[];return _.times(a.scaleCount,function(a){g.push(b+f*a)}),g},j=function(a){var b=[];return _.each(a,function(a){b.push(k(a))}),b},k=function(a){return moment(a).format("HH:mm")},l=function(a,b){g.jslider("value",a,b)},d.more=function(){c.send(c.CONST.CALLSTACK,c.CONST.CLK_MORE),d.$emit("timeSliderDirective.moreClicked",d.oTimeSliderVoService)},d.$on("timeSliderDirective.initialize",function(a,b){h(b),m()}),d.$on("timeSliderDirective.setInnerFromTo",function(a,b){d.oTimeSliderVoService=b,l(b.getInnerFrom(),b.getInnerTo()),m()}),d.$on("timeSliderDirective.enableMore",function(a){d.disableMore=!1}),d.$on("timeSliderDirective.disableMore",function(a){d.disableMore=!0}),d.$on("timeSliderDirective.changeMoreToDone",function(a){d.done=!0}),d.$on("timeSliderDirective.changeDoneToMore",function(a){d.done=!1})}}}])}(),function(){"use strict";pinpointApp.directive("transactionTableDirective",["$window","helpContentTemplate","helpContentService","AnalyticsService",function(a,b,c,d){return{restrict:"EA",replace:!0,templateUrl:"features/transactionTable/transactionTable.html?v="+G_BUILD_TIME,link:function(e,f,g){var h,i,j;e.transactionList=[],e.currentTransaction=null,e.transactionReverse=!1,h=function(){e.transactionList=[]},i=function(a){e.transactionList.length>0?(e.transactionOrderBy="",e.transactionReverse=!1,f.find("table tbody tr:last-child")[0].scrollIntoView(!0)):(e.transactionOrderBy="elapsed",e.transactionReverse=!0),e.transactionList=e.transactionList.concat(a),j(),f.find('[data-toggle="tooltip"]').tooltip("destroy").tooltip()},j=function(){var a=1;angular.forEach(e.transactionList,function(b,c){b.index=a++})},e.traceByApplication=function(a){d.send(d.CONST.CALLSTACK,d.CONST.CLK_TRANSACTION),e.currentTransaction=a,e.$emit("transactionTableDirective.applicationSelected",a)},e.openTransactionView=function(b){a.open("#/transactionView/"+b.agentId+"/"+b.traceId+"/"+b.collectorAcceptTime)},e.transactionOrder=function(a){e.transactionOrderBy===a?e.transactionReverse=!e.transactionReverse:e.transactionReverse=!1,d.send(d.CONST.CALLSTACK,d.CONST.ST_+a.charAt(0).toUpperCase()+a.substring(1),e.transactionReverse?d.CONST.DESCENDING:d.CONST.ASCENDING),
e.transactionOrderBy=a},e.$on("transactionTableDirective.appendTransactionList",function(a,b){i(b)}),e.$on("transactionTableDirective.clear",function(a){h()}),e.initTooltipster=function(){jQuery(".neloTooltip").tooltipster({content:function(){return b(c.transactionTable.log)},position:"bottom",trigger:"click",interactive:!0})}}}}])}(),function(a){"use strict";pinpointApp.directive("timelineDirective",["AnalyticsService",function(b){return{restrict:"EA",replace:!0,templateUrl:"features/timeline/timeline.html?v="+G_BUILD_TIME,link:function(c,d,e){var f,g,h,i,j,k=["#66CCFF","#FFCCFF","#66CC00","#FFCC33","#669999","#FF9999","#6666FF","#FF6633","#66FFCC","#006666","#FFFF00","#66CCCC","#FFCCCC","#6699FF","#FF99FF","#669900","#FF9933","#66FFFF","#996600","#66FF00"],l=[],m=new InfiniteCircularScroll({scroller:a(d),wrapper:a(d).find("div"),elementHeight:21,template:['<div class="timeline-bar">','<div class="clickable-bar">','<div class="timeline-bar-frame">',"<span>",'<span class="before" style="position:absolute;text-align:right;white-space:nowrap;left:-70px;display:none;"><span class="glyphicon glyphicon-resize-horizontal" aria-hidden="true"></span> <span class="startTime"></span>ms</span>','<span class="nameType"></span>','<span class="after" style="white-space:nowrap;display:none;">( <span class="glyphicon glyphicon-resize-horizontal" aria-hidden="true"></span> <span class="startTime"></span>ms )</span>',"</span>","</div>","</div>","</div>"].join("")});m.renderFunc(function(a,b,d){var e=o(d);a[b==this._selectedRow?"addClass":"removeClass"]("timeline-bar-selected").find("div.clickable-bar").css({width:p(d)+"px",backgroundColor:n(d[c.key.applicationName]),marginLeft:e+"px"}).find("span.nameType").html(d[c.key.applicationName]+"/"+d[c.key.apiType]+"("+(d[c.key.end]-d[c.key.begin])+"ms)"),e>=68?a.find("span.before").show().end().find("span.after").hide().end().find("span.before .startTime").html(q(d)):a.find("span.before").hide().end().find("span.after").show().end().find("span.after .startTime").html(q(d))}),g=function(){var a=[];return angular.forEach(c.timeline.callStack,function(b){b[c.key.isMethod]&&!b[c.key.excludeFromTimeline]&&""!==b[c.key.service]&&a.push(b)}),a},f=function(b){c.timeline=b,c.key=b.callStackIndex,c.barRatio=1e3/(b.callStack[0][c.key.end]-b.callStack[0][c.key.begin]),c.newCallStacks=g(),m.source(c.newCallStacks).viewAreaHeight(a(d).parentsUntil("div.wrapper").height()-70).selectedRow(-1,angular.noop).reset(),c.maxHeight=m.contentsAreaHeight(),i=0,c.$digest()};var n=function(a){var b=l.indexOf(a);return-1==b&&(l.push(a),b=l.length-1),k[b>=k.length?0:b]},o=function(a){return(a[c.key.begin]-c.timeline.callStackStart)*c.barRatio+.9},p=function(a){return(a[c.key.end]-a[c.key.begin])*c.barRatio+.9},q=function(a){return a[c.key.begin]-c.timeline.callStackStart};a(d).on("click",".clickable-bar",function(){b.send(b.CONST.CALLSTACK,b.CONST.CLK_CALL),c.$emit("transactionDetail.selectDistributedCallFlowRow",c.newCallStacks[parseInt(a(this).parent().attr("data-index"))][6])}),a(d).on("mouseenter",".timeline-bar-frame",function(b){a(this).parent().css({"box-shadow":"6px 6px 2px -2px rgba(0,0,0,0.75)","font-weight":"bold"})}),a(d).on("mouseleave",".timeline-bar-frame",function(b){a(this).parent().css({"box-shadow":"none","font-weight":"normal"})}),c.$on("timelineDirective.initialize",function(a,b){f(b)}),c.$on("timelineDirective.resize",function(b){m.resize(a(d).parentsUntil("div.wrapper").height()-70)}),c.$on("timelineDirective.searchCall",function(a,b,d){var e=h(i,-1,b);-1==e?0===i?c.$emit("transactionDetail.timelineSearchCallResult","No call took longer than {time}ms."):(e=h(0,i,b),-1==e?c.$emit("transactionDetail.timelineSearchCallResult","No call took longer than {time}ms."):j(e,"Loop")):j(e,"")}),h=function(a,b,d){return m.searchRow(a,b,function(a){return a[c.key.end]-a[c.key.begin]>=d})},j=function(a,b){m.selectedRow(a,function(a){this.$wrapper.find("div[data-index="+this._selectedRow+"]").removeClass("timeline-bar-selected"),this.$wrapper.find("div[data-index="+a+"]").addClass("timeline-bar-selected")}).moveByRow(a),i=a+1,c.$emit("transactionDetail.timelineSearchCallResult",b)}}}}])}(jQuery),function(){"use strict";pinpointApp.constant("agentChartGroupConfig",{POINTS_TIMESTAMP:0,POINTS_MIN:1,POINTS_MAX:2,POINTS_AVG:3}),pinpointApp.directive("agentChartGroupDirective",["agentChartGroupConfig","$timeout","AgentDaoService","AnalyticsService",function(a,b,c,d){return{restrict:"EA",replace:!0,templateUrl:"features/agentChartGroup/agentChartGroup.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(a,b,e){var f,g,h,i,j,k,l,m;a.showChartGroup=!1,h=function(e){f={Heap:!1,PermGen:!1,CpuLoad:!1},g=null,a.showChartGroup=!0,a.$digest(),c.getAgentStat(e,function(a,b){return a?void console.log("error",a):(f.Heap===!1&&i(b),void(g=b))}),b.tabs({activate:function(b,c){var e=c.newTab.text();return"Heap"==e?(d.send(d.CONST.MIXEDVIEW,d.CONST.CLK_HEAP),void(f.Heap===!1?i(g):a.$broadcast("jvmMemoryChartDirective.resize.forHeap_"+a.namespace))):"PermGen"==e?(d.send(d.CONST.MIXEDVIEW,d.CONST.CLK_PERM_GEN),void(f.PermGen===!1?j(g):a.$broadcast("jvmMemoryChartDirective.resize.forNonHeap_"+a.namespace))):"CpuLoad"==e?(d.send(d.CONST.MIXEDVIEW,d.CONST.CLK_CPU_LOAD),void(f.CpuLoad===!1?k(g):a.$broadcast("cpuLoadChartDirective.resize.forCpuLoad_"+a.namespace))):void 0}}),b.tabs("paging")},i=function(b){f.Heap=!0;var d={id:"heap",title:"Heap",span:"span12",line:[{id:"JVM_MEMORY_HEAP_USED",key:"Used",values:[],isFgc:!1},{id:"JVM_MEMORY_HEAP_MAX",key:"Max",values:[],isFgc:!1},{id:"fgc",key:"FGC",values:[],isFgc:!0}]};a.$broadcast("jvmMemoryChartDirective.initAndRenderWithData.forHeap_"+a.namespace,c.parseMemoryChartDataForAmcharts(d,b),"100%","100%")},j=function(b){f.PermGen=!0;var d={id:"nonheap",title:"PermGen",span:"span12",line:[{id:"JVM_MEMORY_NON_HEAP_USED",key:"Used",values:[],isFgc:!1},{id:"JVM_MEMORY_NON_HEAP_MAX",key:"Max",values:[],isFgc:!1},{id:"fgc",key:"FGC",values:[],isFgc:!0}]};a.$broadcast("jvmMemoryChartDirective.initAndRenderWithData.forNonHeap_"+a.namespace,c.parseMemoryChartDataForAmcharts(d,b),"100%","100%")},k=function(b){f.CpuLoad=!0;var d={id:"cpuLoad",title:"JVM/System Cpu Usage",span:"span12",isAvailable:!1};a.$broadcast("cpuLoadChartDirective.initAndRenderWithData.forCpuLoad_"+a.namespace,c.parseCpuLoadChartDataForAmcharts(d,b),"100%","100%")},l=function(b){f.Heap&&a.$broadcast("jvmMemoryChartDirective.showCursorAt.forHeap_"+a.namespace,b),f.PermGen&&a.$broadcast("jvmMemoryChartDirective.showCursorAt.forNonHeap_"+a.namespace,b),f.CpuLoad&&a.$broadcast("cpuLoadChartDirective.showCursorAt.forCpuLoad_"+a.namespace,b)},m=function(){f.Heap&&a.$broadcast("jvmMemoryChartDirective.resize.forHeap_"+a.namespace),f.PermGen&&a.$broadcast("jvmMemoryChartDirective.resize.forNonHeap_"+a.namespace),f.CpuLoad&&a.$broadcast("cpuLoadChartDirective.resize.forCpuLoad_"+a.namespace)},a.$on("agentChartGroupDirective.initialize."+a.namespace,function(a,b){h(b)}),a.$on("agentChartGroupDirective.showCursorAt."+a.namespace,function(a,b){l(b)}),a.$on("agentChartGroupDirective.resize."+a.namespace,function(a){m()})}}}])}(),function(){"use strict";pinpointApp.directive("sidebarTitleDirective",["$timeout","$rootScope","PreferenceService","AnalyticsService",function(a,b,c,d){return{restrict:"E",replace:!0,templateUrl:"features/sidebar/title/sidebarTitle.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(e,f,g){function h(a){if(e.currentAgent=c.getAgentAllStr(),"undefined"==typeof a)return void(e.agentList=[]);var b=[];if(a.serverList)for(var d in a.serverList){var f=a.serverList[d].instanceList;for(var g in f)b.push(g)}e.agentList=b}function i(b,c){e.isWas=angular.isDefined(c)&&angular.isDefined(c.isWas)?c.isWas:!1,e.stImage=b.getImage(),e.stImageShow=!!b.getImage(),e.stTitle=b.getTitle(),e.stImage2=b.getImage2(),e.stImage2Show=!!b.getImage2(),e.stTitle2=b.getTitle2(),a(function(){f.find('[data-toggle="tooltip"]').tooltip("destroy").tooltip()})}function j(){e.currentAgent=c.getAgentAllStr(),e.stImage=!1,e.stImageShow=!1,e.stTitle=!1,e.stImage2=!1,e.stTitle2=!1,e.stImage2Show=!1,e.isWas=!1,e.agentList=[]}e.agentList=[],a(function(){j()}),e.changeAgent=function(){d.send(d.CONST.INSPECTOR,d.CONST.CLK_CHANGE_AGENT_MAIN),b.$broadcast("changedCurrentAgent",e.currentAgent)},e.$on("sidebarTitleDirective.initialize."+e.namespace,function(a,b,c){i(b,c),h(c)}),e.$on("sidebarTitleDirective.empty."+e.namespace,function(a){j()})}}}])}(),function(){"use strict";pinpointApp.directive("filterInformationDirective",["$filter","$base64",function(a,b){return{restrict:"EA",replace:!0,templateUrl:"features/sidebar/filter/filterInformation.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(c,d,e){var f,g;f=function(d){if(g(),oServerMapFilterVo.getRequestUrlPattern()&&(c.urlPattern=b.decode(d.getRequestUrlPattern())),c.includeException=v.getIncludeException()?"Failed Only":"Success + Failed",angular.isNumber(d.getResponseFrom())&&oServerMapFilterVo.getResponseTo()){var e=[];e.push(a("number")(d.getResponseFrom())),e.push("ms"),e.push("~"),"max"===d.getResponseTo()?e.push("30,000+"):e.push(a("number")(d.getResponseTo())),e.push("ms"),c.responseTime=e.join(" ")}var f=d.getFromAgentName(),h=d.getToAgentName();f||h?c.agentFilterInfo=(f||"all")+" -> "+(h||"all"):c.agentFilterInfo=!1},g=function(){c.urlPattern="none",c.responseTime="none",c.includeException="none"},c.$on("filterInformationDirective.initialize."+c.namespace,function(a,b){f(b)})}}}])}(),function(){"use strict";pinpointApp.directive("distributedCallFlowDirective",["$filter","$timeout","CommonAjaxService",function(a,b,c){return{restrict:"E",replace:!0,templateUrl:"features/distributedCallFlow/distributedCallFlow.html?v=${buildTime}",scope:{namespace:"@"},link:function(d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;window.callStacks=[],o=function(a){var b=0,c=0,d="#";for(b=0,c=0;b<a.length;c=a.charCodeAt(b++)+((c<<5)-c));for(b=0,d="#";3>b;d+=("00"+(c>>8*b++&255).toString(16)).slice(-2));return d},k=function(a,b,c,d,e){var f=[];c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");var g=h.getItemById(e.id);i=g.agent?g.agent:i;var j=o(i),k=h.getIdxById(e.id),l="dcf-popover";if(g.hasException?l+=" has-exception":g.isMethod||(l+=" not-method"),f.push('<div class="'+l+'" data-container=".grid-canvas" data-toggle="popover" data-trigger="manual" data-placement="right" data-content="'+c+'">'),f.push("<div style='position:absolute;top:0;left:0;bottom:0;width:5px;background-color:"+j+"'></div>"),f.push("<span style='display:inline-block;height:1px;width:"+15*e.indent+"px'></span>"),window.callStacks[k+1]&&window.callStacks[k+1].indent>window.callStacks[k].indent?e._collapsed?f.push(" <span class='toggle expand'></span>&nbsp;"):f.push(" <span class='toggle collapse'></span>&nbsp;"):f.push(" <span class='toggle'></span>&nbsp;"),g.hasException)f.push('<span class="glyphicon glyphicon-fire"></span>&nbsp;');else if(g.isMethod){var m=parseInt(g.methodType);switch(m){case 100:f.push('<i class="xi-shipping"></i>&nbsp;');break;case 200:f.push('<span class="glyphicon glyphicon-transfer"></span>&nbsp;');break;case 900:f.push('<i class="xi-info-triangle" style="color:#FF6600"></i>&nbsp;')}}else"SQL"===g.method?f.push('<button type="button" class="btn btn-default btn-xs btn-success sql" style="padding:0px 2px 0px 2px"><span class="glyphicon glyphicon-eye-open sql"></span></button>&nbsp;'):f.push('<span class="glyphicon glyphicon-info-sign"></span>&nbsp;');return f.push(c),f.push("</div>"),f.join("")},l=function(a){var b=!0;if(angular.isDefined(a.parent)&&null!==a.parent)for(var c=window.callStacks[a.parent];c;)c._collapsed&&(b=!1),c=window.callStacks[c.parent];return b},q=function(a,b,c,d,e){var f=[];return f.push('<div class="dcf-popover" data-container=".grid-canvas" data-toggle="popover" data-trigger="manual" data-placement="right" data-content="'+c+'">'),f.push(c),f.push("</div>"),f.join("")},r=function(a,b,c,d,e){if(c&&0!==c.length){var f=[];f.push('<a class="btn btn-default btn-xs"'),f.push('href="'),f.push(c),f.push('" target="_blank">');var g=h.getItemById(e.id),i=g.logButtonName;return f.push(i),f.push("</a>"),f.join("")}},n=function(b,c,d,e,f){return a("date")(d,"HH:mm:ss sss")},p=function(a,b,c,d,e){if(angular.isUndefined(c)||null===c||""===c||0===c)return"";var f;return f="#5bc0de","<span class='percent-complete-bar' style='background:"+f+";width:"+c+"%'><span class='percent-complete-bar' style='background-color:#4343C8;width:"+e.execPer+"%;height:4px;float:left;margin-top:1px;'></span></span>"},m=function(a,b){var c=[],d=100/(b[0][a.end]-b[0][a.begin]);return angular.forEach(b,function(b,e){c.push({id:"id_"+e,parent:b[a.parentId]?b[a.parentId]-1:null,indent:b[a.tab],method:b[a.title],argument:b[a.arguments],execTime:b[a.begin]>0?b[a.begin]:null,gapMs:b[a.gap],timeMs:b[a.elapsedTime],timePer:b[a.elapsedTime]?(b[a.end]-b[a.begin])*d+.9:null,"class":b[a.simpleClassName],methodType:b[a.methodType],apiType:b[a.apiType],agent:b[a.agent],applicationName:b[a.applicationName],hasException:b[a.hasException],isMethod:b[a.isMethod],logLink:b[a.logPageUrl],logButtonName:b[a.logButtonName],isFocused:b[a.isFocused],execMilli:b[a.executionMilliseconds],execPer:b[a.elapsedTime]&&b[a.executionMilliseconds]?parseInt(b[a.executionMilliseconds].replace(/,/gi,""))/parseInt(b[a.elapsedTime].replace(/,/gi,""))*100:0})}),c},j=function(a){window.callStacks=m(a.callStackIndex,a.callStack);var f={enableCellNavigation:!0,enableColumnReorder:!0,enableTextSelectionOnCells:!0,topPanelHeight:30,rowHeight:25};h=new Slick.Data.DataView({inlineFilters:!0}),h.beginUpdate(),h.setItems(window.callStacks),h.setFilter(l),h.getItemMetadata=function(a){var b=h.getItemByIdx(a),c={cssClasses:""};return b.hasException===!0&&(c.cssClasses+=" error-point"),b.isFocused===!0&&(c.cssClasses+=" entry-point"),null!==b.execTime&&(c.cssClasses+=" id_"+(a+1)),c},h.endUpdate();var i=[{id:"method",name:"Method",field:"method",width:400,formatter:k},{id:"argument",name:"Argument",field:"argument",width:300,formatter:q},{id:"exec-time",name:"Start Time",field:"execTime",width:90,formatter:n},{id:"gap-ms",name:"Gap(ms)",field:"gapMs",width:70,cssClass:"right-align"},{id:"time-ms",name:"Exec(ms)",field:"timeMs",width:70,cssClass:"right-align"},{id:"time-per",name:"Exec(%)",field:"timePer",width:100,formatter:p},{id:"exec-milli",name:"Self(ms)",field:"execMilli",width:75,cssClass:"right-align"},{id:"class",name:"Class",field:"class",width:120},{id:"api-type",name:"API",field:"apiType",width:90},{id:"agent",name:"Agent",field:"agent",width:130},{id:"application-name",name:"Application",field:"applicationName",width:150}];g=new Slick.Grid(e.get(0),h,i,f),g.setSelectionModel(new Slick.RowSelectionModel);var j=!0,o=!1;g.onClick.subscribe(function(a,d){var f;if($(a.target).hasClass("toggle")&&(f=h.getItem(d.row),f&&(f._collapsed?f._collapsed=!1:f._collapsed=!0,h.updateItem(f.id,f)),a.stopImmediatePropagation()),$(a.target).hasClass("sql")){f=h.getItem(d.row);var g=h.getItem(d.row+1),i="sql="+encodeURIComponent(f.argument);angular.isDefined(g)&&"SQL-BindValue"===g.method?(i+="&bind="+encodeURIComponent(g.argument),c.getSQLBind("/sqlBind.pinpoint",i,function(a){$("#customLogPopup").find("h4").html("SQL").end().find("div.modal-body").html('<h4>Binded SQL <button class="btn btn-default btn-xs sql">Copy</button></h4><div style="position:absolute;left:10000px">'+a+'</div><pre class="prettyprint lang-sql" style="margin-top:0px">'+a.replace(/\t\t/g,"")+'</pre><hr><h4>Original SQL <button class="btn btn-default btn-xs sql">Copy</button></h4><div style="position:absolute;left:10000px">'+f.argument+'</div><pre class="prettyprint lang-sql" style="margin-top:0px">'+f.argument.replace(/\t\t/g,"")+'</pre><h4>SQL Bind Value <button class="btn btn-default btn-xs sql">Copy</button></h4><div style="position:absolute;left:10000px">'+g.argument+'</div><pre class="prettyprint lang-sql" style="margin-top:0px">'+g.argument+"</pre>").end().modal("show"),prettyPrint()})):($("#customLogPopup").find("h4").html("SQL").end().find("div.modal-body").html('<h4>Original SQL <button class="btn btn-default btn-xs sql">Copy</button></h4><div style="position:absolute;left:10000px">'+f.argument+'</div><pre class="prettyprint lang-sql" style="margin-top:0px">'+f.argument.replace(/\t\t/g,"")+"</pre>").end().modal("show"),prettyPrint())}o||(o=b(function(){j&&e.find(".dcf-popover").popover("hide"),j=!0,o=!1},300))}),g.onDblClick.subscribe(function(a,b){j=!1,$(a.target).popover("toggle")}),g.onCellChange.subscribe(function(a,b){h.updateItem(b.item.id,b.item)}),g.onActiveCellChanged.subscribe(function(a,b){d.$emit("distributedCallFlowDirective.rowSelected."+d.namespace,b.grid.getDataItem(b.row))}),s=function(a){var b=h.getItem(a+1);return!(!b||a!==b.parent)},g.onKeyDown.subscribe(function(a,b){var c=h.getItem(b.row);if(37==a.which)if(s(b.row))c._collapsed=!0,h.updateItem(c.id,c);else{var d=h.getItem(b.row-1);d&&g.setActiveCell(b.row-1,0)}else if(39==a.which){if(c._collapsed)c._collapsed=!1;else{var e=h.getItem(b.row+1);e&&g.setActiveCell(b.row+1,0)}h.updateItem(c.id,c)}}),h.onRowCountChanged.subscribe(function(a,b){g.updateRowCount(),g.render()}),h.onRowsChanged.subscribe(function(a,b){g.invalidateRows(b.rows),g.render()})},$("#customLogPopup").on("click","button",function(){var a=document.createRange();a.selectNode($(this).parent().next().get(0)),window.getSelection().addRange(a);try{document.execCommand("copy")}catch(b){console.log("unable to copy :",b)}window.getSelection().removeAllRanges()}),d.$on("distributedCallFlowDirective.initialize."+d.namespace,function(a,b){j(b)}),d.$on("distributedCallFlowDirective.resize."+d.namespace,function(a){g&&g.resizeCanvas()}),d.$on("distributedCallFlowDirective.selectRow."+d.namespace,function(a,b){var c=b-1;g.setSelectedRows([c]),g.setActiveCell(c,0),g.scrollRowToTop(c)}),d.$on("distributedCallFlowDirective.searchCall."+d.namespace,function(a,b,c){var e=t(b,c);-1==e?c>0?(u(t(b,0)),d.$emit("transactionDetail.calltreeSearchCallResult","Loop")):d.$emit("transactionDetail.calltreeSearchCallResult","No call took longer than {time}ms."):(u(e),d.$emit("transactionDetail.calltreeSearchCallResult",""))}),t=function(a,b){for(var c=0,d=-1,e=0;e<window.callStacks.length;e++)if(parseInt(window.callStacks[e].execMilli.replace(/,/gi,""))>=a){if(c==b){d=e;break}c++}return d},u=function(a){g.setSelectedRows([a]),g.setActiveCell(a,0),g.scrollRowIntoView(a,!0)}}}}])}(),function(){"use strict";pinpointApp.constant("responseTimeChartDirectiveConfig",{myColors:["#2ca02c","#3c81fa","#f8c731","#f69124","#f53034"]}),pinpointApp.directive("responseTimeChartDirective",["responseTimeChartDirectiveConfig","$timeout","AnalyticsService","PreferenceService",function(a,b,c,d){var e=d.getResponseTypeColor();return{template:"<div></div>",replace:!0,restrict:"EA",scope:{namespace:"@"},link:function(a,f,g){var h,i,j,k,l,m,n,o;j=function(){h="responseTimeId-"+a.namespace,f.attr("id",h)},k=function(a,b){f.css("width",a||"100%"),f.css("height",b||"150px")},l=function(d,e,f){b(function(){var b={type:"serial",theme:"none",dataProvider:d,startDuration:0,valueAxes:[{gridAlpha:.1,usePrefixes:!0}],graphs:[{balloonText:e?"[[category]] filtering":"",colorField:"color",labelText:"[[value]]",fillAlphas:.3,alphaField:"alpha",lineAlpha:.8,lineColor:"#787779",type:"column",valueField:"count"}],categoryField:"responseTime",categoryAxis:{gridAlpha:0}};f&&(b.chartCursor={fullWidth:!0,categoryBalloonAlpha:.7,cursorColor:"#000000",cursorAlpha:0,zoomable:!1}),i=AmCharts.makeChart(h,b),i.addListener("clickGraphItem",function(b){"Error"==b.item.category&&(c.send(c.CONST.MAIN,c.CONST.CLK_RESPONSE_GRAPH),a.$emit("responseTimeChartDirective.showErrorTransacitonList",b.item.category)),e&&a.$emit("responseTimeChartDirective.itemClicked."+a.namespace,b.item.serialDataItem.dataContext)}),e&&(i.addListener("clickGraphItem",m),i.addListener("rollOverGraphItem",function(a){a.event.target.style.cursor="pointer"}))})},m=function(b){a.$emit("responseTimeChartDirective.itemClicked."+a.namespace,b.item.serialDataItem.dataContext)},n=function(a){i.dataProvider=a,b(function(){i.validateData()})},o=function(a){angular.isUndefined(a)&&(a=d.getResponseTypeFormat());var b=[],c=[.2,.3,.4,.6,.6],f=0;for(var g in a)b.push({responseTime:g,count:a[g],color:e[f],alpha:c[f++]});return b},a.$on("responseTimeChartDirective.initAndRenderWithData."+a.namespace,function(a,b,c,d,e,f){j(),k(c,d),l(o(b),e,f)}),a.$on("responseTimeChartDirective.updateData."+a.namespace,function(a,b){n(o(b))})}}}])}(),function(){"use strict";pinpointApp.constant("loadChartDirectiveConfig",{}),pinpointApp.directive("loadChartDirective",["loadChartDirectiveConfig","$timeout","AnalyticsService","PreferenceService",function(a,b,c,d){var e=d.getResponseTypeColor();return{template:'<div style="text-align:center"></div>',replace:!0,restrict:"EA",scope:{namespace:"@"},link:function(a,d,f){var g,h,i,j,k,l,m,n,o,p;j=function(){g="loadId-"+a.namespace,d.attr("id",g)},k=function(a,b){a&&d.css("width",a),b&&d.css("height",b)},l=function(a,d){b(function(){var b={type:"serial",theme:"light",legend:{autoMargins:!1,align:"right",borderAlpha:0,equalWidths:!0,horizontalGap:0,verticalGap:0,markerSize:10,useGraphSettings:!1,valueWidth:0,spacing:0,markerType:"circle",position:"top"},dataProvider:a,valueAxes:[{stackType:"regular",axisAlpha:1,usePrefixes:!0,gridAlpha:.1}],categoryField:"time",categoryAxis:{startOnAxis:!0,gridPosition:"start",labelFunction:function(a,b,c){var d=a.indexOf("-"),e=a.indexOf(" ");return a.substring(d+1,e)+"\n"+a.substring(e+1)}},balloon:{fillAlpha:1,borderThickness:1},graphs:[{balloonText:"[[title]] : <b>[[value]]</b>",fillAlphas:.2,fillColors:e[0],lineAlpha:.8,lineColor:"#787779",title:h[0],type:"step",legendColor:e[0],valueField:h[0]},{balloonText:"[[title]] : <b>[[value]]</b>",fillAlphas:.3,fillColors:e[1],lineAlpha:.8,lineColor:"#787779",title:h[1],type:"step",legendColor:e[1],valueField:h[1]},{balloonText:"[[title]] : <b>[[value]]</b>",fillAlphas:.4,fillColors:e[2],lineAlpha:.8,lineColor:"#787779",title:h[2],type:"step",legendColor:e[2],valueField:h[2]},{balloonText:"[[title]] : <b>[[value]]</b>",fillAlphas:.6,fillColors:e[3],lineAlpha:.8,lineColor:"#787779",title:h[3],type:"step",legendColor:e[3],valueField:h[3]},{balloonText:"[[title]] : <b>[[value]]</b>",fillAlphas:.6,fillColors:e[4],lineAlpha:.8,lineColor:"#787779",title:h[4],type:"step",legendColor:e[4],valueField:h[4]}]};d&&(b.chartCursor={cursorPosition:"mouse",categoryBalloonAlpha:.7,categoryBalloonDateFormat:"H:NN"}),i=AmCharts.makeChart(g,b),i.addListener("clickGraph",function(a){c.send(c.CONST.MAIN,c.CONST.CLK_LOAD_GRAPH)})})},o=function(a,c){b(function(){var b={type:"serial",pathToImages:"./components/amcharts/images/",theme:"light",dataProvider:a,valueAxes:[{stackType:"regular",axisAlpha:0,gridAlpha:0,labelsEnabled:!1}],categoryField:"time",categoryAxis:{startOnAxis:!0,gridPosition:"start",labelFunction:function(a,b,c){return moment(a).format("HH:mm")}},chartScrollbar:{graph:"AmGraph-1"},graphs:[{id:"AmGraph-1",fillAlphas:.2,fillColors:e[0],lineAlpha:.8,lineColor:"#787779",type:"step",valueField:h[0]},{id:"AmGraph-2",fillAlphas:.3,fillColors:e[1],lineAlpha:.8,lineColor:"#787779",type:"step",valueField:h[1]},{id:"AmGraph-3",fillAlphas:.4,fillColors:e[2],lineAlpha:.8,lineColor:"#787779",type:"step",valueField:h[2]},{id:"AmGraph-4",fillAlphas:.6,fillColors:e[3],lineAlpha:.8,lineColor:"#787779",type:"step",valueField:h[3]},{id:"AmGraph-5",fillAlphas:.6,fillColors:e[4],lineAlpha:.8,lineColor:"#787779",type:"step",valueField:h[4]}]};c&&(b.chartCursor={avoidBalloonOverlapping:!1}),i=AmCharts.makeChart(g,b),i.addListener("changed",function(a){})})},p=function(){d.append("<h4 style='padding-top:25%'>No Data</h4>")},n=function(a){angular.isUndefined(i)?0!==a.length&&l(a,!0):(i.dataProvider=a,b(function(){i.validateData()}))},m=function(a){function b(a){for(var b in c)if(moment(a).format("YYYY-MM-DD HH:mm")===c[b].time)return b;return-1}if(angular.isUndefined(a))return[];h=[];for(var c=[],d=0;d<a.length;d++){var e=a[d];h.push(e.key);for(var f=0;f<e.values.length;f++){var g=e.values[f],i=b(g[0]);if(i>-1)c[i][e.key]=g[1];else{var j={time:moment(g[0]).format("YYYY-MM-DD HH:mm")};j[e.key]=g[1],c.push(j)}}}return c},a.$on("loadChartDirective.initAndRenderWithData."+a.namespace,function(a,b,c,d,e){j(),k(c,d);var f=m(b);0===f.length?p():l(f,e)}),a.$on("loadChartDirective.updateData."+a.namespace,function(a,b){n(m(b))}),a.$on("loadChartDirective.initAndSimpleRenderWithData."+a.namespace,function(a,b,c,d,e){j(),k(c,d);var f=m(b);0===f.length?p():o(f,e)})}}}])}(),function(){"use strict";angular.module("pinpointApp").directive("jvmMemoryChartDirective",["$timeout",function(a){return{template:"<div></div>",replace:!0,restrict:"E",scope:{namespace:"@"},link:function(b,c,d){var e,f,g,h,i,j,k;g=function(){e="multipleValueAxesId-"+b.namespace,c.attr("id",e)},h=function(a,b){a&&c.css("width",a),b&&c.css("height",b)},i=function(c){var d={type:"serial",theme:"light",autoMargins:!1,marginTop:10,marginLeft:70,marginRight:70,marginBottom:30,legend:{useGraphSettings:!0,autoMargins:!1,align:"right",position:"top",valueWidth:70},usePrefixes:!0,dataProvider:c,valueAxes:[{id:"v1",gridAlpha:0,axisAlpha:1,position:"right",title:"Full GC (ms)",minimum:0},{id:"v2",gridAlpha:0,axisAlpha:1,position:"left",title:"Memory (bytes)",minimum:0}],graphs:[{valueAxis:"v2",balloonText:"[[value]]B",legendValueText:"[[value]]B",lineColor:"rgb(174, 199, 232)",title:"Max",valueField:"Max",fillAlphas:0,connect:!1},{valueAxis:"v2",balloonText:"[[value]]B",legendValueText:"[[value]]B",lineColor:"rgb(31, 119, 180)",fillColor:"rgb(31, 119, 180)",title:"Used",valueField:"Used",fillAlphas:.4,connect:!1},{valueAxis:"v1",balloonFunction:function(a,b){var c=a.serialDataItem.dataContext,d=c.FGCTime+"ms",e=c.FGCCount;return e>1&&(d+=" ("+e+")"),d},legendValueText:"[[value]]ms",lineColor:"#FF6600",title:"FGC",valueField:"FGCTime",type:"column",fillAlphas:.3,connect:!1}],chartCursor:{categoryBalloonAlpha:.7,fullWidth:!0,cursorAlpha:.1},categoryField:"time",categoryAxis:{axisColor:"#DADADA",startOnAxis:!0,gridPosition:"start",labelFunction:function(a,b,c){return a.substring(a.indexOf(" ")+1)}}};a(function(){f=AmCharts.makeChart(e,d),f.chartCursor.addListener("changed",function(a){b.$emit("jvmMemoryChartDirective.cursorChanged."+b.namespace,a)})})},j=function(a){a?(angular.isNumber(a)&&(a=f.dataProvider[a].time),f.chartCursor.showCursorAt(a)):f.chartCursor.hideCursor()},k=function(){f&&(f.validateNow(),f.validateSize())},b.$on("jvmMemoryChartDirective.initAndRenderWithData."+b.namespace,function(a,b,c,d){g(),h(c,d),i(b)}),b.$on("jvmMemoryChartDirective.showCursorAt."+b.namespace,function(a,b){j(b)}),b.$on("jvmMemoryChartDirective.resize."+b.namespace,function(a){k()})}}}])}(),function(){"use strict";angular.module("pinpointApp").directive("cpuLoadChartDirective",["$timeout",function(a){return{template:"<div></div>",replace:!0,restrict:"E",scope:{namespace:"@"},link:function(b,c,d){var e,f,g,h,i,j,k;g=function(){e="multipleValueAxesId-"+b.namespace,c.attr("id",e)},h=function(a,b){a&&c.css("width",a),b&&c.css("height",b)},i=function(c){var d={type:"serial",theme:"light",autoMargins:!1,marginTop:10,marginLeft:70,marginRight:70,marginBottom:30,legend:{useGraphSettings:!0,autoMargins:!0,align:"right",position:"top",valueWidth:70},usePrefixes:!0,dataProvider:c,valueAxes:[{id:"v1",gridAlpha:0,axisAlpha:1,position:"left",title:"Cpu Usage (%)",maximum:100,minimum:0}],graphs:[{valueAxis:"v1",balloonText:"[[value]]%",legendValueText:"[[value]]%",lineColor:"rgb(31, 119, 180)",fillColor:"rgb(31, 119, 180)",title:"JVM",valueField:"jvmCpuLoad",fillAlphas:.4,connect:!1},{valueAxis:"v1",balloonText:"[[value]]%",legendValueText:"[[value]]%",lineColor:"rgb(174, 199, 232)",fillColor:"rgb(174, 199, 232)",title:"System",valueField:"systemCpuLoad",fillAlphas:.4,connect:!1},{valueAxis:"v1",showBalloon:!1,lineColor:"#FF6600",title:"Max",valueField:"maxCpuLoad",fillAlphas:0,visibleInLegend:!1}],chartCursor:{categoryBalloonAlpha:.7,fullWidth:!0,cursorAlpha:.1},categoryField:"time",categoryAxis:{axisColor:"#DADADA",startOnAxis:!0,gridPosition:"start",labelFunction:function(a,b,c){return moment(a).format("HH:mm:ss")}}};a(function(){f=AmCharts.makeChart(e,d),f.chartCursor.addListener("changed",function(a){b.$emit("cpuLoadChartDirective.cursorChanged."+b.namespace,a)})})},j=function(a){a?(angular.isNumber(a)&&(a=f.dataProvider[a].time),f.chartCursor.showCursorAt(a)):f.chartCursor.hideCursor()},k=function(){f&&(f.validateNow(),f.validateSize())},b.$on("cpuLoadChartDirective.initAndRenderWithData."+b.namespace,function(a,b,c,d){g(),h(c,d),i(b)}),b.$on("cpuLoadChartDirective.showCursorAt."+b.namespace,function(a,b){j(b)}),b.$on("cpuLoadChartDirective.resize."+b.namespace,function(a){k()})}}}])}(),function(){"use strict";angular.module("pinpointApp").directive("tpsChartDirective",["$timeout",function(a){return{template:"<div></div>",replace:!0,restrict:"E",scope:{namespace:"@"},link:function(b,c,d){var e,f,g,h,i,j,k;g=function(){e="multipleValueAxesId-"+b.namespace,c.attr("id",e)},h=function(a,b){a&&c.css("width",a),b&&c.css("height",b)},i=function(c){var d={type:"serial",theme:"light",autoMargins:!1,marginTop:10,marginLeft:70,marginRight:70,marginBottom:30,legend:{useGraphSettings:!0,autoMargins:!0,align:"right",position:"top",valueWidth:70},usePrefixes:!0,dataProvider:c,valueAxes:[{stackType:"regular",gridAlpha:0,axisAlpha:1,position:"left",title:"TPS",minimum:0}],graphs:[{balloonText:"Sampled Continuation : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(214, 141, 8)",fillColor:"rgb(214, 141, 8)",title:"S.C",valueField:"sampledContinuationTps",fillAlphas:.4,connect:!0},{balloonText:"Sampled New : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(252, 178, 65)",fillColor:"rgb(252, 178, 65)",title:"S.N",valueField:"sampledNewTps",fillAlphas:.4,connect:!0},{balloonText:"Unsampled Continuation : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(90, 103, 166)",fillColor:"rgb(90, 103, 166)",title:"U.C",valueField:"unsampledContinuationTps",fillAlphas:.4,connect:!0},{balloonText:"Unsampled New : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(160, 153, 255)",fillColor:"rgb(160, 153, 255)",title:"U.N",valueField:"unsampledNewTps",fillAlphas:.4,connect:!0},{balloonText:"Total : [[value]]",legendValueText:"[[value]]",lineColor:"rgba(31, 119, 180, 0)",fillColor:"rgba(31, 119, 180, 0)",valueField:"totalTps",fillAlphas:.4,connect:!0}],chartCursor:{categoryBalloonAlpha:.7,fullWidth:!0,cursorAlpha:.1},categoryField:"time",categoryAxis:{axisColor:"#DADADA",startOnAxis:!0,gridPosition:"start",labelFunction:function(a,b,c){return moment(a).format("HH:mm:ss")}}};a(function(){f=AmCharts.makeChart(e,d),f.chartCursor.addListener("changed",function(a){b.$emit("tpsChartDirective.cursorChanged."+b.namespace,a)})})},j=function(a){a?(angular.isNumber(a)&&(a=f.dataProvider[a].time),f.chartCursor.showCursorAt(a)):f.chartCursor.hideCursor()},k=function(){f&&(f.validateNow(),f.validateSize())},b.$on("tpsChartDirective.initAndRenderWithData."+b.namespace,function(a,b,c,d){g(),h(c,d),i(b)}),b.$on("tpsChartDirective.showCursorAt."+b.namespace,function(a,b){j(b)}),b.$on("tpsChartDirective.resize."+b.namespace,function(a){k()})}}}])}(),function(){"use strict";pinpointApp.directive("loadingDirective",["$timeout","$templateCache","$compile",function(a,b,c){return{restrict:"A",scope:{showLoading:"=loadingDirective",loadingMessage:"@"},link:function(a,d,e){a.loadingMessage||(a.loadingMessage="Please Wait...");var f=b.get(e.loadingDirective);"static"===d.css("position")&&d.css("position","relative"),d.append(c(f)(a))}}}])}(),function(a){"use strict";pinpointApp.constant("ConfigurationConfig",{menu:{GENERAL:"general",ALARM:"alarm",HELP:"help"}}),pinpointApp.controller("ConfigurationCtrl",["$scope","$element","ConfigurationConfig","AnalyticsService",function(b,c,d,e){var f=c.find(".modal-body");b.descriptionOfCurrentTab="Set your option",
b.currentTab=d.menu.GENERAL;for(var g in d.menu)!function(a){var c="is"+a.substring(0,1).toUpperCase()+a.substring(1).toLowerCase();b[c]=function(){return b.currentTab==d.menu[a]}}(g);a(c).on("hidden.bs.modal",function(a){b.currentTab=d.menu.GENERAL,b.$broadcast("configuration.alarm.initClose")}),b.setCurrentTab=function(a){if(b.currentTab!=a)switch(b.currentTab=a,a){case d.menu.GENERAL:e.send(e.CONST.MAIN,e.CONST.CLK_GENERAL),f.css("background-color","#e9eaed"),b.descriptionOfCurrentTab="Set your option",b.$broadcast("general.configuration.show");break;case d.menu.ALARM:e.send(e.CONST.MAIN,e.CONST.CLK_ALARM),f.css("background-color","#e9eaed"),b.descriptionOfCurrentTab="Set your alarm rules",b.$broadcast("alarmUserGroup.configuration.show");break;case d.menu.HELP:e.send(e.CONST.MAIN,e.CONST.CLK_HELP),f.css("background-color","#FFF"),b.descriptionOfCurrentTab=""}},b.$on("configuration.show",function(){e.send(e.CONST.MAIN,e.CONST.CLK_CONFIGURATION),c.modal("show")})}])}(jQuery),function(a){"use strict";pinpointApp.controller("HelpCtrl",["$scope","$element",function(a,b){a.enHelpList=[{title:"Quick start guide",link:"https://github.com/naver/pinpoint/blob/master/quickstart/README.md"},{title:"Technical Overview of Pinpoint",link:"https://github.com/naver/pinpoint/wiki/Technical-Overview-Of-Pinpoint"},{title:"Using Pinpont with Docker",link:"http://yous.be/2015/05/05/using-pinpoint-with-docker/"},{title:"Notes on Jetty Plugin for Pinpoint ",link:"https://github.com/cijung/Docs/blob/master/JettyPluginNotes.md"},{title:"About Alarm",link:"https://github.com/naver/pinpoint/blob/master/doc/alarm.md#alarm"}],a.koHelpList=[{title:"Pinpoint 개발자가 작성한 Pinpoint 기술문서",link:"http://helloworld.naver.com/helloworld/1194202"},{title:"소개 및 설치 가이드",link:"http://dev2.prompt.co.kr/33"},{title:"Pinpoint 사용 경험",link:"http://www.barney.pe.kr/blog/category/development/page/2/"},{title:"설치 가이드 동영상 강좌 1",link:"https://www.youtube.com/watch?v=hrvKaEaDEGs"},{title:"설치 가이드 동영상 강좌 2",link:"https://www.youtube.com/watch?v=fliKPGHGXK4"},{title:"AWS Ubuntu 14.04 설치 가이드 ",link:"http://lky1001.tistory.com/132"},{title:"Alarm 가이드",link:"https://github.com/naver/pinpoint/blob/master/doc/alarm.md#alarm-1"}]}])}(jQuery),function(a){"use strict";pinpointApp.constant("GeneralConfig",{menu:{GENERAL:"general",ALRAM:"alram"}}),pinpointApp.controller("GeneralCtrl",["GeneralConfig","$scope","$rootScope","$element","$document","PreferenceService","AnalyticsService","helpContentService",function(a,b,c,d,e,f,g,h){function i(a){g.send(g.CONST.MAIN,g.CONST.CLK_GENERAL_SET_FAVORITE),f.addFavorite(a),b.$apply(function(){b.favoriteList=f.getFavoriteList(),c.$broadcast("navbarDirective.changedFavorite")})}function j(a){if(!a.id)return a.text;var b=a.text.split("@");if(b.length>1){var c=e.get(0).createElement("img");return c.src="/images/icons/"+b[1]+".png",c.style.height="25px",c.style.paddingRight="3px",c.outerHTML+b[0]}return a.text}function k(){var a=!1;l.select2({placeholder:"Select an application.",searchInputPlaceholder:"Input your application name.",allowClear:!1,formatResult:j,formatSelection:j,escapeMarkup:function(a){return a}}).on("select2-selecting",function(b){a=!0}).on("select2-close",function(b){a===!0&&setTimeout(function(){i(l.select2("val"))},0),a=!1})}d.find("span.general-warning").html(h.configuration.general.warning),d.find("div.favorite-empty").html(h.configuration.general.empty),b.$on("general.configuration.show",function(){}),b.depthList=f.getDepthList(),b.periodTypes=f.getPeriodTypes(),b.caller=f.getCaller(),b.callee=f.getCallee(),b.period=f.getPeriod(),b.favoriteList=f.getFavoriteList(),b.changeCaller=function(){g.send(g.CONST.MAIN,g.CONST.CLK_GENERAL_SET_DEPTH,b.caller),f.setCaller(b.caller)},b.changeCallee=function(){g.send(g.CONST.MAIN,g.CONST.CLK_GENERAL_SET_DEPTH,b.callee),f.setCallee(b.callee)},b.changePeriod=function(){g.send(g.CONST.MAIN,g.CONST.CLK_GENERAL_SET_PERIOD,b.period),f.setPeriod(b.period)},b.removeFavorite=function(a){g.send(g.CONST.MAIN,g.CONST.CLK_GENERAL_SET_FAVORITE),f.removeFavorite(a),b.favoriteList=f.getFavoriteList(),c.$broadcast("navbarDirective.changedFavorite")};var l=d.find(".applicationList");b.$on("configuration.general.applications.set",function(a,c){b.applications=c,k()})}])}(jQuery),function(a){"use strict";pinpointApp.directive("alarmUserGroupDirective",["$rootScope","$timeout","helpContentTemplate","helpContentService","AlarmUtilService","AlarmBroadcastService","AnalyticsService","globalConfig",function(b,c,d,e,f,g,h,i){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/alarm/alarmUserGroup.html?v="+G_BUILD_TIME,scope:!0,link:function(b,d){function e(c){""!==r&&a("#"+b.prefix+r).removeClass("selected"),a("#"+b.prefix+c).addClass("selected"),r=c}function j(){f.unsetFilterBackground(x),B.val("")}function k(a){f.showLoading(z,!1),p(f.extractID(a),a.find("span.contents").html())}function l(a){a.find("span.right").remove().end().find("span.remove").show().end().removeClass("remove"),t=!1}function m(a){t!==!0&&(e(f.extractID(a)),g.sendReloadWithUserGroupID(a.find("span.contents").html()))}function n(a){f.sendCRUD("createUserGroup",{id:a},function(b){v.push({number:b.number,id:a}),i.userId?g.sendInit(a,{userId:i.userId,name:i.userName,department:i.userDepartment}):g.sendInit(a),c(function(){e(b.number)}),f.setTotal(y,v.length),f.hide(z,C)},function(a){},A)}function o(a,b){f.sendCRUD("updateUserGroup",{number:a,id:b},function(c){for(var d=0;d<v.length;d++)v[d].number==a&&(v[d].id=b);f.hide(z,C)},function(a){},A)}function p(a,d){f.sendCRUD("removeUserGroup",{id:d},function(d){b.$apply(function(){for(var b=0;b<v.length;b++)if(v[b].number==a){v.splice(b,1);break}v.length>0?(c(function(){e(v[0].number)}),g.sendReloadWithUserGroupID(v[0].id)):g.sendSelectionEmpty()}),f.setTotal(y,v.length),f.hide(z),t=!1},function(a){},A)}function q(a,d){f.sendCRUD("getUserGroupList",angular.isUndefined(d)||""===d?{userId:i.userId||""}:{userGroupId:d},function(d){u=!0,v=b.userGroupList=d,f.setTotal(y,v.length),f.hide(z),v.length>0&&(a&&(g.sendInit(v[0].id),r=v[0].number),c(function(){e(r)})),i.userId&&g.sendLoadPinpointUser(i.userDepartment)},function(a){},A)}b.prefix="alarmUserGroup_";var r="",s=!0,t=!1,u=!1,v=b.userGroupList=[],w=d,x=w.find(".wrapper"),y=w.find(".total"),z=w.find(".some-loading"),A=w.find(".some-alert"),B=w.find("div.filter-input input"),C=(w.find("div.filter-input button.trash"),w.find(".some-edit-content")),D=C.find("input"),E=C.find(".title-message"),F=a(['<span class="right">','<button class="btn btn-danger confirm-cancel"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>','<button class="btn btn-danger confirm-remove" style="margin-left:2px;"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span></button>',"</span>"].join("")),G=w.find(".some-list-content ul");G.on("click",function(c){var d=a(c.toElement||c.target),e=d.get(0).tagName.toLowerCase(),f=d.parents("li");if("button"===e)d.hasClass("edit")?b.onUpdate(c):d.hasClass("confirm-remove")?k(f):d.hasClass("confirm-cancel")&&revmoeCancel(f);else if("span"===e)if(d.hasClass("remove")){if(t===!0)return;t=!0,f.addClass("remove").find("span.remove").hide().end().append(F)}else d.hasClass("contents")?m(f):d.hasClass("glyphicon-edit")?b.onUpdate(c):d.hasClass("glyphicon-remove")?l(f):d.hasClass("glyphicon-ok")&&k(f);else"li"===e&&m(d)}),b.onRefresh=function(){t!==!0&&(h.send(h.CONST.MAIN,h.CONST.CLK_ALARM_REFRESH_USER_GROUP),j(),f.showLoading(z,!1),q(!1,a.trim(B.val())))},b.onCreate=function(){t!==!0&&(s=!0,E.html("Create new alarm group"),D.val(""),f.show(C),D.focus())},b.onUpdate=function(b){if(t!==!0){s=!1;var c=a(b.toElement||b.target).parents("li"),d=f.extractID(c),e=c.find("span.contents").html();E.html('Input new name of "'+e+'".'),D.val(e).prop("id","updateUserGroup_"+d),f.show(C),D.focus().select()}},b.onSearch=function(){if(t!==!0){var b=a.trim(B.val());if(0!==b.length&&b.length<3)return f.showLoading(z,!1),void f.showAlert(A,"You must enter at least three characters.");h.send(h.CONST.MAIN,h.CONST.CLK_ALARM_FILTER_USER_GROUP),f.showLoading(z,!1),q(!1,b)}},b.onInputEdit=function(a){13==a.keyCode?b.onApplyEdit():27==a.keyCode&&(b.onCancelEdit(),a.stopPropagation())},b.onCancelEdit=function(){f.hide(C)},b.onApplyEdit=function(){var b=a.trim(D.val());return""===b?(f.showLoading(z,!0),void f.showAlert(A,"Input group id.")):(f.showLoading(z,!0),f.hasDuplicateItem(v,function(a){return a.id==b})&&s===!0?void f.showAlert(A,"Exist a same group name in the lists."):void(s?(h.send(h.CONST.MAIN,h.CONST.CLK_ALARM_CREATE_USER_GROUP),n(b)):o(f.extractID(D),b)))},b.onCloseAlert=function(){f.closeAlert(A,z)},b.$on("alarmUserGroup.configuration.show",function(){u===!1&&q(!0)})}}}])}(jQuery),function(a){"use strict";pinpointApp.directive("alarmGroupMemberDirective",["$rootScope","$timeout","helpContentTemplate","helpContentService","AlarmUtilService","AlarmBroadcastService","AnalyticsService",function(b,c,d,e,f,g,h){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/alarm/alarmGroupMember.html?v="+G_BUILD_TIME,scope:!0,link:function(b,c){function d(a){f.showLoading(t,!1),m(f.extractID(a))}function e(a){a.find("span.right").remove().end().find("span.remove").show().end().removeClass("remove"),A=!1}function i(a){var c=0;if(b.groupMemberList!=B)for(c=0;c<B.length;c++)if(B[c].memberId==a.userId){B[c].name=a.name,B[c].department=a.department;break}for(c=0;c<b.groupMemberList.length;c++)if(b.groupMemberList[c].memberId==a.userId){b.groupMemberList[c].name=a.name,b.groupMemberList[c].department=a.department;break}}function j(a){var c=0;if(b.groupMemberList!=B)for(c=0;c<B.length;c++)if(B[c].memberId==a){B.splice(c,1);break}for(c=0;c<b.groupMemberList.length;c++)if(b.groupMemberList[c].memberId==a){b.groupMemberList.splice(c,1);break}}function k(){A===!0&&q.find("li.remove").each(function(){e(a(this))}),f.unsetFilterBackground(r),v.val("")}function l(a){f.sendCRUD("addMemberInGroup",{userGroupId:y,memberId:a.userId},function(c){b.groupMemberList.push({userGroupId:y,memberId:a.userId,name:a.name,department:a.department}),f.setTotal(s,B.length),f.hide(t),g.sendCallbackAddedUser(!0)},function(a){},u)}function m(a){f.sendCRUD("removeMemberInGroup",{userGroupId:y,memberId:a},function(c){b.$apply(function(){j(a)}),f.setTotal(s,B.length),f.hide(t),A=!1},function(a){},u)}function n(a){f.sendCRUD("getGroupMemberListInGroup",{userGroupId:y},function(c){z=!0,B=b.groupMemberList=c,f.setTotal(s,B.length),f.hide(t),angular.isDefined(a)&&l(a)},function(a){},u)}function o(c){return a("#"+b.prefix+c).length>0}function p(){return""===y?(f.showLoading(t,!1),f.showAlert(u,"Not selected User Group.",!0),!1):!0}var q=a(c),r=q.find(".wrapper"),s=q.find(".total"),t=q.find(".some-loading"),u=q.find(".some-alert"),v=q.find("div.filter-input input"),w=q.find("div.filter-input button.trash"),x=a(['<span class="position:absolute;right;0px">','<button class="btn btn-danger confirm-cancel"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>','<button class="btn btn-danger confirm-remove" style="margin-left:2px;"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span></button>',"</span>"].join("")),y="",z=!1,A=!1,B=b.groupMemberList=[],C=q.find(".some-list-content ul");C.on("click",function(b){var c=a(b.toElement||b.target),f=c.get(0).tagName.toLowerCase(),g=c.parents("li");if("button"==f)c.hasClass("confirm-cancel")?e(g):c.hasClass("confirm-remove")&&d(g);else if("span"==f)if(c.hasClass("remove")){if(A===!0)return;A=!0,g.addClass("remove").find("span.remove").hide().end().append(x)}else c.hasClass("glyphicon-remove")?e(g):c.hasClass("glyphicon-ok")&&d(g)}),b.prefix="alarmGroupMember_",b.onRefresh=function(){A!==!0&&p()!==!1&&(h.send(h.CONST.MAIN,h.CONST.CLK_ALARM_REFRESH_USER),v.val(""),f.showLoading(t,!1),n())},b.onInputFilter=function(c){return A!==!0?13==c.keyCode?void b.onFilterGroup():void(a.trim(v.val()).length>=3?w.removeClass("disabled"):w.addClass("disabled")):void 0},b.onFilterGroup=function(){if(A!==!0&&p()!==!1){var c=a.trim(v.val());if(0!==c.length&&c.length<3)return f.showLoading(t,!1),void f.showAlert(u,"You must enter at least three characters.");if(h.send(h.CONST.MAIN,h.CONST.CLK_ALARM_FILTER_USER),""===c)b.groupMemberList.length!=B.length&&(b.groupMemberList=B,f.unsetFilterBackground(r)),w.addClass("disabled");else{for(var d=[],e=(B.length,0);e<B.length;e++)-1!=B[e].memberId.indexOf(c)&&d.push(B[e]);b.groupMemberList=d,f.setFilterBackground(r)}}},b.onFilterEmpty=function(){A!==!0&&""!==a.trim(v.val())&&(v.val(""),b.onFilterGroup())},b.onCloseAlert=function(){f.closeAlert(u,t)},b.$on("alarmGroupMember.configuration.load",function(a,b,c){y=b,k(),n(c)}),b.$on("alarmGroupMember.configuration.selectNone",function(a){y="",B=b.groupMemberList=[]}),b.$on("alarmGroupMember.configuration.addUser",function(a,b){return p()===!1?void g.sendCallbackAddedUser(!1):(f.showLoading(t,!1),void(o(b.userId)===!1?(h.send(h.CONST.MAIN,h.CONST.CLK_ALARM_ADD_USER),k(),l(b)):(f.showAlert(u,"Exist a same user in the lists.",!0),g.sendCallbackAddedUser(!0))))}),b.$on("alarmGroupMember.configuration.updateUser",function(a,b){o(b.userId)&&(k(),i(b))}),b.$on("alarmGroupMember.configuration.removeUser",function(a,c){o(c)&&(k(),b.$apply(function(){j(c)}))})}}}])}(jQuery),function(a){"use strict";pinpointApp.directive("alarmPinpointUserDirective",["$rootScope","$timeout","helpContentTemplate","helpContentService","AlarmUtilService","AlarmBroadcastService","AnalyticsService","globalConfig",function(b,c,d,e,f,g,h,i){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/alarm/alarmPinpointUser.html?v="+G_BUILD_TIME,scope:!0,link:function(b,c){function d(a){f.showLoading(t,!1),g.sendUserAdd(k(f.extractID(a)))}function e(a){f.showLoading(t,!1),n(f.extractID(a))}function j(a){a.find("span.right").remove().end().find("span.remove").show().end().find("button.move").removeClass("disabled").end().removeClass("remove"),H=!1}function k(a){for(var b,c=I.length,d=0;c>d;d++)if(I[d].userId==a){b=I[d];break}return b}function l(a,c,d,e,g){var h={userId:a,name:c,department:d,phoneNumber:e,email:g};f.sendCRUD("createPinpointUser",h,function(a){f.hide(t,x),v.val("userName"),w.val(c),b.onSearch()},function(a){},u)}function m(a,b,c,d,e){var h={userId:a,name:b,department:c,phoneNumber:d,email:e};f.sendCRUD("updatePinpointUser",h,function(i){for(var j=0;j<I.length;j++)I[j].userId==a&&(I[j].name=b,I[j].department=c,I[j].phoneNumber=d,I[j].email=e);f.hide(t,x),g.sendUserUpdated(h)},function(a){},u)}function n(a){f.sendCRUD("removePinpointUser",{userId:a},function(c){b.$apply(function(){for(var b=0;b<I.length;b++)if(I[b].userId==a){I.splice(b,1);break}}),f.setTotal(s,I.length),f.hide(t),H=!1,g.sendUserRemoved(a)},function(a){},u)}function o(a){f.sendCRUD("getPinpointUserList",a||{},function(a){I=b.pinpointUserList=a,f.setTotal(s,I.length),f.hide(t)},function(a){},u)}function p(a){var b=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return b.test(a)}function q(a){var b=/^\d+$/;return b.test(a)}var r=a(c),s=(r.find(".some-list-header button"),r.find(".wrapper"),r.find(".empty-list"),r.find(".total")),t=r.find(".some-loading"),u=r.find(".some-alert"),v=r.find("select"),w=r.find("div.filter-input input"),x=r.find(".some-edit-content"),y=x.find("input[name=userID]"),z=x.find("input[name=name]"),A=x.find("input[name=department]"),B=x.find("input[name=phone]"),C=x.find("input[name=email]"),D=x.find(".title-message"),E=a(['<span class="position:absolute;right:0px">','<button class="btn btn-danger confirm-cancel"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>','<button class="btn btn-danger confirm-remove" style="margin-left:2px;"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span></button>',"</span>"].join("")),F=!1,G=!0,H=!1,I=b.pinpointUserList=[],J=r.find(".some-list-content ul");J.on("click",function(c){var f=a(c.toElement||c.target),g=f.get(0).tagName.toLowerCase(),h=f.parents("li");if("button"==g)f.hasClass("confirm-cancel")?j(h):f.hasClass("confirm-cancel")?e(h):f.hasClass("move")?d(h):f.hasClass("edit-user")&&b.onUpdate(c);else if("span"==g)if(f.hasClass("remove")){if(H===!0)return;H=!0,h.addClass("remove").find("span.remove").hide().end().find("button.move").addClass("disabled").end().append(E)}else f.hasClass("contents")||(f.hasClass("glyphicon-edit")?b.onUpdate(c):f.hasClass("glyphicon-remove")?j(h):f.hasClass("glyphicon-ok")?e(h):f.hasClass("glyphicon-chevron-left")&&d(h))}),b.isAllowedCreate=i.editUserInfo,b.onCreate=function(){H!==!0&&(G=!0,D.html("Create new pinpoint user"),y.prop("disabled",""),y.val(""),z.val(""),A.val(""),B.val(""),C.val(""),f.show(x),y.focus())},b.onUpdate=function(b){if(H!==!0){G=!1;var c=a(b.toElement||b.target).parents("li"),d=k(f.extractID(c));D.html("Update pinpoint user data."),y.prop("disabled","disabled"),y.val(d.userId),z.val(d.name),A.val(d.department),B.val(d.phoneNumber),C.val(d.email),f.show(x),z.focus().select()}},b.onInputSearch=function(a){return H!==!0&&13==a.keyCode?void b.onSearch():void 0},b.onSearch=function(){if(H!==!0){var b=v.val(),c=a.trim(w.val());if(0!==c.length&&c.length<3)return f.showLoading(t,!1),void f.showAlert(u,"You must enter at least three characters.");h.send(h.CONST.MAIN,h.CONST.CLK_ALARM_FILTER_PINPOINT_USER),f.showLoading(t,!1);var d={};d[b]=c,o(d)}},b.onInputEdit=function(a){13==a.keyCode?b.onApplyEdit():27==a.keyCode&&(b.onCancelEdit(),a.stopPropagation())},b.onCancelEdit=function(){f.hide(x)},b.onApplyEdit=function(){var b=a.trim(y.val()),c=a.trim(z.val()),d=a.trim(A.val()),e=a.trim(B.val()),g=a.trim(C.val());return""===b||""===c?(f.showLoading(t,!0),void f.showAlert(u,"You must input user id and user name.")):(f.showLoading(t,!0),f.hasDuplicateItem(I,function(a){return a.userId==b})&&G===!0?void f.showAlert(u,"Exist a same user id in the lists."):q(e)===!1?void f.showAlert(u,"You can only input numbers."):p(g)===!1?void f.showAlert(u,"Invalid email format."):void(G?(h.send(h.CONST.MAIN,h.CONST.CLK_ALARM_CREATE_PINPOINT_USER),l(b,c,d,e,g)):m(b,c,d,e,g)))},b.onCloseAlert=function(){f.closeAlert(u,t)},b.$on("alarmPinpointUser.configuration.load",function(a,b){F===!1&&o(""===b?{}:{department:b})}),b.$on("alarmPinpointUser.configuration.addUserCallback",function(a){f.hide(t)})}}}])}(jQuery),function(a){"use strict";pinpointApp.directive("alarmRuleDirective",["$rootScope","$document","$timeout","AlarmUtilService","AnalyticsService","TooltipService",function(b,c,d,e,f,g){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/alarm/alarmRule.html?v="+G_BUILD_TIME,scope:!0,link:function(b,h){function i(){O===!0&&u.find("tr.remove").each(function(){k(a(this))}),b.onCancelEdit(),e.unsetFilterBackground(v),z.val(""),A.val("")}function j(a){e.showLoading(x,!1),r(e.extractID(a))}function k(a){a.removeClass("remove").find("span.removeTemplate").remove().end().find("span.remove").show().end().find("td").removeClass("remove"),O=!1}function l(){a('[data-toggle="alarm-popover"]').popover()}function m(a){if(!a.id)return a.text;var b=a.text.split("@");if(b.length>1){var d=c.get(0).createElement("img");return d.src="/images/icons/"+b[1]+".png",d.style.height="25px",d.style.paddingRight="3px",d.outerHTML+b[0]}return a.text}function n(){D.select2({placeholder:"Select an application.",searchInputPlaceholder:"Input your application name.",allowClear:!1,formatResult:m,formatSelection:m,escapeMarkup:function(a){return a}}).on("change",function(a){}),E.select2({searchInputPlaceholder:"Input your rule name.",placeholder:"Select an rule.",allowClear:!1,formatResult:m,formatSelection:m,escapeMarkup:function(a){return a}}).on("change",function(a){})}function o(a){for(var b,c=P.length,d=0;c>d;d++)if(P[d].ruleId==a){b=P[d];break}return b}function p(a,b,c,f,g,h,i){var j={applicationId:a,serviceType:b,userGroupId:L,checkerName:c,threshold:f,smsSend:g,emailSend:h,notes:i};e.sendCRUD("createRule",j,function(a){j.ruleId=a.ruleId,P.push(j),e.setTotal(w,P.length),d(function(){l()}),e.hide(x,C)},function(a){},y)}function q(a,b,c,f,g,h,i,j){var k={ruleId:a,applicationId:b,serviceType:c,userGroupId:L,checkerName:f,threshold:parseInt(g,10),smsSend:h,emailSend:i,notes:j};e.sendCRUD("updateRule",k,function(k){for(var m=0;m<P.length;m++)P[m].ruleId==a&&(P[m].applicationId=b,P[m].serviceType=c,P[m].checkerName=f,P[m].threshold=g,P[m].smsSend=h,P[m].emailSend=i,P[m].notes=j);e.hide(x,C),d(function(){l()})},function(a){},y)}function r(a){e.sendCRUD("removeRule",{ruleId:a},function(c){b.$apply(function(){for(var b=0;b<P.length;b++)if(P[b].ruleId==a){P.splice(b,1);break}}),e.setTotal(w,P.length),e.hide(x),O=!1},function(a){},y)}function s(a){e.sendCRUD("getRuleList",{userGroupId:L},function(a){M=!0,P=b.ruleList=a,e.setTotal(w,P.length),e.hide(x),d(function(){l()})},function(a){},y)}function t(){b.ruleSets.length>1||e.sendCRUD("getRuleSet",{},function(a){for(var c=0;c<a.length;c++)b.ruleSets.push({text:a[c]})},function(a){},y)}var u=a(h),v=u.find(".wrapper"),w=u.find(".total"),x=u.find(".some-loading"),y=u.find(".some-alert"),z=u.find("div.filter-input input[name=filterApplication]"),A=u.find("div.filter-input input[name=filterRule]"),B=u.find("div.filter-input button.trash"),C=u.find(".some-edit-content"),D=C.find("select[name=application]"),E=C.find("select[name=rule]"),F=C.find("input[name=threshold]"),G=C.find("input[name=sms]"),H=C.find("input[name=email]"),I=C.find("textarea"),J=C.find(".title-message"),K=a(['<span class="removeTemplate">','<button class="btn btn-danger confirm-cancel"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>','<button class="btn btn-danger confirm-remove" style="margin-left:2px;"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span></button>',"</span>"].join("")),L="",M=!1,N=!0,O=!1,P=b.ruleList=[],Q=u.find(".some-list-content .wrapper tbody");Q.on("click",function(c){var d=a(c.toElement||c.target),e=d.get(0).tagName.toLowerCase(),f=d.parents("tr");if("button"==e)d.hasClass("edit")?b.onUpdate(c):d.hasClass("confirm-remove")?j(f):d.hasClass("confirm-cancel")&&k(f);else if("span"==e)if(d.hasClass("remove")){if(O===!0)return;O=!0,f.addClass("remove").find("td:last-child").addClass("remove").find("span.remove").hide().end().append(K)}else d.hasClass("glyphicon-edit")?b.onUpdate(c):d.hasClass("glyphicon-remove")?k(f):d.hasClass("glyphicon-ok")&&j(f)}),g.init("alarmRules"),b.ruleSets=[{text:""}],b.onRefresh=function(){O!==!0&&(f.send(f.CONST.MAIN,f.CONST.CLK_ALARM_REFRESH_RULE),i(),e.showLoading(x,!1),s(!1))},b.onCreate=function(){O!==!0&&(N=!0,J.html("Create new pinpoint user"),D.select2("val",""),E.select2("val",""),F.val("0"),G.prop("checked",""),H.prop("checked",""),I.val(""),e.show(C))},b.onUpdate=function(b){if(O!==!0){N=!1;var c=a(b.toElement||b.target).parents("tr"),d=e.extractID(c),f=o(d);J.html("Update rule data."),D.select2("val",f.applicationId+"@"+f.serviceType).parent().prop("id","updateRule_"+d),E.select2("val",f.checkerName),F.val(f.threshold),G.prop("checked",f.smsSend),H.prop("checked",f.emailSend),I.val(f.notes),e.show(C)}},b.onInputFilter=function(c){return O!==!0?13==c.keyCode?void b.onFilterGroup():void(a.trim(z.val()).length>=3||a.trim(A.val()).length?B.removeClass("disabled"):B.addClass("disabled")):void 0},b.onFilterGroup=function(){if(O!==!0){var c=a.trim(z.val()),d=a.trim(A.val());if(0!==c.length&&c.length<3||0!==d.length&&d.length<3)return e.showLoading(x,!1),void e.showAlert(y,"You must enter at least three characters.");if(f.send(f.CONST.MAIN,f.CONST.CLK_ALARM_FILTER_RULE),""===c&&""===d)b.ruleList.length!=P.length&&(b.ruleList=P,e.unsetFilterBackground(v)),B.addClass("disabled");else{for(var g=[],h=(P.length,0);h<P.length;h++)""===c?-1!=P[h].checkerName.indexOf(d)&&g.push(P[h]):""===d?-1!=P[h].applicationId.indexOf(c)&&g.push(P[h]):-1!=P[h].applicationId.indexOf(c)&&-1!=P[h].checkerName.indexOf(d)&&g.push(P[h]);b.ruleList=g,e.setFilterBackground(v)}}},b.onFilterEmpty=function(){O!==!0&&(""===a.trim(z.val())&&""===a.trim(A.val())||(z.val(""),A.val(""),b.onFilterGroup()))},b.onInputEdit=function(a){27==a.keyCode&&(b.onCancelEdit(),a.stopPropagation())},b.onCancelEdit=function(){e.hide(C)},b.onApplyEdit=function(){var a=D.select2("val").split("@"),b=E.select2("val"),c=F.val(),d=G.prop("checked"),g=H.prop("checked"),h=I.val();return""===a[0]||""===b?(e.showLoading(x,!0),void e.showAlert(y,"Select application name and rule.")):(e.showLoading(x,!0),e.hasDuplicateItem(P,function(c){return c.applicationId===a[0]&&c.checkerName===b})&&N===!0?void e.showAlert(y,"Exist a same rule set in the lists"):void(N?(f.send(f.CONST.MAIN,f.CONST.CLK_ALARM_CREATE_RULE),p(a[0],a[1],b,c,d,g,h)):q(e.extractID(D.parent()),a[0],a[1],b,c,d,g,h)))},b.onCloseAlert=function(){e.closeAlert(y,x)},b.$on("alarmRule.configuration.load",function(a,b){L=b,i(),s(!0),t()}),b.$on("alarmRule.configuration.selectNone",function(a){i(),L="",P=b.ruleList=[]}),b.$on("alarmRule.applications.set",function(a,c){b.applications=c,n()})}}}])}(jQuery),function(a){"use strict";pinpointApp.constant("RealtimeChartCtrlConfig",{sendPrefix:"applicationName=",keys:{CODE:"code",TYPE:"type",RESULT:"result",STATUS:"status",COMMAND:"command",MESSAGE:"message",TIME_STAMP:"timeStamp",PARAMETERS:"parameters",APPLICATION_NAME:"applicationName",ACTIVE_THREAD_COUNTS:"activeThreadCounts"},values:{PING:"PING",PONG:"PONG",REQUEST:"REQUEST",RESPONSE:"RESPONSE",ACTIVE_THREAD_COUNT:"activeThreadCount"},template:{agentChart:'<div class="agent-chart"><div></div></div>',chartDirective:Handlebars.compile('<realtime-chart-directive timeout-max-count="{{timeoutMaxCount}}" chart-color="{{chartColor}}" xcount="{{xAxisCount}}" show-extra-info="{{showExtraInfo}}" request-label="requestLabelNames" namespace="{{namespace}}" width="{{width}}" height="{{height}}"></realtime-chart-directive>')},css:{borderWidth:2,height:180,navbarHeight:70,titleHeight:30},sumChart:{width:260,height:120},otherChart:{width:120,height:60},"const":{MIN_Y:10}}),pinpointApp.controller("RealtimeChartCtrl",["RealtimeChartCtrlConfig","$scope","$element","$rootScope","$compile","$timeout","$window","globalConfig","$location","RealtimeWebsocketService","AnalyticsService","TooltipService",function(b,c,d,e,f,g,h,i,j,k,l,m){function n(){O=d.find("div.agent-sum-chart"),P=d.find("div.agent-sum-chart div:first-child span:first-child"),Q=d.find("div.agent-sum-chart div:first-child span:last-child"),R=d.find("div.agent-chart-list"),S=d.find(".connection-message"),T=d.find(".handle .glyphicon"),U=d.find(".glyphicon-pushpin"),S.hide(),P.html(""),Q.html("0")}function o(){q("sum")===!1&&(O.append(f(b.template.chartDirective({width:b.sumChart.width,height:b.sumChart.height,namespace:"sum",chartColor:"sumChartColor",xAxisCount:W,showExtraInfo:"true",timeoutMaxCount:V}))(c)),_.sum=-1)}function p(){angular.isDefined(_.sum)?(_={},_.sum=-1):_={}}function q(a){return angular.isDefined(_[a])}function r(d){var e=a(b.template.agentChart).append(f(b.template.chartDirective({width:b.otherChart.width,height:b.otherChart.height,namespace:$.length,chartColor:"agentChartColor",xAxisCount:W,showExtraInfo:"false",timeoutMaxCount:V}))(c));R.append(e),x(d,$.length),$.push(e)}function s(){var a=k.open({onopen:function(a){E()},onmessage:function(a){t(a)},onclose:function(a){c.$apply(function(){I()})},ondelay:function(){k.close()},retry:function(){c.retryConnection()}});a&&o()}function t(a){switch(S.hide(),a[b.keys.TYPE]){case b.values.PING:k.send(ga);break;case b.values.RESPONSE:var c=a[b.keys.RESULT];if(c[b.keys.APPLICATION_NAME]!==Z)return;var d=c[b.keys.ACTIVE_THREAD_COUNTS],e=B(d);C(e),u(d,e,c[b.keys.TIME_STAMP])}}function u(a,d,e){var f=Math.max(D(),b["const"].MIN_Y),g=0,h=!0;for(var i in a)w(i,g),a[i][b.keys.CODE]===X?(h=!1,c.$broadcast("realtimeChartDirective.onData."+_[i],a[i][b.keys.STATUS],e,f,h)):c.$broadcast("realtimeChartDirective.onError."+_[i],a[i],e,f),z(g),g++;c.$broadcast("realtimeChartDirective.onData.sum",d,e,f,h),Q.html(g)}function v(a){return ha[b.keys.PARAMETERS][b.keys.APPLICATION_NAME]=a,JSON.stringify(ha)}function w(a,b){q(a)===!1&&(y(b)?x(a,b):r(a)),A(b,a)}function x(a,b){_[a]=b}function y(a){return $.length>a}function z(a){$[a].show()}function A(a,b){$[a].find("div").html(b)}function B(a){var c=[0,0,0,0];for(var d in a)a[d][b.keys.CODE]===X&&jQuery.each(a[d][b.keys.STATUS],function(a,b){c[a]+=b});return c}function C(a){aa.push(a.reduce(function(a,b){return a+b})),aa.length>W&&aa.shift()}function D(){return d3.max(aa,function(a){return a})}function E(){k.send(v(Z))}function F(){k.isOpened()===!1?s():E(),ea=!0}function G(){ea=!1,k.stopReceive(v(""))}function H(){e.$broadcast("realtimeChartDirective.clear.sum"),a.each($,function(a,b){e.$broadcast("realtimeChartDirective.clear."+a),b.hide()})}function I(){S.css("background-color","rgba(200, 200, 200, 0.9)"),S.find("h4").css("color","red").html("Closed connection.<br/><br/>Select node again."),S.find("button").show(),S.show()}function J(){S.css("background-color","rgba(138, 171, 136, 0.5)"),S.find("h4").css("color","blue").html("Waiting Connection..."),S.find("button").hide(),S.show()}function K(){d.animate({bottom:-fa,left:0},500,function(){T.removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up")})}function L(){d.animate({bottom:0,left:0},500,function(){T.removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")})}function M(){d.innerWidth(d.parent().width()-b.css.borderWidth+"px")}function N(){U.css("color",ba?"red":"")}d=a(d);var O,P,Q,R,S,T,U,V=10,W=10,X=0,Y="",Z="",$=[],_={},aa=[0],ba=!0,ca=!1,da=!1,ea=!0,fa=b.css.height,ga=function(){var a={};return a[b.keys.TYPE]=b.values.PONG,JSON.stringify(a)}(),ha=function(){var a={};return a[b.keys.TYPE]=b.values.REQUEST,a[b.keys.COMMAND]=b.values.ACTIVE_THREAD_COUNT,a[b.keys.PARAMETERS]={},a}(),ia=null;m.init("realtime"),c.sumChartColor=["rgba(44, 160, 44, 1)","rgba(60, 129, 250, 1)","rgba(248, 199, 49, 1)","rgba(246, 145, 36, 1)"],c.agentChartColor=["rgba(44, 160, 44, .8)","rgba(60, 129, 250, .8)","rgba(248, 199, 49, .8)","rgba(246, 145, 36, .8)"],c.requestLabelNames=["1s","3s","5s","Slow"],c.bInitialized=!1,a(document).on("visibilitychange",function(){switch(document.visibilityState){case"hidden":ia=g(function(){k.close(),ia=null},6e4);break;case"visible":null!==ia?g.cancel(ia):c.retryConnection(),ia=null}}),n(),c.$on("realtimeChartController.close",function(){K();var a=ea;c.closePopup(),ea=a,N()}),c.$on("realtimeChartController.initialize",function(a,b,d,e){if((ba!==!0||Y!==e)&&/^\/main/.test(j.path())!==!1&&(ca=angular.isUndefined(b)?!1:b,d=angular.isUndefined(d)?"":d,Y=e,n(),P.html(Z=d),i.useRealTime!==!1&&ea!==!1)){if(ca===!1)return void K();p(),M(),c.bInitialized=!0,L(),c.closePopup(),P.html(Z=d),J(),F(),N()}}),c.retryConnection=function(){J(),F()},c.pin=function(){ba=!ba,l.send(l.CONST.MAIN,ba?l.CONST.CLK_REALTIME_CHART_PIN_ON:l.CONST.CLK_REALTIME_CHART_PIN_OFF),N()},c.resizePopup=function(){l.send(l.CONST.MAIN,l.CONST.TG_REALTIME_CHART_RESIZE),da?(fa=b.css.height,d.css({height:b.css.height+"px",bottom:"0px"}),R.css("height","150px")):(fa=h.innerHeight-b.css.navbarHeight,d.css({height:fa+"px",bottom:"0px"}),R.css("height",fa-b.css.titleHeight+"px")),da=!da},c.closePopup=function(){G(),H(),S.hide(),P.html(Z=""),Q.html("0")},a(h).on("resize",function(){M()})}])}(jQuery),function(){"use strict";pinpointApp.controller("MainCtrl",["filterConfig","$scope","$timeout","$routeParams","locationService","NavbarVoService","$window","SidebarTitleVoService","filteredMapUtilService","$rootElement","AnalyticsService","PreferenceService",function(a,b,c,d,e,f,g,h,i,j,k,l){k.send(k.CONST.MAIN_PAGE);var m,n,o,p,q,r;b.hasScatter=!1,g.htoScatter={},n=!0,o=!1,b.sidebarLoading=!0,c(function(){m=new f,d.application&&m.setApplication(d.application),d.readablePeriod&&m.setReadablePeriod(d.readablePeriod),d.queryEndDateTime&&m.setQueryEndDateTime(d.queryEndDateTime),m.setCalleeRange(l.getCalleeByApp(d.application)),
m.setCallerRange(l.getCallerByApp(d.application)),m.isRealtime()?b.$broadcast("navbarDirective.initialize.realtime.andReload",m):angular.isDefined(d.application)&&angular.isUndefined(d.readablePeriod)?b.$broadcast("navbarDirective.initialize.andReload",m):(g.$routeParams=d,m.autoCalculateByQueryEndDateTimeAndReadablePeriod(),b.$broadcast("navbarDirective.initialize",m),b.$broadcast("scatterDirective.initialize",m),b.$broadcast("serverMapDirective.initialize",m))},500),p=function(){return e.path().split("/")[1]||"main"},q=function(){var a="/"+p()+"/"+m.getApplication()+"/";m.isRealtime()?(a+=m.getPeriodType(),g.$routeParams={application:m.getApplication(),readablePeriod:m.getPeriodType()}):a+=m.getReadablePeriod()+"/"+m.getQueryEndDateTime(),e.path()!==a&&("/main"===e.path()?e.path(a).replace():e.skipReload().path(a).replace(),g.$routeParams={application:m.getApplication(),readablePeriod:m.getReadablePeriod().toString(),queryEndDateTime:m.getQueryEndDateTime().toString()},b.$$phase||b.$apply())},r=function(a,b){var c=i.getFilteredMapUrlWithFilterVo(m,a,b);g.open(c,"")},b.getMainContainerClass=function(){return o?"no-data":""},b.getInfoDetailsClass=function(){var a=[];return b.hasScatter&&a.push("has-scatter"),b.hasFilter&&a.push("has-filter"),a.join(" ")},b.$on("serverMapDirective.hasData",function(a){o=!1,b.sidebarLoading=!1}),b.$on("serverMapDirective.hasNoData",function(a){o=!0,b.sidebarLoading=!1}),b.$on("navbarDirective.changed",function(a,c){o=!1,m=c,q(m),g.htoScatter={},b.hasScatter=!1,b.sidebarLoading=!0,m.isRealtime()&&b.$broadcast("realtimeChartController.close"),b.$broadcast("sidebarTitleDirective.empty.forMain"),b.$broadcast("nodeInfoDetailsDirective.hide"),b.$broadcast("linkInfoDetailsDirective.hide"),b.$broadcast("scatterDirective.initialize",m),b.$broadcast("serverMapDirective.initialize",m),b.$broadcast("sidebarTitleDirective.empty.forMain")}),b.$on("serverMapDirective.passingTransactionResponseToScatterChart",function(a,c){b.$broadcast("scatterDirective.initializeWithNode",c)}),b.$on("serverMapDirective.nodeClicked",function(a,c,d,e,f,g){n=!0;var i=new h;i.setImageType(e.serviceType),e.isWas===!0?(b.hasScatter=!0,i.setTitle(e.applicationName),b.$broadcast("scatterDirective.initializeWithNode",e)):e.unknownNodeGroup?(i.setTitle(e.serviceType.replace("_"," ")),b.hasScatter=!1):(i.setTitle(e.applicationName),b.hasScatter=!1),b.hasFilter=!1,b.$broadcast("sidebarTitleDirective.initialize.forMain",i,e),b.$broadcast("nodeInfoDetailsDirective.initialize",c,d,e,f,m,null,g),b.$broadcast("linkInfoDetailsDirective.hide")}),b.$on("serverMapDirective.linkClicked",function(a,c,d,e,f){n=!1;var g=new h;e.unknownLinkGroup?g.setImageType(e.sourceInfo.serviceType).setTitle("Unknown Group from "+e.sourceInfo.applicationName):g.setImageType(e.sourceInfo.serviceType).setTitle(e.sourceInfo.applicationName).setImageType2(e.targetInfo.serviceType).setTitle2(e.targetInfo.applicationName),b.hasScatter=!1;var j=i.findFilterInNavbarVo(e.sourceInfo.applicationName,e.sourceInfo.serviceType,e.targetInfo.applicationName,e.targetInfo.serviceType,m);j?(b.hasFilter=!0,b.$broadcast("filterInformationDirective.initialize.forMain",j.oServerMapFilterVoService)):b.hasFilter=!1,b.$broadcast("sidebarTitleDirective.initialize.forMain",g),b.$broadcast("nodeInfoDetailsDirective.hide"),b.$broadcast("linkInfoDetailsDirective.initialize",c,d,e,f,m)}),b.$on("serverMapDirective.openFilteredMap",function(a,b,c){r(b,c)}),b.$on("linkInfoDetailsDirective.openFilteredMap",function(a,b,c){r(b,c)}),b.$on("linkInfoDetailsDirective.openFilterWizard",function(a,c,d){b.$broadcast("serverMapDirective.openFilterWizard",c,d)}),b.$on("linkInfoDetailsDirective.ResponseSummary.barClicked",function(a,b){r(b)}),b.$on("linkInfoDetailsDirective.showDetailInformationClicked",function(a,c,d){b.hasScatter=!1;var e=new h;e.setImageType(d.sourceInfo.serviceType).setTitle(d.sourceInfo.applicationName).setImageType2(d.targetInfo.serviceType).setTitle2(d.targetInfo.applicationName),b.$broadcast("sidebarTitleDirective.initialize.forMain",e),b.$broadcast("nodeInfoDetailsDirective.hide")}),b.$on("nodeInfoDetailDirective.showDetailInformationClicked",function(a,c,d){b.hasScatter=!1;var e=new h;e.setImageType(d.serviceType),d.unknownNodeGroup?(e.setTitle(d.serviceType.replace("_"," ")),b.hasScatter=!1):(e.setTitle(d.applicationName),b.hasScatter=!1),b.$broadcast("sidebarTitleDirective.initialize.forMain",e),b.$broadcast("linkInfoDetailsDirective.hide")}),b.loadingOption={hideTip:"init"},b.$watch("loadingOption.hideTip",function(a){if("init"!=a&&g.localStorage){var b=new Date;b.setDate(b.getDate()+30),g.localStorage.setItem("__HIDE_LOADING_TIP",a?b.valueOf():"-")}})}])}(),function(){"use strict";pinpointApp.controller("InspectorCtrl",["$scope","$timeout","$routeParams","locationService","NavbarVoService","AnalyticsService",function(a,b,c,d,e,f){f.send(f.CONST.INSPECTOR_PAGE);var g,h,i,j,k,l;b(function(){g=new e,c.application&&g.setApplication(c.application),c.readablePeriod&&g.setReadablePeriod(c.readablePeriod),c.queryEndDateTime&&g.setQueryEndDateTime(c.queryEndDateTime),c.agentId&&g.setAgentId(c.agentId),g.autoCalculateByQueryEndDateTimeAndReadablePeriod(),a.$emit("navbarDirective.initializeWithStaticApplication",g),a.$emit("agentListDirective.initialize",g)},500),a.$on("navbarDirective.changed",function(a,b){g=b,j()}),a.$on("agentListDirective.agentChanged",function(b,c){h=c,g.setAgentId(c.agentId),l()&&j(),h&&a.$emit("agentInfoDirective.initialize",g,h)}),i=function(){var a=d.path().split("/");return a[1]||"inspector"},j=function(){var b=k();l()&&("/inspector"===d.path()||d.skipReload().path(b).replace(),a.$emit("navbarDirective.initializeWithStaticApplication",g),a.$emit("agentListDirective.initialize",g))},k=function(){var a="/"+i()+"/"+g.getApplication()+"/"+g.getReadablePeriod()+"/"+g.getQueryEndDateTime();return g.getAgentId()&&(a+="/"+g.getAgentId()),a},l=function(){var a=k();return d.path()!==a}}])}(),function(){"use strict";pinpointApp.constant("TransactionListConfig",{applicationUrl:"/transactionmetadata.pinpoint",MAX_FETCH_BLOCK_SIZE:100}),pinpointApp.controller("TransactionListCtrl",["TransactionListConfig","$scope","$location","$routeParams","$rootScope","$timeout","$window","$http","webStorage","TimeSliderVoService","TransactionDaoService","AnalyticsService","helpContentService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){l.send(l.CONST.TRANSACTION_LIST_PAGE);var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;f(function(){n=1,o=0,b.transactionDetailUrl="index.html#/transactionDetail",b.sidebarLoading=!0;var a=E(),c=F(),e=!angular.isUndefined(d.transactionInfo);if(e){var h=d.transactionInfo.lastIndexOf("-"),i=d.transactionInfo.lastIndexOf("-",h-1);s=[d.transactionInfo.substring(0,i),d.transactionInfo.substring(i+1,h),d.transactionInfo.substring(h+1)]}a&&c?(p=A(g.name),B(p.applicationName)?(q=C(p),G(e)):H(m.transactionList.openError.noData.replace(/\{\{application\}\}/,p.applicationName))):e===!1?H(m.transactionList.openError.noParent):(p=D(),q=[[s[1],s[2],s[0]]],G(e)),f(function(){$("#main-container").layout({north__minSize:20,north__size:(window.innerHeight-40)/2,center__maskContents:!0})},100)},100),H=function(a){alert(a),g.location.replace(g.location.href.replace("transactionList","main"))},G=function(a){r=new j,r.setTotal(q.length),t(a)},E=function(){return angular.isDefined(g.opener)},F=function(){if(angular.isUndefined(g.opener)||null===g.opener)return!1;var a=g.opener.$routeParams;if(angular.isDefined(d)&&angular.isDefined(a))if("realtime"===a.readablePeriod){if(angular.equals(d.application,a.application))return!0}else if(angular.equals(d.application,a.application)&&angular.equals(d.readablePeriod,a.readablePeriod)&&angular.equals(d.queryEndDateTime,a.queryEndDateTime))return!0;return!1},A=function(a){var b=a.split("|");return 4===b.length?{applicationName:b[0],type:b[1],min:b[2],max:b[3]}:{applicationName:b[0],nXFrom:b[1],nXTo:b[2],nYFrom:b[3],nYTo:b[4]}},D=function(){return{applicationName:d.application.split("@")[0],nXFrom:parseInt(s[1])-1e3,nXTo:parseInt(s[1])+1e3,nYFrom:0,nYTo:0}},B=function(a){return angular.isDefined(g.opener.htoScatter[a])},C=function(a){var b=g.opener.htoScatter[a.applicationName];return a.type?b.getDataByRange(a.type,a.min,a.max):b.getDataByXY(a.nXFrom,a.nXTo,a.nYFrom,a.nYTo)},w=function(a){b.$emit("transactionTableDirective.appendTransactionList",a.metadata)},x=function(){if(!q)return g.alert("Query failed - Query parameter cache deleted.\n\nPossibly due to scatter chart being refreshed."),!1;for(var b=[],c=o,d=0;c<a.MAX_FETCH_BLOCK_SIZE*n&&c<q.length;c++,d++)c>0&&b.push("&"),b=b.concat(["I",d,"=",q[c][0]]),b=b.concat(["&T",d,"=",q[c][1]]),b=b.concat(["&R",d,"=",q[c][2]]),o++;return n++,b},u=function(){y(x(),function(c){return 0===c.metadata.length?(b.$emit("timeSliderDirective.disableMore"),b.$emit("timeSliderDirective.changeMoreToDone"),!1):(c.metadata.length<a.MAX_FETCH_BLOCK_SIZE||r.getTotal()===c.metadata.length+r.getCount()?(b.$emit("timeSliderDirective.disableMore"),b.$emit("timeSliderDirective.changeMoreToDone"),r.setInnerFrom(p.nXFrom)):(b.$emit("timeSliderDirective.enableMore"),r.setInnerFrom(_.last(c.metadata).collectorAcceptTime)),w(c),r.addCount(c.metadata.length),b.$emit("timeSliderDirective.setInnerFromTo",r),void(b.sidebarLoading=!1))})},v=function(){a.MAX_FETCH_BLOCK_SIZE=1e8,u()},t=function(c){var d=x();y(d,function(d){return 0===d.metadata.length?(b.$emit("timeSliderDirective.disableMore"),b.$emit("timeSliderDirective.changeMoreToDone"),!1):(d.metadata.length<a.MAX_FETCH_BLOCK_SIZE||r.getTotal()===d.metadata.length?(b.$emit("timeSliderDirective.disableMore"),b.$emit("timeSliderDirective.changeMoreToDone"),r.setInnerFrom(p.nXFrom)):(b.$emit("timeSliderDirective.enableMore"),r.setInnerFrom(_.last(d.metadata).collectorAcceptTime)),w(d),r.setFrom(p.nXFrom),r.setTo(p.nXTo),r.setInnerTo(p.nXTo),r.setCount(d.metadata.length),b.$emit("timeSliderDirective.initialize",r),b.sidebarLoading=!1,void(c&&z({traceId:s[0],collectorAcceptTime:s[1],elapsed:s[2]})))})},y=function(b,c){h.post(a.applicationUrl,b.join(""),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a,b){angular.isFunction(c)&&c(a)}).error(function(a,b){g.alert("Failed to fetching the request information.")})},z=function(a){c.path("/transactionList/"+d.application+"/"+d.readablePeriod+"/"+d.queryEndDateTime+"/"+a.traceId+"-"+a.collectorAcceptTime+"-"+a.elapsed,!1);var e="index.html#/transactionDetail";a.traceId&&a.collectorAcceptTime&&(e+="/"+g.encodeURIComponent(a.traceId)+"/"+a.collectorAcceptTime,f(function(){b.transactionDetailUrl=e}))},b.$on("transactionTableDirective.applicationSelected",function(a,b){z(b)}),b.$on("timeSliderDirective.moreClicked",function(a){b.sidebarLoading=!0,b.$emit("timeSliderDirective.disableMore"),f(function(){u()},1e3)})}])}(),function(){"use strict";pinpointApp.constant("TransactionDetailConfig",{applicationUrl:"/transactionInfo.pinpoint"}),pinpointApp.controller("TransactionDetailCtrl",["TransactionDetailConfig","$scope","$rootScope","$routeParams","$timeout","$rootElement","AlertsService","ProgressBarService","TransactionDaoService","$window","$location","AnalyticsService","TooltipService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){l.send(l.CONST.TRANSACTION_DETAIL_PAGE);var n,o,p,q,r,s,t,u=!0;p=!1,c.wrapperClass="no-navbar",c.wrapperStyle={"padding-top":"70px"},n=new g(f),o=new h(f),$("#customLogPopup").modal("hide"),e(function(){d.traceId&&d.focusTimestamp&&(o.startLoading(),o.setLoading(30),i.getTransactionDetail(d.traceId,d.focusTimestamp,function(a,b){a||b.exception?(o.stopLoading(),a?n.showError("There is some error while downloading the data."):n.showError(b.exception)):(o.setLoading(70),q(b),r(),e(function(){o.setLoading(100),o.stopLoading()},100))}))}),q=function(a){b.transactionDetail=a,b.logLinkEnable=a.logLinkEnable||!1,b.loggingTransactionInfo=a.loggingTransactionInfo||!1,b.logButtonName=a.logButtonName||"",b.logPageUrl=a.logPageUrl||"",b.logDisableMessage=a.disableButtonMessage||"",b.completeStateClass=s(a.completeState),b.$digest(),f.find('[data-toggle="tooltip"]').tooltip("destroy").tooltip()},s=function(a){var b="label-important";return"Complete"===a?b="label-success":"Progress"===a&&(b="label-warning"),b},r=function(){p===!1&&(p=!0,b.$broadcast("distributedCallFlowDirective.initialize.forTransactionDetail",b.transactionDetail))},t=function(){b.searchMinTime=1e3,b.timelineSearchIndex=0,b.calltreeSearchIndex=0,b.searchMessage=""},b.calltreeSearchIndex=0,b.timelineSearchIndex=0,b.searchMinTime=1e3,b.searchMessage="",b.searchCall=function(){$("#CallStacks").is(":visible")?b.$broadcast("distributedCallFlowDirective.searchCall.forTransactionDetail",parseInt(b.searchMinTime),parseInt(b.calltreeSearchIndex)):b.$broadcast("timelineDirective.searchCall",parseInt(b.searchMinTime),parseInt(b.timelineSearchIndex))},b.viewLog=function(a){return b.loggingTransactionInfo===!1?($("#customLogPopup").find("h4").html("Notice").end().find("div.modal-body").html(b.logDisableMessage).end().modal("show"),!1):void window.open(a)},b.$watch("searchMinTime",function(a){b.calltreeSearchIndex=0,b.timelineSearchIndex=0}),b.openInNewWindow=function(){j.open(k.absUrl())},window.onresize=function(a){b.$broadcast("distributedCallFlowDirective.resize.forTransactionDetail"),b.$broadcast("timelineDirective.resize")},b.openTransactionView=function(){j.open("/#/transactionView/"+b.transactionDetail.agentId+"/"+b.transactionDetail.transactionId+"/"+b.transactionDetail.callStackStart)},b.$on("transactionDetail.selectDistributedCallFlowRow",function(a,c){l.send(l.CONST.CALLSTACK,l.CONST.CLK_DISTRIBUTED_CALL_FLOW),$("#traceTabs li:nth-child(1) a").trigger("click"),b.$broadcast("distributedCallFlowDirective.selectRow.forTransactionDetail",c)}),b.$on("transactionDetail.calltreeSearchCallResult",function(a,c){"Loop"==c?b.calltreeSearchIndex=1:(b.searchMessage=c.replace("{time}",b.searchMinTime),""===c&&b.calltreeSearchIndex++)}),b.$on("transactionDetail.timelineSearchCallResult",function(a,c){"Loop"===c?b.timelineSearchIndex=1:(b.searchMessage=c.replace("{time}",b.searchMinTime),""===c&&b.timelineSearchIndex++)}),$('#traceTabs li a[data-toggle="tab"]').on("shown.bs.tab",function(a){-1!=a.target.href.indexOf("#CallStacks")&&l.send(l.CONST.CALLSTACK,l.CONST.CLK_DISTRIBUTED_CALL_FLOW)}),$("#traceTabs li a").bind("click",function(a){a.preventDefault()}),$("#traceTabs li:nth-child(2) a").bind("click",function(a){l.send(l.CONST.CALLSTACK,l.CONST.CLK_SERVER_MAP),t(),b.$broadcast("serverMapDirective.initializeWithMapData",!1,b.transactionDetail)});$("#traceTabs li:nth-child(3) a").bind("click",function(a){l.send(l.CONST.CALLSTACK,l.CONST.CLK_RPC_TIMELINE),t(),u&&(b.$broadcast("timelineDirective.initialize",b.transactionDetail),u=!1)}),m.init("callTree")}])}(),function(){"use strict";pinpointApp.controller("FilteredMapCtrl",["filterConfig","$scope","$routeParams","$timeout","TimeSliderVoService","NavbarVoService","$window","SidebarTitleVoService","filteredMapUtilService","$rootElement","AnalyticsService",function(a,b,c,d,e,f,g,h,i,j,k){k.send(k.CONST.FILTEREDMAP_PAGE);var l,m,n,o,p,q,r,s;b.hasScatter=!1,g.htoScatter={},o=!0,p=!1,q=!1,b.sidebarLoading=!1,d(function(){l=new f,c.application&&l.setApplication(c.application),c.readablePeriod&&l.setReadablePeriod(c.readablePeriod),c.queryEndDateTime&&l.setQueryEndDateTime(c.queryEndDateTime),c.filter&&l.setFilter(c.filter),c.hint&&l.setHint(c.hint),g.$routeParams=c,l.autoCalculateByQueryEndDateTimeAndReadablePeriod(),m=(new e).setFrom(l.getQueryStartTime()).setTo(l.getQueryEndTime()).setInnerFrom(l.getQueryEndTime()-1).setInnerTo(l.getQueryEndTime()),d(function(){b.$broadcast("timeSliderDirective.initialize",m),b.$broadcast("serverMapDirective.initialize",l),b.$broadcast("scatterDirective.initialize",l)})},500),r=function(a,b){var c=i.getFilteredMapUrlWithFilterVo(l,a,b);g.open(c,"")},s=function(a){angular.isDefined(a)&&angular.forEach(a,function(a,c){b.$broadcast("scatterDirective.initializeWithData",c,a)})},b.getMainContainerClass=function(){return o?"no-data":""},b.getInfoDetailsClass=function(){var a=[];return b.hasScatter&&a.push("has-scatter"),b.hasFilter&&a.push("has-filter"),a.join(" ")},b.$on("serverMapDirective.hasData",function(a){o=!1,b.sidebarLoading=!1}),b.$on("serverMap.hasNoData",function(a){o=!0,b.sidebarLoading=!1}),b.$on("serverMapDirective.fetched",function(a,c,e){m.setInnerFrom(c),p=!0,q=!0,b.$broadcast("timeSliderDirective.setInnerFromTo",m),s(e.applicationScatterData),0===e.applicationMapData.nodeDataArray.length&&0===e.applicationMapData.linkDataArray.length?d(function(){b.$broadcast("timeSliderDirective.moreClicked")},500):b.$broadcast("timeSliderDirective.enableMore")}),b.$on("serverMapDirective.allFetched",function(a,c){m.setInnerFrom(m.getFrom()),p=!0,q=!0,b.$broadcast("timeSliderDirective.setInnerFromTo",m),b.$broadcast("timeSliderDirective.changeMoreToDone"),b.$broadcast("timeSliderDirective.disableMore"),s(c.applicationScatterData)}),b.$on("timeSliderDirective.moreClicked",function(a){var c=new f;c.setApplication(l.getApplication()).setQueryStartTime(l.getQueryStartTime()).setQueryEndTime(m.getInnerFrom()).autoCalcultateByQueryStartTimeAndQueryEndTime(),b.sidebarLoading=!0,b.$broadcast("timeSliderDirective.disableMore"),b.$broadcast("serverMapDirective.fetch",c.getQueryPeriod(),c.getQueryEndTime())}),b.$on("serverMapDirective.nodeClicked",function(a,c,d,e,f){n=!0;var g=new h;g.setImageType(e.serviceType),e.isWas===!0?(b.hasScatter=!0,g.setTitle(e.applicationName),b.$broadcast("scatterDirective.showByNode",e)):e.unknownNodeGroup?(g.setTitle(e.serviceType.replace("_"," ")),b.hasScatter=!1):(g.setTitle(e.applicationName),b.hasScatter=!1),b.hasFilter=!1,b.$broadcast("sidebarTitleDirective.initialize.forFilteredMap",g,e),b.$broadcast("nodeInfoDetailsDirective.initialize",c,d,e,f,l,p),b.$broadcast("linkInfoDetailsDirective.hide",c,d,e,f,l),p=!1}),b.$on("serverMapDirective.linkClicked",function(a,c,d,e,f){n=!1;var g=new h;e.unknownLinkGroup?g.setImageType(e.sourceInfo.serviceType).setTitle("Unknown Group from "+e.sourceInfo.applicationName):g.setImageType(e.sourceInfo.serviceType).setTitle(e.sourceInfo.applicationName).setImageType2(e.targetInfo.serviceType).setTitle2(e.targetInfo.applicationName),b.hasScatter=!1;var j=i.findFilterInNavbarVo(e.sourceInfo.applicationName,e.sourceInfo.serviceType,e.targetInfo.applicationName,e.targetInfo.serviceType,l);j?(b.hasFilter=!0,b.$broadcast("filterInformationDirective.initialize.forFilteredMap",j.oServerMapFilterVoService)):b.hasFilter=!1,b.$broadcast("sidebarTitleDirective.initialize.forFilteredMap",g),b.$broadcast("nodeInfoDetailsDirective.hide"),b.$broadcast("linkInfoDetailsDirective.initialize",c,d,e,f,l,q),q=!1}),b.$on("serverMapDirective.openFilteredMap",function(a,b,c){r(b,c)}),b.$on("linkInfoDetailsDirective.openFilteredMap",function(a,b,c){r(b,c)}),b.$on("linkInfoDetailsDirective.openFilterWizard",function(a,c,d){b.$broadcast("serverMapDirective.openFilterWizard",c,d)}),b.$on("linkInfoDetailsDirective.ResponseSummary.barClicked",function(a,b,c){r(b,c)}),b.$on("linkInfoDetail.showDetailInformationClicked",function(a,c,d){b.hasScatter=!1;var e=new h;e.setImageType(d.sourceInfo.serviceType).setTitle(d.sourceInfo.applicationName).setImageType2(d.targetInfo.serviceType).setTitle2(d.targetInfo.applicationName),b.$broadcast("sidebarTitleDirective.initialize.forFilteredMap",e),b.$broadcast("nodeInfoDetailsDirective.hide")}),b.$on("nodeInfoDetail.showDetailInformationClicked",function(a,c,d){b.hasScatter=!1;var e=new h;e.setImageType(d.serviceType).setTitle(d.applicationName),b.$broadcast("sidebarTitleDirective.initialize.forMain",e,d),b.$broadcast("linkInfoDetailsDirective.hide")})}])}(),function(){"use strict";pinpointApp.constant("TransactionViewConfig",{applicationUrl:"/transactionInfo.pinpoint"}),pinpointApp.controller("TransactionViewCtrl",["TransactionViewConfig","$scope","$rootScope","$rootElement","AlertsService","ProgressBarService","$timeout","$routeParams","NavbarVoService","TransactionDaoService","AgentDaoService","AnalyticsService","PreferenceService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){l.send(l.CONST.TRANSACTION_VIEW_PAGE);var n,o,p,q,r,s,t,u;c.wrapperClass="no-navbar",c.wrapperStyle={"padding-top":"30px"},n=new e(d),o=new f(d),g(function(){h.agentId&&h.traceId&&h.focusTimestamp&&(o.startLoading(),o.setLoading(30),j.getTransactionDetail(h.traceId,h.focusTimestamp,function(a,c){(a||c.exception)&&(o.stopLoading(),a?n.showError("There is some error while downloading the data."):n.showError(c.exception)),o.setLoading(70),p(c),r(),s(),g(function(){o.setLoading(100),o.stopLoading(),$("#main-container").layout({north__minSize:50,north__size:210,onload_end:function(){b.$broadcast("distributedCallFlowDirective.resize.forTransactionView")},onresize_end:function(a){"center"===a&&(b.$broadcast("distributedCallFlowDirective.resize.forTransactionView"),b.$broadcast("agentChartGroupDirective.resize.forTransactionView"),b.$broadcast("serverMapDirective.zoomToFit"))},center__maskContents:!0})},100)}),t(h.agentId,h.focusTimestamp))},500),p=function(a){b.transactionDetail=a,b.completeStateClass=q(a.completeState),b.$digest(),d.find('[data-toggle="tooltip"]').tooltip("destroy").tooltip()},q=function(a){var b="label-important";return"Complete"===a?b="label-success":"Progress"===a&&(b="label-warning"),b},r=function(){b.$broadcast("distributedCallFlowDirective.initialize.forTransactionView",b.transactionDetail)},s=function(){var a=new i;a.setReadablePeriod(m.getPeriodTypes()[0]),a.setQueryEndDateTime(moment(parseInt(h.focusTimestamp)).format("YYYY-MM-DD-HH-mm-ss")),b.$broadcast("serverMapDirective.initializeWithMapData",!0,b.transactionDetail,a)},t=function(a,c){c=parseInt(c,10);var d={agentId:a,from:c-6e5,to:c+6e5,sampleRate:k.getSampleRate(20)};b.$broadcast("agentChartGroupDirective.initialize.forTransactionView",d)},u=function(a){b.$broadcast("agentChartGroupDirective.showCursorAt.forTransactionView",a)},b.$on("distributedCallFlowDirective.rowSelected.forTransactionView",function(a,b){var c;if(b.execTime){var d=5e3,e=new Date(b.execTime);c=moment(Math.floor(e.getTime()/d)*d).format("YYYY-MM-DD HH:mm:ss")}else c=!1;u(c)})}])}(),function(){"use strict";pinpointApp.controller("ScatterFullScreenModeCtrl",["$scope","$rootScope","$window","$routeParams","$timeout","NavbarVoService","AnalyticsService",function(a,b,c,d,e,f,g){g.send(g.CONST.SCATTER_FULL_SCREEN_PAGE),c.htoScatter=c.htoScatter||{},c.$routeParams=c.$routeParams||d;var h;b.wrapperClass="no-navbar",b.wrapperStyle={"padding-top":"0px"},e(function(){h=new f,d.application&&h.setApplication(d.application),d.readablePeriod&&h.setReadablePeriod(d.readablePeriod),d.queryEndDateTime&&h.setQueryEndDateTime(d.queryEndDateTime),h.autoCalculateByQueryEndDateTimeAndReadablePeriod(),a.$emit("scatterDirective.initialize",h),a.$emit("scatterDirective.initializeWithNode",{key:h.getApplicationName()+"^"+h.getServiceTypeName(),serviceType:h.getServiceTypeName(),applicationName:h.getApplicationName(),agentList:d.agentList.split(",")},800,600)},500)}])}();
//# sourceMappingURL=pinpoint.min.js.map