/*! pinpoint - v1.5.2 */!function(a,b){"use strict";var c=8,d=function(a){this.options=a,this._init(),this._initOption(),this._initVar(),this._initEvent(),this._renderScrollArea()};d.prototype._init=function(){this.$wrapper=this.options.wrapper,this._threshold=this.options.elementHeight*(c/4)},d.prototype._initOption=function(){this._viewAreaHeight=this.options.viewAreaHeight,this._renderFunc=this.options.renderFunc||function(){},this._source=this.options.source,this._previousTop=0,this._previousTime=-1,this._selectedRow=-1},d.prototype._initVar=function(){this._elementArray=[],this._elementArrayStartIndex=0,this._elementArrayEndIndex=0,this._elementArraySize=0,this._previousTop=0},d.prototype._initEvent=function(){var a=this;this.options.scroller.on("scroll",function(c){a._scrollEventHandler(c,b(this))})},d.prototype._isDefined=function(a){return"undefined"!=typeof a},d.prototype._renderScrollArea=function(){this._isDefined(this._source)&&this._isDefined(this.options.viewAreaHeight)&&this.reset()},d.prototype._calculateElementStartCount=function(){var a=parseInt(this._viewAreaHeight/this.options.elementHeight)+c;this._elementArraySize=a>this._source.length?this._source.length:a,this._elementArrayEndIndex=this._elementArraySize-1,this.$wrapper.height(this._source.length*this.options.elementHeight)},d.prototype._initElementArray=function(){this.$wrapper.empty();for(var a=0;a<this._elementArraySize;a++){var c=b(this.options.template);this._renderElement(c,a),this._elementArray.push(c),this.$wrapper.append(c)}},d.prototype._renderElement=function(a,b){this._renderFunc.call(this,a,b,this._source[b]),a.attr("data-index",b).css("top",b*this.options.elementHeight+"px")},d.prototype._getDataIndex=function(a){return parseInt(this._elementArray[a].attr("data-index"))},d.prototype._getTopByIndex=function(a){return parseInt(this._elementArray[a].css("top"))},d.prototype._getNextArrayIndex=function(a){return a+1>=this._elementArraySize?0:a+1},d.prototype._getPreviousArrayIndex=function(a){return(0>a-1?this._elementArraySize:a)-1},d.prototype._scrollEventHandler=function(a,b){var c=b.scrollTop(),d=(new Date).valueOf();if(c!=this._previousTop){var e=c-this._previousTop>0;e?this._scrollDown(c,this._getTopByIndex(this._elementArrayStartIndex)):this._scrollUp(c,this._getTopByIndex(this._elementArrayEndIndex)),this._previousTop=c,this._previousTime=d}},d.prototype._scrollDown=function(a,b){var c=a-b-this._threshold;if(c>=0){for(var d=this._getDataIndex(this._elementArrayEndIndex),e=this._elementArrayStartIndex,f=parseInt(c/this.options.elementHeight),g=0;f>g;g++){var h=d+g+1;if(h>=this._source.length)break;f-g<=2*this._elementArraySize&&this._renderElement(this._elementArray[e],h),e=this._getNextArrayIndex(e)}this._elementArrayStartIndex=e,this._elementArrayEndIndex=this._getPreviousArrayIndex(e)}},d.prototype._scrollUp=function(a,b){var c=b+this.options.elementHeight-a-this._viewAreaHeight-this._threshold;if(c>=0){for(var d=this._getDataIndex(this._elementArrayStartIndex),e=this._elementArrayEndIndex,f=parseInt(c/this.options.elementHeight),g=0;f>g;g++){var h=d-(g+1);if(0>h)break;f-g<=2*this._elementArraySize&&this._renderElement(this._elementArray[e],h),e=this._getPreviousArrayIndex(e)}this._elementArrayEndIndex=e,this._elementArrayStartIndex=this._getNextArrayIndex(e)}},d.prototype.source=function(){return 1==arguments.length?(this.options.source=arguments[0],this):this._source},d.prototype.viewAreaHeight=function(){return 1==arguments.length?(this.options.viewAreaHeight=arguments[0],this):this._viewAreaHeight},d.prototype.renderFunc=function(){return 1==arguments.length?(this.options.renderFunc=arguments[0],this):this._renderFunc},d.prototype.reset=function(){return this._initOption(),this._initVar(),this._calculateElementStartCount(),this._initElementArray(),this},d.prototype.contentsAreaHeight=function(){return this.options.elementHeight*this._source.length},d.prototype.destroy=function(){this.options.scroller.off("scroll")},d.prototype.resize=function(a){if(this._isDefined(this._source)!==!1){var b=parseInt(this.options.scroller.scrollTop()/this.options.elementHeight);this.reset(),this.moveByRow(b)}},d.prototype.moveByRow=function(a){var b=this;setTimeout(function(){b.options.scroller.scrollTop(a*b.options.elementHeight)},0)},d.prototype.searchRow=function(a,b,c){var d=-1;b=-1==b?this._source.length:b;for(var e=a;b>e;e++)if(c(this._source[e])){d=e;break}return d},d.prototype.selectedRow=function(a,b){return 0==arguments.length?this._selectedRow:(b.call(this,a),this._selectedRow=a,this)},a.InfiniteCircularScroll=d}(window,jQuery);