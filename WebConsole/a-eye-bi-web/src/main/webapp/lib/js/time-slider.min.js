/*! pinpoint - v1.5.2 */!function(a,b){"use strict";var c=function(a,c){this.$snap=b("#"+a),this.snap=Snap("#"+a),this._init(c),this._initControlClass(),this._addInnerEventListener()};c.prototype._init=function(a){this.groups={},this._aListener={inEvent:[],outEvent:[],clickEvent:[],selectTime:[],changeSliderTimeSeries:[],changeSelectionZone:[]},this.opt={duration:300,xAxisTicks:5,eventZoneHeight:30,headerZoneHeight:20,stateLineThickness:4,minSliderTimeSeries:6e3,maxSelectionTimeSeries:1728e5,headerTextTopPadding:10,selectionPointRadius:5},this.opt.minSliderTimeSeries=1e3*(this.opt.xAxisTicks+1);var b;for(b in a)this.opt[b]=a[b];this.oEventData=new c.EventData(this.opt.eventData||[]),this._checkOffset()},c.prototype._initControlClass=function(a){this.oPositionManager=new c.PositionManager({width:this.opt.width,selectTime:this.opt.selectTime,xAxisTicks:this.opt.xAxisTicks,handleTimeSeries:this.opt.handleTimeSeries,sliderTimeSeries:this.opt.timeSeries,minSliderTimeSeries:this.opt.minSliderTimeSeries,maxSelectionTimeSeries:this.opt.maxSelectionTimeSeries});var b=this.opt.height-this.opt.headerZoneHeight-this.opt.eventZoneHeight;this.oLoading=new c.LoadingIndicator(this,this.getGroup("loading",c.GROUP_TYPE.TOP_BASE,c.oDrawOrder.loading),{width:this.opt.width,height:this.opt.height,duration:2e3}),this.oBackground=new c.Background(this,this.getGroup("background",c.GROUP_TYPE.CONTENT_BASE,c.oDrawOrder.background),{top:0,left:0,width:this.opt.width,height:b,duration:this.opt.duration}),this.oSelectionManager=new c.SelectionManager(this,{margin:this.opt.left,height:this.opt.height,duration:this.opt.duration,handleSrc:this.opt.handleSrc,eventZoneHeight:this.opt.eventZoneHeight,headerZoneHeight:this.opt.headerZoneHeight,contentZoneHeight:b,selectionPointRadius:this.opt.selectionPointRadius}),this.oXAxis=new c.XAxis(this,this.getGroup("x-axis",c.GROUP_TYPE.TOP_BASE,c.oDrawOrder["x-axis"]),{endY:this.opt.height-this.opt.eventZoneHeight,width:this.opt.width,textY:this.opt.headerTextTopPadding,startY:this.opt.headerZoneHeight,duration:this.opt.duration}),this.oStateLine=new c.StateLine(this,this.getGroup("state-line",c.GROUP_TYPE.TOP_BASE,c.oDrawOrder["state-line"]),{width:this.opt.width,duration:this.opt.duration,topLineY:this.opt.headerZoneHeight,thickness:this.opt.stateLineThickness,timeSeries:this.opt.timeSeries,bottomLineY:this.opt.height-this.opt.eventZoneHeight}),this.oEvents=new c.Events(this,this.getGroup("events",c.GROUP_TYPE.BOTTOM_BASE,c.oDrawOrder.events),{duration:this.opt.duration}),this.oLoading.hide()},c.prototype.getGroup=function(a,b,c){if(this.groups[a])return this.groups[a];var d=this.groups[a]=this.snap.g().attr({"class":a,"data-order":c});return this._setTransform(d,b),this._sortGroup(d,c),this.groups[a]},c.prototype._setTransform=function(a,b){switch(b){case c.GROUP_TYPE.TOP_BASE:break;case c.GROUP_TYPE.CONTENT_BASE:a.attr({transform:"translate(0, "+this.opt.headerZoneHeight+")"});break;case c.GROUP_TYPE.BOTTOM_BASE:a.attr({transform:"translate(0, "+(this.opt.height-this.opt.eventZoneHeight)+")"})}},c.prototype._sortGroup=function(a,b){for(var c=this.snap.selectAll("g"),d=null,e=c.length-1;e>=0;e--)c[e]!=a&&b<parseInt(c[e].attr("data-order"))&&(d=c[e]);null!==d&&d.before(a)},c.prototype._checkOffset=function(){var a=this.$snap.offset();this.opt.top=a.top,this.opt.left=a.left},c.prototype._addInnerEventListener=function(){var a=this,c=-1;b(window).on("resize",function(){a._checkOffset(),a._resize()}),this.snap.mousemove(function(a,b,c){}),this.snap.mouseout(function(a,b,c){}),this.snap.mousedown(function(a,b,d){c=b}),this.snap.click(function(b,d,e){c===d&&a.oSelectionManager.onMouseClick(b,d-a.opt.left,e-a.opt.top)})},c.prototype.fireEvent=function(a,b){this._aListener[a].forEach(function(a){a(b)})},c.prototype.addEvent=function(a,b){return this._aListener[a].push(b),this},c.prototype.addEventData=function(a){this.oLoading.show();this.oEventData.addData(a);this.oEvents.changeData(),this.oStateLine.changeData(),this.oLoading.hide()},c.prototype.reset=function(){this.oXAxis.reset(),this.oSelectionManager.reset(),this.oStateLine.reset(),this.oEvents.reset()},c.prototype._resize=function(){this.oPositionManager.setWidth(this.$snap.get(0).getBoundingClientRect().width),this.oBackground.reset(),this.reset()},c.prototype.zoomIn=function(a){this.oPositionManager.zoomIn(),this.reset()},c.prototype.zoomOut=function(a){this.oPositionManager.zoomOut(),this.reset()},c.prototype.getSliderTimeSeries=function(){return this.oPositionManager.getSliderTimeSeries()},c.prototype.getSelectionTimeSeries=function(){return this.oPositionManager.getSelectionTimeSeries()},c.prototype.setDefaultStateLineColor=function(a){this.oStateLine.setDefaultStateLineColor(a)},c.prototype.emptyData=function(){this.oLoading.show();this.oEventData.emptyData();this.oEvents.emptyData(),this.oStateLine.emptyData(),this.oLoading.hide()},c.prototype.setSelectTime=function(a){this.oSelectionManager.setSelectTime(a)},c.GROUP_TYPE={TOP_BASE:"top-base",CONTENT_BASE:"content-base",BOTTOM_BASE:"bottom-base"},c.oDrawOrder={background:0,"selection-zone":5,"time-series-signboard":7,"x-axis":10,events:10,"time-signboard":15,"selection-point":15,"state-line":20,"left-handler":25,"right-handler":25,guide:30,loading:100},c.EventColor={base:"rgba(187, 187, 187, .3)",10100:"#009E00",10199:"#FAEBD7",10200:"#D15260",10201:"#E95C63",10300:"#FF9D7B",10301:"#F2F089",20100:"#00F"},a.TimeSlider=c}(window,jQuery),function(a,b){var c=a.TimeSlider;c.Background=function(a,b,c){this.timeSlider=a,this.opt=c,this.group=b,this._addElements()},c.Background.prototype._addElements=function(){this.rect=this.timeSlider.snap.rect(this.opt.left,this.opt.top,this.opt.width,this.opt.height),this.group.add(this.rect)},c.Background.prototype.reset=function(){this.rect.animate({width:this.timeSlider.oPositionManager.getSliderEndPosition()},this.opt.duration,mina.easein)}}(window,jQuery),function(a,b){var c=a.TimeSlider;c.Configuration=function(a){this._init(a)},c.Configuration.prototype._init=function(a){console.log(a);var b={duration:300,xAxisTicks:5,eventZoneHeight:30,headerZoneHeight:20,stateLineThickness:4,minSliderTimeSeries:6e3,maxSliderTimeSeries:1728e5,headerTextTopPadding:10,selectionPointRadius:5},c={backgroundTop:0,backgroundLeft:0},d={loadingDuration:2e3};this._setOptions(b),this._setOptions(c),this._setOptions(d),this._setOptions(a),this._checkMinSliderTimeSeries(),this._contentZoneHeight=this.height-this.headerZoneHeight-this.eventZoneHeight},c.Configuration.prototype._checkMinSliderTimeSeries=function(a){var b=1e3*(this.xAxisTicks+1);this.minSliderTimeSeries=this.minSliderTimeSeries<b?b:this.minSliderTimeSeries},c.Configuration.prototype.setOffset=function(a){this.offsetLeft=a.left,this.offsetTop=a.top},c.Configuration.prototype._setOptions=function(a){for(var b in a)this[b]=a[b]},c.Configuration.prototype.getContentZoneHeight=function(){return this._contentZoneHeight}}(window,jQuery),function(a,b){var c=a.TimeSlider;c.EventData=function(a){this._init(a)},c.EventData.prototype._init=function(a){var b=this;this._aRawData=a,this._oHash={},this._aRawData.forEach(function(a){b._oHash[b.makeID(a)]=a})},c.EventData.prototype.makeID=function(a){return a.eventTypeCode+"-"+a.eventTimestamp},c.EventData.prototype.count=function(){return this._aRawData.length},c.EventData.prototype.getDataByIndex=function(a){return this._aRawData[a]},c.EventData.prototype.getDataByKey=function(a){return this._oHash[a]},c.EventData.prototype.emptyData=function(){this._aRawData=[],this._oHash={}},c.EventData.prototype.addData=function(a){if(0!==a.length){var b,c,d=this._getBeforeDataBoundary(a);for(b=d;b>=0;b--)this._aRawData.unshift(a[b]),this._oHash[this.makeID(a[b])]=a[b];var e=this._getAfterDataBoundary(a,d);for(b=e;b<a.length;b++)this._aRawData.push(a[b]),this._oHash[this.makeID(a[b])]=a[b];d=-1===d?0:d+1,e=e===Number.MAX_SAFE_INTEGER?a.length-1:e-1;var f=d;if(e>d)for(b=d;b<this._aRawData.length;b++){var g=this._aRawData[b].eventTimestamp;for(c=f;c<a.length;c++){var h=a[c];if(h.eventTimestamp<g)this._aRawData.splice(b,0,h),this._oHash[this.makeID(h)]=h,b++,f=c+1;else if(h.eventTimestamp===g){f=c+1;break}}if(f===a.length)break}}},c.EventData.prototype._getBeforeDataBoundary=function(a){var b=-1;if(0===this._aRawData.length)b=a.length-1;else for(var c=this._aRawData[0].eventTimestamp,d=a.length,e=0;d>e;e++){var f=a[e].eventTimestamp;if(!(c>f))break;b=e}return b},c.EventData.prototype._getAfterDataBoundary=function(a,b){var c=Number.MAX_SAFE_INTEGER,d=b+1,e=a.length;if(e>d)for(var f=this._aRawData[this._aRawData.length-1].eventTimestamp,g=d;e>g;g++){var h=a[g].eventTimestamp;if(h>f){c=g;break}}return c}}(window,jQuery),function(a,b){var c={ID_POSTFIX:"+event-circle",ID_SPLITER:"+"},d=a.TimeSlider;d.Events=function(a,b,c){this.timeSlider=a,this.group=b,this._oEventData=a.oEventData,this._init(c),this._addEventElements(),this._addEvents()},d.Events.prototype._init=function(a){this._oEventGroupElementHash={},this.opt={y:4,barLength:4,gapBarNCircle:2,circleRadius:8};for(var b in a)this.opt[b]=a[b];this._filterShadow=this.timeSlider.snap.filter(Snap.filter.shadow(1,1,1,"#000",.3))},d.Events.prototype._addEventElements=function(){for(var a=this._oEventData.count(),b=0;a>b;b++)this._addEventElement(this._oEventData.getDataByIndex(b),!0)},d.Events.prototype._addEventElement=function(a,b){var c=this._makeElement(a);return this.group[b?"append":"prepend"](c),this.timeSlider.oPositionManager.isInSliderTimeSeries(a.eventTimestamp)===!1&&this.hide(c),c},d.Events.prototype._makeID=function(a){return this._oEventData.makeID(a)+c.ID_POSTFIX},d.Events.prototype._makeElement=function(a){var b=this.opt,c=a.eventTimestamp,d=this._makeID(a),e=this.group.g().attr({"data-id":d,"data-time":c,transform:"translate("+this.timeSlider.oPositionManager.getPositionFromTime(c)+",0)"}).add(this.timeSlider.snap.line(0,b.y,0,b.y+b.barLength),this.timeSlider.snap.circle(0,b.y+b.circleRadius+b.gapBarNCircle+b.barLength,b.circleRadius).attr({fill:TimeSlider.EventColor[a.eventTypeCode],"class":"event",filter:this._filterShadow,"data-time":c}));return this._oEventGroupElementHash[d]=e,e},d.Events.prototype._addEvents=function(){var a=this;this.group.mouseover(function(b,c,d){a._fireEvent("inEvent",b,c,d)}),this.group.mouseout(function(b,c,d){a._fireEvent("outEvent",b,c,d)}),this.group.click(function(b,c,d){a._fireEvent("clickEvent",b,c,d)})},d.Events.prototype._fireEvent=function(a,b,d,e){this.timeSlider.fireEvent(a,[d,e,this._oEventData.getDataByKey(b.srcElement.parentNode.getAttribute("data-id").split(c.ID_SPLITER)[0])])},d.Events.prototype.reset=function(){var a=this;for(var b in this._oEventGroupElementHash){var d=this._oEventGroupElementHash[b],e=this._oEventData.getDataByKey(b.split(c.ID_SPLITER)[0]).eventTimestamp;a.timeSlider.oPositionManager.isInSliderTimeSeries(e)?(a.show(d),function(b,c){b.animate({transform:"translate("+c+",0)"},a.opt.duration)}(d,this.timeSlider.oPositionManager.getPositionFromTime(e))):!function(b,c){b.animate({transform:"translate("+c+",0)"},a.opt.duration,function(){a.hide(b)})}(d,a.timeSlider.oPositionManager.isBeforeSliderStartTime(e)?0:a.timeSlider.oPositionManager.getSliderEndPosition())}},d.Events.prototype.changeData=function(){var a=this.group.selectAll("g");if(0===a.length)return void this._addEventElements();var b,c,d,e=0,f=this._oEventData.count(),g=a.length,h=a[g-1];for(b=0;g>b;b++){var i=a[b],j=parseInt(i.attr("data-time"));for(c=e;f>c;c++){if(d=this._oEventData.getDataByIndex(c),!(d.eventTimestamp<j)){if(d.eventTimestamp===j){e=c+1,h=i;break}e=c,h=i;break}i.before(this._makeElement(d)),e=c}}for(e;f>e;e++){d=this._oEventData.getDataByIndex(e);var k=this._makeElement(d);h.after(k),h=k}this.reset()},d.Events.prototype.emptyData=function(){for(var a in this._oEventGroupElementHash)this._oEventGroupElementHash[a].remove();this._oEventGroupElementHash={}},d.Events.prototype.show=function(a){a.attr("display","block")},d.Events.prototype.hide=function(a){a.attr("display","none")}}(window,jQuery),function(a,b){var c={HANDLER_IMAGE_WIDTH:30,HANDLER_IMAGE_HEIGHT:18},d=a.TimeSlider;d.Handler=function(a,b,d,e,f,g){this.timeSlider=a,this.group=b,this.opt=d,this._previousX=d.x,this._handleSrc=d.handleSrc||c.NORMAL_IMG,this._handleDownSrc=this._getHandleDownSrc(),this.callbackStart=e,this.callbackDrag=f,this.callbackEnd=g,this._addElements(),this.setX(d.x),this.addEvent()},d.Handler.prototype._getHandleDownSrc=function(){var a=this._handleSrc.lastIndexOf(".");return this._handleSrc.substring(0,a)+"_down"+this._handleSrc.substring(a)},d.Handler.prototype._addElements=function(){this.handlerGrip=this.timeSlider.snap.image(this._handleSrc,-(c.HANDLER_IMAGE_WIDTH/2),-(c.HANDLER_IMAGE_HEIGHT/2),c.HANDLER_IMAGE_WIDTH,c.HANDLER_IMAGE_HEIGHT),this.handlerGroup=this.group.g(),this.handlerGroup.add(this.timeSlider.snap.line(0,0,0,this.opt.height),this.handlerGrip)},d.Handler.prototype.addEvent=function(a){var b=this,c=-1;this.handlerGrip.mousedown(function(a,b,c){a.stopPropagation()}),this.handlerGrip.click(function(a,b,c){a.stopPropagation()}),this.handlerGrip.drag(function(a,d,e,f,g){var h=e-b.opt.margin;b._isInRestirctionZone(h)!==!1&&(b.handlerGroup.attr({transform:"translate("+h+", 0)"}),c=h,b.callbackDrag(h))},function(a,c,d){d.stopPropagation(),b.handlerGrip.attr("href",b._handleDownSrc),b.callbackStart(a-b.opt.margin)},function(a){a.stopPropagation(),b.handlerGrip.attr("href",b._handleSrc),b._previousX!==c&&-1!==c?(b.callbackEnd(!0,c),b._previousX=c):b.callbackEnd(!1)})},d.Handler.prototype.setX=function(a){this.handlerGroup.animate({transform:"translate("+a+", 0)"},this.opt.duration,mina.easeout)},d.Handler.prototype._isInRestirctionZone=function(a){return!(a<=this.opt.zone[0]||a>=this.opt.zone[1])},d.Handler.prototype.setZone=function(a,b){this.opt.zone=[a,b]},d.Handler.prototype.setPositionAndZone=function(a,b){this.setX(a),this.callbackDrag(a),this.setZone(b[0],b[1])}}(window,jQuery),function(a,b){var c={SIZE:30},d=a.TimeSlider;d.LoadingIndicator=function(a,b,c){this.timeSlider=a,this.opt=c,this.group=b,this._bRunn=!1,this._addElements(),this.show()},d.LoadingIndicator.prototype._addElements=function(){var a=c.SIZE/2,b=this.opt.width/2-a,d=this.opt.height/2-a;this.group.add(this.timeSlider.snap.rect(0,0,this.opt.width,this.opt.height)),this.elClockwiseBox=this.timeSlider.snap.rect(b,d,c.SIZE,c.SIZE).attr({stroke:"rgba(197, 197, 197, .9)"}),this.elAnitclockwiseBox=this.timeSlider.snap.rect(b,d,c.SIZE,c.SIZE).attr({stroke:"rgba(239, 246, 105, .9)"}),this.group.add(this.elClockwiseBox,this.elAnitclockwiseBox)},d.LoadingIndicator.prototype.show=function(){this.group.attr("display","block"),this._bRunn=!0,this._animate(this.elClockwiseBox,0,360,mina.easeout),this._animate(this.elAnitclockwiseBox,45,-315,mina.easein)},d.LoadingIndicator.prototype._animate=function(a,b,c,d){var e=this;Snap.animate(b,c,function(b){a.attr("transform","rotate("+b+"deg)")},e.opt.duration,d,function(){e._bRunn===!0&&e._animate(a,c,b,d)})},d.LoadingIndicator.prototype.hide=function(){this.group.attr("display","none"),this._bRunn=!1}}(window,jQuery),function(a,b){var c={xAxisTicks:5},d=a.TimeSlider;d.PositionManager=function(a){this._width=a.width,this._minSliderTimeSeries=a.minSliderTimeSeries,this._maxSelectionTimeSeries=a.maxSelectionTimeSeries,this._initInnerVar(),this._setSliderTimeSeries(a.sliderTimeSeries[0],a.sliderTimeSeries[1]),this._initSelectionTimeSeries(a.handleTimeSeries||[]),this._resetSelectionByTime(),this._xAxisTicks=a.xAxisTicks||c.xAxisTicks,this.setSelectTime(a.selectTime)},d.PositionManager.prototype._initInnerVar=function(){this._aSelectionTimeSeries=[],this._aSelectionPosition=[]},d.PositionManager.prototype._setSliderTimeSeries=function(a,b){this._startTime=a,this._endTime=b,this._calcuTimePerPoint()},d.PositionManager.prototype._initSelectionTimeSeries=function(a){2!=a.length&&(a=[this._startTime,this._endTime]),a[1]-a[0]>this._maxSelectionTimeSeries&&(a[0]=a[1]-this._maxSelectionTimeSeries),this._setSelectionTimeSeries(a[0],a[1])},d.PositionManager.prototype._resetSelectionByPosition=function(){this._setSelectionTimeSeries(this.getTimeFromPosition(this._aSelectionPosition[0]),this.getTimeFromPosition(this._aSelectionPosition[1]))},d.PositionManager.prototype._setSelectionTimeSeries=function(a,b){this._aSelectionTimeSeries[0]=null===a?this._aSelectionTimeSeries[0]:a,this._aSelectionTimeSeries[1]=null===b?this._aSelectionTimeSeries[1]:b},d.PositionManager.prototype._resetSelectionByTime=function(){this._setSelectionPosition(this.getPositionFromTime(this._aSelectionTimeSeries[0]),this.getPositionFromTime(this._aSelectionTimeSeries[1]))},d.PositionManager.prototype._setSelectionPosition=function(a,b){this._aSelectionPosition[0]=null===a?this._aSelectionPosition[0]:a,this._aSelectionPosition[1]=null===b?this._aSelectionPosition[1]:b},d.PositionManager.prototype.isInMaxSelectionTimeSeries=function(a,b){return b-a<=this._maxSelectionTimeSeries},d.PositionManager.prototype.getNewSelectionTimeSeriesFromStart=function(a){return[a,a+this._maxSelectionTimeSeries]},d.PositionManager.prototype.getNewSelectionTimeSeriesFromEnd=function(a){return[a-this._maxSelectionTimeSeries,a]},d.PositionManager.prototype.isBeforeSliderStartTime=function(a){return a<this._startTime},d.PositionManager.prototype.isAfterSliderEndTime=function(a){return a>this._endTime},d.PositionManager.prototype.getSliderEndTime=function(){return this._endTime},d.PositionManager.prototype.setWidth=function(a){this._width=a,this._calcuTimePerPoint(),this._reset()},d.PositionManager.prototype.getSliderEndPosition=function(){return this._width},d.PositionManager.prototype.getSliderStartTimeStr=function(){return this._formatDate(new Date(this._startTime))},d.PositionManager.prototype.getSliderEndTimeStr=function(){return this._formatDate(new Date(this._endTime))},d.PositionManager.prototype.getFullTimeStr=function(a){return this._formatDate(new Date(this.getTimeFromPosition(a)))},d.PositionManager.prototype._formatDate=function(a){return a.getFullYear()+"."+this._twoChipers(a.getMonth()+1)+"."+this._twoChipers(a.getDate())+" "+this._twoChipers(a.getHours())+":"+this._twoChipers(a.getMinutes())+":"+this._twoChipers(a.getSeconds())},d.PositionManager.prototype._twoChipers=function(a){return 10>a?"0"+a:a},d.PositionManager.prototype.isInSelectionZone=function(a){return a>=this._aSelectionPosition[0]&&a<=this._aSelectionPosition[1]},d.PositionManager.prototype.isInSliderTimeSeries=function(a){return a>=this._startTime&&a<=this._endTime},d.PositionManager.prototype.getSliderTimeSeries=function(){return[this._startTime,this._endTime]},d.PositionManager.prototype.getSelectionTimeSeries=function(){return[this._aSelectionTimeSeries[0],this._aSelectionTimeSeries[1]]},d.PositionManager.prototype.getSelectionPosition=function(){return[this._aSelectionPosition[0],this._aSelectionPosition[1]]},d.PositionManager.prototype.isInSelectionZoneSelectPoint=function(){return this._selectPosition>=this._aSelectionPosition[0]&&this._selectPosition<=this._aSelectionPosition[1]},d.PositionManager.prototype.getSelectPosition=function(){return this._selectPosition},d.PositionManager.prototype.setSelectTime=function(a){this._selectTime=a,this._selectPosition=this.getPositionFromTime(a)},d.PositionManager.prototype.setSelectPosition=function(a){this._selectPosition=a,this._selectTime=this.getTimeFromPosition(a)},d.PositionManager.prototype.getTimeFromPosition=function(a){return this._startTime+this._timePerPoint*a},d.PositionManager.prototype.getPositionFromTime=function(a){return parseInt((a-this._startTime)/this._timePerPoint)},d.PositionManager.prototype.calcuSelectionZone=function(){var a=parseInt((this._aSelectionPosition[1]-this._aSelectionPosition[0])/2),b=this._selectPosition-a,c=this._selectPosition+a;0>b?(c+=Math.abs(b),b=0):c>this._width&&(b-=c-this._width,c=this._width),this._setSelectionTimeSeries(this.getTimeFromPosition(b),this.getTimeFromPosition(c)),this._setSelectionPosition(b,c)},d.PositionManager.prototype.getXBarPosition=function(){for(var a=this,b=this._xAxisTicks+1,c=parseInt(this._width/b),d=[],e=0;b>e;e++)if(0!==e){var f=e*c;d.push({x:f,time:a.getTimeStr(f)})}return d},d.PositionManager.prototype.getTimeStr=function(a){var b=a*this._timePerPoint+this._startTime,c=new Date(b);return this._twoChipers(c.getMonth()+1)+"."+this._twoChipers(c.getDate())+" "+this._twoChipers(c.getHours())+":"+this._twoChipers(c.getMinutes())},d.PositionManager.prototype.setSelectionStartPosition=function(a){this._setSelectionTimeSeries(this.getTimeFromPosition(a),null),this._setSelectionPosition(a,null)},d.PositionManager.prototype.setSelectionEndPosition=function(a){this._setSelectionTimeSeries(null,this.getTimeFromPosition(a)),this._setSelectionPosition(null,a)},d.PositionManager.prototype.zoomIn=function(){if(this._startTime!==this._aSelectionTimeSeries[0]||this._endTime!==this._aSelectionTimeSeries[1]){var a=parseInt((this._endTime-this._startTime)/4),b=this._selectTime-a,c=this._selectTime+a;if(c-b<this._minSliderTimeSeries){var d=parseInt(this.minSliderTimeSeris/2);b=this._selectTime-d,c=this._selectTime+d}var e;if(this._aSelectionTimeSeries[0]<b){e=b-this._aSelectionTimeSeries[0];var f=this._aSelectionTimeSeries[1]+e>c?c:this._aSelectionTimeSeries[1]+e;this._setSelectionTimeSeries(b,f)}if(this._aSelectionTimeSeries[1]>c){e=this._aSelectionTimeSeries[1]-c;var g=this._aSelectionTimeSeries[0]-e<b?b:this._aSelectionTimeSeries[0]-e;this._setSelectionTimeSeries(g,c)}this._setSliderTimeSeries(b,c),this._reset()}},d.PositionManager.prototype.zoomOut=function(){var a=this._endTime-this._startTime,b=this._aSelectionTimeSeries[0]+parseInt((this._aSelectionTimeSeries[1]-this._aSelectionTimeSeries[0])/2);this._setSliderTimeSeries(b-a,b+a),this._reset()},d.PositionManager.prototype.resetBySelectTime=function(a){a=parseInt(a);var b=parseInt((this._endTime-this._startTime)/2),c=parseInt((this._aSelectionTimeSeries[1]-this._aSelectionTimeSeries[0])/2);this._setSliderTimeSeries(a-b,a+b),this._setSelectionTimeSeries(a-c,a+c),this._resetSelectionByTime(),this.setSelectTime(a)},d.PositionManager.prototype._reset=function(){this.setSelectTime(this._selectTime),this._resetSelectionByTime()},d.PositionManager.prototype._calcuTimePerPoint=function(){this._timePerPoint=parseInt((this._endTime-this._startTime)/this._width)}}(window,jQuery),function(a,b){var c=a.TimeSlider;c.SelectionManager=function(a,b){this.timeSlider=a,this.opt=b,this.initClass()},c.SelectionManager.prototype.initClass=function(){var a=this,b=this.timeSlider.oPositionManager.getSelectionPosition();this.oSelectionZone=new TimeSlider.SelectionZone(this.timeSlider,this.timeSlider.getGroup("selection-zone",TimeSlider.GROUP_TYPE.CONTENT_BASE,TimeSlider.oDrawOrder["selection-zone"]),{top:0,left:b[0],width:b[1]-b[0],height:this.opt.contentZoneHeight,duration:50}),this.oSelectionPoint=new TimeSlider.SelectionPoint(this.timeSlider,this.timeSlider.getGroup("selection-point",TimeSlider.GROUP_TYPE.CONTENT_BASE,TimeSlider.oDrawOrder["selection-point"]),{y:this.opt.headerZoneHeight,x:this.timeSlider.oPositionManager.getSelectPosition(),radius:this.opt.selectionPointRadius,height:this.opt.contentZoneHeight,duration:this.opt.duration,eventStartY:this.opt.headerZoneHeight,eventEndY:this.opt.height-this.opt.eventZoneHeight}),this.oLeftHandler=new TimeSlider.Handler(this.timeSlider,this.timeSlider.getGroup("left-handler",TimeSlider.GROUP_TYPE.CONTENT_BASE,TimeSlider.oDrawOrder["left-handler"]),{x:b[0],zone:[0,b[1]],height:this.opt.contentZoneHeight,margin:this.opt.margin,duration:50,handleSrc:this.opt.handleSrc},function(b){a.oLeftTimeSignboard.onDragStart(b)},function(b){a.oLeftTimeSignboard.onDrag(b)},function(b,c){a.oLeftTimeSignboard.onDragEnd(),b&&a.moveLeftHandler(c)}),this.oRightHandler=new TimeSlider.Handler(this.timeSlider,this.timeSlider.getGroup("right-handler",TimeSlider.GROUP_TYPE.CONTENT_BASE,TimeSlider.oDrawOrder["right-handler"]),{x:b[1],zone:[b[0],this.timeSlider.oPositionManager.getSliderEndPosition()],height:this.opt.contentZoneHeight,margin:this.opt.margin,duration:0,handleSrc:this.opt.handleSrc},function(b){a.oRightTimeSignboard.onDragStart(b)},function(b){a.oRightTimeSignboard.onDrag(b)},function(b,c){a.oRightTimeSignboard.onDragEnd(),b&&a.moveRightHandler(c)}),this.oLeftTimeSignboard=new TimeSlider.TimeSignboard(this.timeSlider,this.timeSlider.getGroup("time-left-signboard",TimeSlider.GROUP_TYPE.CONTENT_BASE,TimeSlider.oDrawOrder["time-signboard"]),{x:b[0],direction:"left"}),this.oRightTimeSignboard=new TimeSlider.TimeSignboard(this.timeSlider,this.timeSlider.getGroup("time-right-signboard",TimeSlider.GROUP_TYPE.CONTENT_BASE,TimeSlider.oDrawOrder["time-signboard"]),{x:b[1],direction:"right"})},c.SelectionManager.prototype.moveLeftHandler=function(a){var b=this.timeSlider.oPositionManager.getSelectionTimeSeries(),c=this.timeSlider.oPositionManager.getTimeFromPosition(a);if(this.timeSlider.oPositionManager.isInMaxSelectionTimeSeries(c,b[1]))this.oRightHandler.setZone(a,this.timeSlider.oPositionManager.getSliderEndPosition()),this.timeSlider.oPositionManager.setSelectionStartPosition(a);else{var d=this.timeSlider.oPositionManager.getNewSelectionTimeSeriesFromStart(c),e=this.timeSlider.oPositionManager.getPositionFromTime(d[1]);this.oRightHandler.setZone(a,this.timeSlider.oPositionManager.getSliderEndPosition()),this.timeSlider.oPositionManager.setSelectionStartPosition(a),this.oRightHandler.setX(e),this.oRightTimeSignboard.onDrag(e),this.oLeftHandler.setZone(0,e),this.timeSlider.oPositionManager.setSelectionEndPosition(e),this.timeSlider.oPositionManager.isInSelectionZoneSelectPoint()===!1&&(this.oSelectionPoint.onMouseClick(e),this.timeSlider.fireEvent("selectTime",d[1]))}this.oSelectionZone.redraw(),this._fireChangeZoneEvent()},c.SelectionManager.prototype.moveRightHandler=function(a){var b=this.timeSlider.oPositionManager.getSelectionTimeSeries(),c=this.timeSlider.oPositionManager.getTimeFromPosition(a);if(this.timeSlider.oPositionManager.isInMaxSelectionTimeSeries(b[0],c))this.oLeftHandler.setZone(0,a),this.timeSlider.oPositionManager.setSelectionEndPosition(a);else{var d=this.timeSlider.oPositionManager.getNewSelectionTimeSeriesFromEnd(c),e=this.timeSlider.oPositionManager.getPositionFromTime(d[0]);this.oLeftHandler.setZone(0,a),this.timeSlider.oPositionManager.setSelectionEndPosition(a),this.oLeftHandler.setX(e),this.oLeftTimeSignboard.onDrag(e),this.oRightHandler.setZone(e,this.timeSlider.oPositionManager.getSliderEndPosition()),this.timeSlider.oPositionManager.setSelectionStartPosition(e),this.timeSlider.oPositionManager.isInSelectionZoneSelectPoint()===!1&&(this.oSelectionPoint.onMouseClick(e),this.timeSlider.fireEvent("selectTime",d[0]))}this.oSelectionZone.redraw(),this._fireChangeZoneEvent()},c.SelectionManager.prototype.moveSelectionAndHandler=function(a){var b=this.timeSlider.oPositionManager.getSelectionPosition();this.oLeftHandler.setPositionAndZone(b[0],[0,b[1]]),this.oRightHandler.setPositionAndZone(b[1],[b[0],this.timeSlider.oPositionManager.getSliderEndPosition()]),this.oSelectionZone.redraw(),this._fireChangeZoneEvent()},c.SelectionManager.prototype.onMouseClick=function(a,b,c){c>this.opt.headerZoneHeight&&c<this.opt.headerZoneHeight+this.opt.contentZoneHeight&&this._setSelectTime(this.timeSlider.oPositionManager.getTimeFromPosition(b))},c.SelectionManager.prototype._fireChangeZoneEvent=function(){var a=this.timeSlider.oPositionManager.getSelectionPosition();this.timeSlider.fireEvent("changeSelectionZone",[this.timeSlider.oPositionManager.getTimeFromPosition(a[0]),this.timeSlider.oPositionManager.getTimeFromPosition(a[1])])},c.SelectionManager.prototype.setSelectTime=function(a){this.timeSlider.oPositionManager.getPositionFromTime(a);this.timeSlider.oPositionManager.isInSliderTimeSeries(a)?this._setSelectTime(a):(this.timeSlider.oPositionManager.resetBySelectTime(a),this.timeSlider.reset(),this.timeSlider.fireEvent("selectTime",a))},c.SelectionManager.prototype._setSelectTime=function(a){this.timeSlider.oPositionManager.setSelectTime(a),this.timeSlider.oPositionManager.isInSelectionZone(this.timeSlider.oPositionManager.getSelectPosition())===!1&&(this.timeSlider.oPositionManager.calcuSelectionZone(),this.moveSelectionAndHandler()),this.oSelectionPoint.onMouseClick(this.timeSlider.oPositionManager.getSelectPosition()),this.timeSlider.fireEvent("selectTime",a)},c.SelectionManager.prototype.reset=function(){var a=this.timeSlider.oPositionManager.getSelectionPosition();this.oLeftHandler.setPositionAndZone(a[0],[0,a[1]]),this.oRightHandler.setPositionAndZone(a[1],[a[0],this.timeSlider.oPositionManager.getSliderEndPosition()]),this.oSelectionZone.redraw(),this.oSelectionPoint.onMouseClick(this.timeSlider.oPositionManager.getSelectPosition())}}(window,jQuery),function(a,b){var c=a.TimeSlider;c.SelectionPoint=function(a,b,c){this.timeSlider=a,this.group=b,this.opt=c,this._addElements(),this.onMouseClick(c.x)},c.SelectionPoint.prototype._addElements=function(){this.group.add(this.timeSlider.snap.line(0,0,0,this.opt.height),this.timeSlider.snap.circle(0,this.opt.height/2,this.opt.radius).attr({filter:this.timeSlider.snap.filter(Snap.filter.shadow(0,0,2,"#000",.3))}))},c.SelectionPoint.prototype.onMouseClick=function(a){this.group.animate({transform:"translate("+a+", "+this.opt.y+")"},this.opt.duration,mina.easein)}}(window,jQuery),function(a,b){var c=a.TimeSlider;c.SelectionZone=function(a,b,c){this.timeSlider=a,this.group=b,this.opt=c,this._addElements()},c.SelectionZone.prototype._addElements=function(){var a=this.timeSlider.oPositionManager.getSelectionPosition();this.elZone=this.timeSlider.snap.rect(a[0],this.opt.top,a[1]-a[0],this.opt.height),this.group.add(this.elZone)},c.SelectionZone.prototype.redraw=function(){var a=this.timeSlider.oPositionManager.getSelectionPosition();this.elZone.animate({x:a[0],width:a[1]-a[0]},this.opt.duration)}}(window,jQuery),function(a,b){var c={AGENT_CONNECT:10100,AGENT_SHUTDOWN:10200,ID_POSTFIX:"+state-line",ID_SPLITER:"+"},d=a.TimeSlider;d.StateLine=function(a,b,c){this.timeSlider=a,this.group=b,this.opt=c,this._oEventData=a.oEventData,this._init(),this._addBaseLine(),this._addEventElements(),this._resetBaseLineColor()},d.StateLine.prototype._init=function(){this._hasDurationData=!1,this._filterShadow=this.timeSlider.snap.filter(Snap.filter.shadow(0,1,.5,"#000",.2)),this._oLineElementHash={}},d.StateLine.prototype._addBaseLine=function(){this._baseColor=TimeSlider.EventColor.base,this._aBaseLine=[this._makeLine(0,this.opt.width,this.opt.topLineY,"base","base-"+Date.now()),this._makeLine(0,this.opt.width,this.opt.bottomLineY,"base","base-"+Date.now())],this.group.add(this._aBaseLine[0],this._aBaseLine[1])},d.StateLine.prototype._addEventElements=function(){for(var a=this._oEventData.count(),b=0;a>b;b++)this._addEventElement(this._oEventData.getDataByIndex(b))},d.StateLine.prototype._addEventElement=function(a){if("undefined"!=typeof a.durationStartTimestamp){if(this.timeSlider.oPositionManager.isInSliderTimeSeries(a.durationStartTimestamp)===!1&&this.timeSlider.oPositionManager.isInSliderTimeSeries(a.durationEndTimestamp)===!1)return;this._hasDurationData=!0,this._addLine(this.timeSlider.oPositionManager.getPositionFromTime(a.durationStartTimestamp),this._getX2(a),a)}},d.StateLine.prototype._makeID=function(a){return this._oEventData.makeID(a)+c.ID_POSTFIX},d.StateLine.prototype._addLine=function(a,b,c){var d=this._makeID(c),e=this._makeLine(a,b,this.opt.topLineY,c.eventTypeCode,d),f=this._makeLine(a,b,this.opt.bottomLineY,c.eventTypeCode,d);this._oLineElementHash[d]=[e,f],this.group.add(e,f)},d.StateLine.prototype._makeLine=function(a,b,c,d,e){return this.timeSlider.snap.line(a,c,b,c).attr({stroke:TimeSlider.EventColor[d],"data-id":e,strokeWidth:this.opt.thickness})},d.StateLine.prototype._hasEventData=function(a){return"undefined"!=typeof this._oLineElementHash[a]},d.StateLine.prototype._getX2=function(a){return this.timeSlider.oPositionManager.getPositionFromTime(-1==a.durationEndTimestamp?this.timeSlider.oPositionManager.getSliderEndTime():a.durationEndTimestamp);
},d.StateLine.prototype.changeData=function(){for(var a=this._oEventData.count(),b=0;a>b;b++){var c=this._oEventData.getDataByIndex(b);this._hasEventData(this._makeID(c))===!1&&this._addEventElement(c)}this.reset()},d.StateLine.prototype.emptyData=function(){for(var a in this._oLineElementHash){var b=this._oLineElementHash[a];b[0].remove(),b[1].remove()}this._oLineElementHash={}},d.StateLine.prototype.setDefaultStateLineColor=function(a){this._baseColor=a,this._hasDurationData!==!0&&this._aBaseLine.forEach(function(b){b.attr("stroke",a)})},d.StateLine.prototype._resetBaseLineColor=function(){var a=this;this._aBaseLine.forEach(function(b){b.attr("stroke",a._hasDurationData===!0?TimeSlider.EventColor.base:a._baseColor)})},d.StateLine.prototype.reset=function(){var a=this,b=this.timeSlider.oPositionManager;for(var d in this._oLineElementHash){var e=this._oLineElementHash[d],f=this._oEventData.getDataByKey(d.split(c.ID_SPLITER)[0]);b.isInSliderTimeSeries(f.durationStartTimestamp)||b.isInSliderTimeSeries(f.durationEndTimestamp)?e.forEach(function(c){a.show(c),c.animate({x1:b.getPositionFromTime(f.durationStartTimestamp),x2:a._getX2(f)},a.opt.duration)}):e.forEach(function(b){a.hide(b)})}this._aBaseLine.forEach(function(c){c.animate({x2:b.getSliderEndPosition()},a.opt.duration)}),this._resetBaseLineColor()},d.StateLine.prototype.show=function(a){a.attr("display","block")},d.StateLine.prototype.hide=function(a){a.attr("display","none")}}(window,jQuery),function(a,b){var c=a.TimeSlider;c.TimeSeriesSignboard=function(a,b,c){this.timeSlider=a,this.group=b,this.opt=c,this._init(),this._addElements()},c.TimeSeriesSignboard.prototype._init=function(){this._halfHeight=this.opt.height-12},c.TimeSeriesSignboard.prototype._addElements=function(){this._elStartTime=this.group.text(0,this._halfHeight,this.timeSlider.oPositionManager.getSliderStartTimeStr()).attr({"text-anchor":"start"}),this._elEndTime=this.group.text(this.timeSlider.oPositionManager.getSliderEndPosition(),this._halfHeight,this.timeSlider.oPositionManager.getSliderEndTimeStr()).attr({"text-anchor":"end"}),this.group.add(this._elStartTime,this._elEndTime)},c.TimeSeriesSignboard.prototype.reset=function(){this._elStartTime.attr("text",this.timeSlider.oPositionManager.getSliderStartTimeStr()),this._elEndTime.attr("text",this.timeSlider.oPositionManager.getSliderEndTimeStr())},c.TimeSeriesSignboard.prototype.resize=function(){var a=this;this._elEndTime.animate({x:a.timeSlider.oPositionManager.getSliderEndPosition()},this.opt.duration,function(){a._elEndTime.attr("text",a.timeSlider.oPositionManager.getSliderEndTimeStr())})}}(window,jQuery),function(a,b){var c=a.TimeSlider;c.TimeSignboard=function(a,b,c){this.timeSlider=a,this.group=b,this.opt=c,this._textMaxWidth=100,this._xPadding=2,this._addElements()},c.TimeSignboard.prototype._addElements=function(){var a=this._isIn(this.opt.x),b=this.opt.x+(a?this._xPadding:-this._xPadding);this.timeText=this.group.text(b,26,this.timeSlider.oPositionManager.getFullTimeStr(this.opt.x)).attr({textAnchor:a?"start":"end"}),this.group.add(this.timeText)},c.TimeSignboard.prototype.setX=function(a){var b=this._isIn(a);this.timeText.attr({x:a+(b?this._xPadding:-this._xPadding),text:this.timeSlider.oPositionManager.getFullTimeStr(a),textAnchor:b?"start":"end"})},c.TimeSignboard.prototype._isIn=function(a){return"left"==this.opt.direction?a<this._textMaxWidth:a+this._textMaxWidth<this.timeSlider.oPositionManager.getSliderEndPosition()},c.TimeSignboard.prototype.onDragStart=function(a){this.setX(a)},c.TimeSignboard.prototype.onDragEnd=function(){},c.TimeSignboard.prototype.onDrag=function(a){this.setX(a)}}(window,jQuery),function(a,b){a.TimeSlider.XAxis=function(a,b,c){this.timeSlider=a,this.group=b,this.opt=c,this.aSubGroup=[],this.aText=[],this.init()},a.TimeSlider.XAxis.prototype.init=function(){for(var a=this.timeSlider.oPositionManager.getXBarPosition(),b=this.opt.width/2,c=this,d=0;d<a.length;d++){var e=c.group.g();c.aText.push(c.timeSlider.snap.text(0,c.opt.textY,a[d].time)),e.attr("transform","translate("+b+", 0)"),e.add(c.aText[d],c.timeSlider.snap.line(0,c.opt.startY,0,c.opt.endY)),c.group.add(e),c.aSubGroup.push(e),c.setX(d,a[d].x,b)}},a.TimeSlider.XAxis.prototype.setX=function(a,b,c){var d=this.aSubGroup[a];3===arguments.length?Snap.animate(c,b,function(a){d.attr("transform","translate("+a+", 0)")},this.opt.duration):d.attr("transform","translate("+b+", 0)")},a.TimeSlider.XAxis.prototype.reset=function(){for(var a=this,b=this.timeSlider.oPositionManager.getXBarPosition(),c=(this.opt.width/2,0);c<b.length;c++)a.aSubGroup[c].attr("transform","translate("+b[c].x+",0)"),a.aText[c].attr("text",b[c].time)}}(window,jQuery);